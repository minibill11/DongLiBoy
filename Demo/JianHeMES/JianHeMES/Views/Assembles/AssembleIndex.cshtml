@model IEnumerable<JianHeMES.Models.Assemble>

@{
    ViewBag.Title = "组装信息查询";
}
<script src="~/Scripts/highcharts.js"></script>
<script src="~/Scripts/highcharts-3d.js"></script>
<script src="~/Scripts/modules/exporting.js"></script>
@*引入EasyUI框架*@
<script type="text/javascript" src="~/Scripts/jquery-1.11.3.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.easyui.min.js"></script>
<link rel="stylesheet" type="text/css" href="~/Content/easyui.css">
<link rel="stylesheet" type="text/css" href="~/Content/icon.css">
<script src="~/Scripts/locale/easyui-lang-zh_CN.js"></script>
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
@*引入Vue.js框架*@
<script src="~/Scripts/vue.js"></script>
@*引入Bootstrap框架*@
<link rel="stylesheet" href="~/Scripts/bootstrap.min.css" />
<script type="text/javascript" src="~/Scripts/bootstrap-paginator.js"></script>

<style type="text/css">
    /*手型指针*/
    .progress {
        cursor: pointer;
    }

    td, th {
        width: 10%;
    }

    #Legend {
        font-size: 10px;
    }

        #Legend div {
            margin-bottom: 5px;
            height: 15px;
        }

    .modal-body > .container {
        width: auto;
        padding: 0;
    }

    .notdo {
        width: 200px;
        height: 100px;
        overflow: auto;
        padding: 0px 15px;
        border: none;
    }
</style>

<h2 class="text-center">@ViewBag.Title</h2>

<div class="text-center">
    <p class="text-success text-center btn btn-default hidden-xs">
        @Html.ActionLink("组装工位", "AssembleStationB")
    </p>
    <p class="text-success text-center btn btn-default hidden-xs">
        @Html.ActionLink("防水测试工位", "WaterproofTestB")
    </p>
    <p class="text-success text-center btn btn-default hidden-xs">
        @Html.ActionLink("电源、转接卡工位", "AssembleAdapterCardB")
    </p>
    <p class="text-success text-center btn btn-default hidden-xs">
        @Html.ActionLink("视检工位", "ViewCheckB")
    </p>
    <p class="text-success text-center btn btn-default hidden-xs">
        @Html.ActionLink("电检工位", "ElectricityCheckB")
    </p>
    <p class="text-success text-center btn btn-default">
        @Html.ActionLink("PQC工位", "PQCCheckB")
    </p>
</div>
<br />
<br />
@using (Html.BeginForm("AssembleIndex", "Assembles", FormMethod.Post, new { id = "searchForm", @class = "text-center" }))
{
    @Html.AntiForgeryToken()
    <form asp-controller="CalibrationRecords" asp-action="Index" method="post" class="text-center">
        <p class="col-md-12" id="queryColumn">
            订单号：@Html.DropDownList("orderNum", (List<SelectListItem>)ViewBag.OrderList, "全部")
            @*<select id="PQCNormal" name="PQCNormal">
                    <option value="">全部</option>
                    <option value="正常">正常</option>
                    <option value="异常">异常</option>
                </select>*@
            <span class="hidden-xs">模组条码号:<input type="text" v-model="BoxBarCode" name="BoxBarCode" /></span>
            <span class="hidden-xs">PQC工位：@Html.DropDownList("PQCNormal", (List<SelectListItem>)ViewBag.PQCNormal, "全部")</span>
            <span class="hidden-xs">备注:<input type="text" v-model="Remark" name="Remark" /></span>
            @*订单号：<input type="text" name="orderNum"/>
                描述:<input type="text" name="SearchString" />*@
            <input type="hidden" id="PageIndex" name="PageIndex" value="0" />
            <input v-bind:disabled="lookup" type="submit" id="searchButton" value="查找" />
        </p>
    </form>
}

<div class="container" style="@ViewBag.Display">
    <div id="query" class="row">
        <div id="details">
            <div class="col-md-6">
                <div class="row">
                    <h4>订单<span v-bind:title="floatmessage"> @ViewBag.orderNum </span>模组组装基本情况 </h4>
                    订单的模组总量：@ViewBag.Quantity，经过组装次数：@ViewBag.RecordCount<br />
                    正常数量：@ViewBag.NormalCount，异常次数：@ViewBag.AbnormalCount，完成率：<span>{{FinishRate}}</span>% <br />  @*@ViewData["FinishRate"]%。*@
                    组装总时长：@ViewBag.TotalTimeSpan<br />
                    平均组装时长：@ViewBag.AvgTimeSpan<br />
                    查询时间：<span id="Querytime">{{message}}</span>   @*输出查询时间*@
                    <hr />
                </div>
                <div class="row">
                    @if (ViewBag.NotDo != null && ViewBag.NotDo.Count != 0)
                    {
                        <div class="col-md-4">
                            <p>未进行PQC模组 @ViewBag.NotDoCount 个：</p>
                            <div class="form-control notdo">
                                @foreach (var item in ViewBag.NotDo)
                                {
                                    @item.ToString()<br />
                                }
                            </div>
                            <br />
                        </div>
                    }
                    @if (ViewBag.DoingNowList != null && ViewBag.DoingNowListCount != 0)
                    {
                        <div class="col-md-4">
                            <p>正在PQC模组 @ViewBag.DoingNowListCount 个：</p>
                            <div class="form-control notdo">
                                @foreach (var item in ViewBag.DoingNowList)
                                {
                                    @item.ToString()<br />
                                }
                            </div>
                            <br />
                        </div>
                    }
                    @if (ViewBag.NeverFinishList != null && ViewBag.NeverFinishListCount != 0)
                    {
                        <div class="col-md-4">
                            <p>未完成PQC模组 @ViewBag.NeverFinishListCount 个：</p>
                            <div class="form-control notdo">
                                @foreach (var item in ViewBag.NeverFinishList)
                                {
                                    @item.ToString()<br />
                                }
                            </div>
                            <br />
                        </div>
                    }
                </div>
            </div>
            <div class="col-md-6">
                <div id="container2"></div>
            </div>
            @*<div id="main_pie" class="col-md-3" style="width: 375px;height:250px;"></div>*@
        </div>
    </div>
</div>

<script type="text/javascript">
    var query = new Vue({
        el: '#query',    //与div中的id名对应
        data: {
            message: new Date().toLocaleString(),  //输出查询时间
            floatmessage: '订单号'+'@ViewBag.orderNum',
            Quantity:@ViewBag.Quantity,
            NormalCount:@ViewBag.NormalCount,
        },
        computed:{
            FinishRate: function (){
                return (this.NormalCount/this.Quantity*100).toFixed(1)
            }
        }
    });

    Highcharts.chart('container2', {
        chart: {
            type: 'pie',
            options3d: {
                enabled: true,
                alpha: 30,
                beta: 0
            }
        },
        title: {
            text: '订单 @ViewBag.orderNum 基本情况'
        },
        tooltip: {
            pointFormat: '<b>{point.percentage:.1f}%</b>'//'{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                depth: 35,
                dataLabels: {
                    enabled: true,
                    formatter:function(){           // '{point.name}'
                        if(this.percentage >0 )
                        { return this.point.name;}
                        else if (this.percentage >=100 )
                        { return '已全部完成';}
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: '',
            data: [
                ['已完成 @ViewBag.NormalCount 个',@ViewBag.NormalCount],
                ['未完成 @ViewBag.NeverFinish 个',@ViewBag.NeverFinish]
            ]
        }]
    });
</script>

<hr style="@ViewBag.Display" />

<div class="col-md-10" style="@ViewBag.Display">
    <h4> 订单 @ViewBag.orderNum 详细组装记录：</h4>
</div>
<div id="Legend" class="col-md-2" style="@ViewBag.Legend">
    <table>
        <tr>
            <th>工位正常完成</th>
            <th>
                <div class="progress" style="width: 100%; color:white"><div class="progress-bar progress-bar-success" style="width: 100%; color:white"></div></div>
            </th>
        </tr>
        <tr>
            <th>工位存在异常情况</th>
            <th>
                <div class="progress" style="width: 100%; color:white"><div class="progress-bar progress-bar-warning" style="width: 100%; color:white"></div></div>
            </th>
        </tr>
        @*<tr><th>工位开始工作</th>
                <th><div class="progress" style="width: 100%;"><div class="progress-bar progress-bar-success progress-bar-striped active" style="width: 30%; color:white"></div></div>
            </th></tr>*@
    </table>
</div>

<div class="col-md-12" style="height:10px"></div>
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.OrderNum)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BoxBarCode)
        </th>
        <th>组装工位</th>
        <th>防水测试工位</th>
        <th>电源、转接卡工位</th>
        <th>视检工位</th>
        <th>电检工位</th>
        <th>PQC工位</th>
        <th>编辑</th>

    </tr>

    @if (Model != null)
    {
        foreach (var item in Model)
        {
            //获取开始时间
            @Html.TextBoxFor(modelItem => item.AssembleBT, new { @id = item.Id + "-AssembleB", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.WaterproofTestBT, new { @id = item.Id + "-WaterproofTestB", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.AssembleAdapterCardBT, new { @id = item.Id + "-AssembleAdapterCardB", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.ViewCheckBT, new { @id = item.Id + "-ViewCheckB", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.ElectricityCheckBT, new { @id = item.Id + "-ElectricityCheckB", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.PQCCheckBT, new { @id = item.Id + "-PQCCheckB", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            //获取完成状态
            @Html.TextBoxFor(modelItem => item.AssembleFinish, new { @id = item.Id + "-Assemble", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.WaterproofTestFinish, new { @id = item.Id + "-WaterproofTest", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.AssembleAdapterFinish, new { @id = item.Id + "-AssembleAdapterCard", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.ViewCheckFinish, new { @id = item.Id + "-ViewCheck", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.ElectricityCheckFinish, new { @id = item.Id + "-ElectricityCheck", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.PQCCheckFinish, new { @id = item.Id + "-PQCCheck", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            //获取异常代码
            @Html.TextBoxFor(modelItem => item.WaterproofAbnormal, new { @id = item.Id + "-WaterproofTestA", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.ViewCheckAbnormal, new { @id = item.Id + "-ViewCheckA", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.ElectricityCheckAbnormal, new { @id = item.Id + "-ElectricityCheckA", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            @Html.TextBoxFor(modelItem => item.PQCCheckAbnormal, new { @id = item.Id + "-PQCCheckA", @class = "form-control", @style = "display:none", @readonly = "readonly" })
            <tr id="@item.Id">
                <td>
                    @Html.DisplayFor(modelItem => item.OrderNum)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.BoxBarCode)
                    @*@Html.EditorFor(modelItem => item.BoxBarCode)*@
                </td>
                @*<td>
                        @Html.DisplayFor(modelItem => item.ModelCollections)
                    </td>*@
                @*<td>
                        <div class="progress" data-toggle="modal" data-target="#@item.BoxBarCode-modallist" title="点击查看模块条码清单">
                             @Html.EditorFor(modelItem => item.ModelList, new { htmlAttributes = new { @id = item.BoxBarCode + "-list", @class = "form-control", @style = "display:none", @readonly = "readonly" } })
                            <div id="@item.BoxBarCode-listpro" class="" role="progressbar"
                                 style="width: 100%;">
                            </div>
                            <script>
                                var list = $("#@item.BoxBarCode-list").val();
                                console.log(list);
                                if(list != ""){
                                    $("#@item.BoxBarCode-listpro").attr("class","progress-bar progress-bar-info")
                                }else{
                                    $("#@item.BoxBarCode-listpro").attr("class","")
                                }
                            </script>
                        </div>
                    </td>*@
                <td>
                    <div class="progress" data-toggle="modal" data-target="#@item.Id-modalAssemble" title="点击查看组装情况">
                        <div id="@item.Id-Assemblepro" class="" role="progressbar"
                             style="width: 100%;">
                        </div>
                        <script>
                            var AssembleB = $("#@item.Id-AssembleB").val();
                            var Assemblepro = $("#@item.Id-Assemble").val();
                            if(AssembleB != ""){
                                if(Assemblepro == "True"){
                                    $("#@item.Id-Assemblepro").attr("class","progress-bar progress-bar-success")
                                }@*else if(Assemblepro == "False"){
                            $("#@item.Id-Assemblepro").attr({class:"progress-bar progress-bar-success progress-bar-striped active",style:"width:30%"})
                        }else if(异常){
                            $("#@item.Id-Assemblepro").attr("class","progress-bar progress-bar-warning")
                        }*@
                            }else{
                                $("#@item.Id-Assemblepro").attr("class","")
                            }
                        </script>
                    </div>
                </td>
                <td>
                    <div class="progress" data-toggle="modal" data-target="#@item.Id-modalWaterproofTest" title="点击查看防水情况">
                        <div id="@item.Id-WaterproofTestpro" class="" role="progressbar"
                             style="width: 100%;">
                        </div>
                        <script>
                            var WaterproofTestA= $("#@item.Id-WaterproofTestA").val();
                            var WaterproofTestB= $("#@item.Id-WaterproofTestB").val();
                            var WaterproofTestpro= $("#@item.Id-WaterproofTest").val();
                            if(WaterproofTestB != ""){
                                if(WaterproofTestpro == "True"){
                                    if(WaterproofTestA == 1){
                                        $("#@item.Id-WaterproofTestpro").attr("class","progress-bar progress-bar-success")
                                    }else{
                                        $("#@item.Id-WaterproofTestpro").attr("class","progress-bar progress-bar-warning")
                                    }
                                }@*else{
                            $("#@item.Id-WaterproofTestpro").attr({class:"progress-bar progress-bar-success progress-bar-striped active",style:"width:30%"})
                        }*@
                            }else{
                                $("#@item.Id-WaterproofTestpro").attr("class","")
                            }
                        </script>
                    </div>
                </td>
                <td>
                    <div class="progress" data-toggle="modal" data-target="#@item.Id-modalAssembleAdapterCard" title="点击查看安装情况">
                        <div id="@item.Id-AssembleAdapterCardpro" class="" role="progressbar"
                             style="width: 100%;">
                        </div>
                        <script>
                            var AssembleAdapterCardB= $("#@item.Id-AssembleAdapterCardB").val();
                            var AssembleAdapterCardpro= $("#@item.Id-AssembleAdapterCard").val();
                            if(AssembleAdapterCardB != ""){
                                if(AssembleAdapterCardpro == "True"){
                                    $("#@item.Id-AssembleAdapterCardpro").attr("class","progress-bar progress-bar-success")
                                }@*else if(AssembleAdapterCardpro == "False"){
                            $("#@item.Id-AssembleAdapterCardpro").attr({class:"progress-bar progress-bar-success progress-bar-striped active",style:"width:30%"})
                        }else if(异常){
                            $("#@item.Id-Assemblepro").attr("class","progress-bar progress-bar-warning")
                        }*@
                            }else{
                                $("#@item.Id-AssembleAdapterCardpro").attr("class","")
                            }
                        </script>
                    </div>
                </td>
                <td>
                    <div class="progress" data-toggle="modal" data-target="#@item.Id-modalViewCheck" title="点击查看视检情况">
                        <div id="@item.Id-ViewCheckpro" class="" role="progressbar"
                             style="width: 100%;">
                        </div>
                        <script>
                            var ViewCheckA=$("#@item.Id-ViewCheckA").val();
                            var ViewCheckB= $("#@item.Id-ViewCheckB").val();
                            var ViewCheckpro= $("#@item.Id-ViewCheck").val();
                            if(ViewCheckB != ""){
                                if(ViewCheckpro == "True"){
                                    if(ViewCheckA == 1){
                                        $("#@item.Id-ViewCheckpro").attr("class","progress-bar progress-bar-success")
                                    }else{
                                        $("#@item.Id-ViewCheckpro").attr("class","progress-bar progress-bar-warning")
                                    }
                                }@*else{
                            $("#@item.Id-ViewCheckpro").attr({class:"progress-bar progress-bar-success progress-bar-striped active",style:"width:30%"})
                        }*@
                            }else{
                                $("#@item.Id-ViewCheckpro").attr("class","")
                            }
                        </script>
                    </div>
                </td>
                <td>
                    <div class="progress" data-toggle="modal" data-target="#@item.Id-modalElectricityCheck" title="点击查看电检情况">
                        <div id="@item.Id-ElectricityCheckpro" class="" role="progressbar"
                             style="width: 100%;">
                        </div>
                        <script>
                            var ElectricityCheckA= $("#@item.Id-ElectricityCheckA").val();
                            var ElectricityCheckB= $("#@item.Id-ElectricityCheckB").val();
                            var ElectricityCheckpro= $("#@item.Id-ElectricityCheck").val();
                            if(ElectricityCheckB != ""){
                                if(ElectricityCheckpro == "True"){
                                    if(ElectricityCheckA == 1){
                                        $("#@item.Id-ElectricityCheckpro").attr("class","progress-bar progress-bar-success")
                                    }else{
                                        $("#@item.Id-ElectricityCheckpro").attr("class","progress-bar progress-bar-warning")
                                    }
                                }@*else{
                            $("#@item.Id-ElectricityCheckpro").attr({class:"progress-bar progress-bar-success progress-bar-striped active",style:"width:30%"})
                        }*@
                            }else{
                                $("#@item.Id-ElectricityCheckpro").attr("class","")
                            }
                        </script>
                    </div>
                </td>
                <td>
                    <div class="progress" data-toggle="modal" data-target="#@item.Id-modalPQCCheck" title="点击查看PQC情况">
                        <div id="@item.Id-PQCCheckpro" class="" role="progressbar"
                             style="width: 100%;">
                        </div>
                        <script>
                            var PQCCheckA= $("#@item.Id-PQCCheckA").val();
                            var PQCCheckB= $("#@item.Id-PQCCheckB").val();
                            var PQCCheckpro= $("#@item.Id-PQCCheck").val();
                            if(PQCCheckB != "" && PQCCheckA != ""){
                                if(PQCCheckpro == "True"){
                                    $("#@item.Id-PQCCheckpro").attr("class","progress-bar progress-bar-success")
                                }else{
                                    $("#@item.Id-PQCCheckpro").attr("class","progress-bar progress-bar-warning")
                                }
                                @*else{
                            $("#@item.Id-PQCCheckpro").attr({class:"progress-bar progress-bar-success progress-bar-striped active",style:"width:30%"})
                        }*@
                            }else{
                                $("#@item.Id-PQCCheckpro").attr("class","")
                            }
                        </script>
                    </div>
                </td>

                <td>
                    @*@Html.ActionLink("修改", "Edit", new { id = item.Id }) |*@
                    @Html.ActionLink("详细", "Details", new { id = item.Id }) @*|
                        @Html.ActionLink("删除", "Delete", new { id = item.Id })*@
                </td>
            </tr>

            <!-- 模态框（Modal）组装 -->
            <div class="modal fade" id="@item.Id-modalAssemble" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title">条码号:@item.BoxBarCode</h4>
                        </div>
                        <div class="modal-body">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-2">
                                        开始时间
                                    </div>
                                    <div class="col-md-2">
                                        模块组装负责人
                                    </div>
                                    <div class="col-md-2">
                                        模块条码清单
                                    </div>
                                    <div class="col-md-2">
                                        完成时间
                                    </div>
                                    <div class="col-md-2">
                                        组装时长
                                    </div>
                                    <div class="col-md-1">
                                        备注
                                    </div>
                                    <div class="col-md-1">
                                        是否已经完成组装
                                    </div>
                                </div>
                                <hr />
                                <div class="row">
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AssembleBT)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AssemblePrincipal)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.ModelList, new { htmlAttributes = new { @id = item.Id + "-list", @class = "form-control", @readonly = "readonly" } })
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AssembleFT)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AssembleTime)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.Remark)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.AssembleFinish)
                                    </div>
                                </div>
                                <hr />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 模态框（Modal）防水 -->
            <div class="modal fade" id="@item.Id-modalWaterproofTest" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title">条码号:@item.BoxBarCode</h4>
                        </div>
                        <div class="modal-body">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-2">
                                        开始时间
                                    </div>
                                    <div class="col-md-1">
                                        防水测试负责人
                                    </div>
                                    <div class="col-md-2">
                                        完成时间
                                    </div>
                                    <div class="col-md-2">
                                        防水测试时长
                                    </div>
                                    <div class="col-md-1">
                                        异常代码
                                    </div>
                                    <div class="col-md-2">
                                        防水维修情况
                                    </div>
                                    <div class="col-md-1">
                                        备注
                                    </div>
                                    <div class="col-md-1">
                                        防水是否完成组装
                                    </div>
                                </div>
                                <hr />
                                <div class="row">
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.WaterproofTestBT)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.WaterproofTestPrincipal)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.WaterproofTestFT)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.WaterproofTestTimeSpan)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.WaterproofAbnormal)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.WaterproofMaintaince)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.Remark)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.WaterproofTestFinish)
                                    </div>
                                </div>
                                <hr />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 模态框（Modal）转接卡 -->
            <div class="modal fade" id="@item.Id-modalAssembleAdapterCard" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title">条码号:@item.BoxBarCode</h4>
                        </div>
                        <div class="modal-body">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-2">
                                        开始时间
                                    </div>
                                    <div class="col-md-2">
                                        安装转接卡负责人
                                    </div>
                                    <div class="col-md-2">
                                        完成时间
                                    </div>
                                    <div class="col-md-2">
                                        转接卡、电源清单
                                    </div>
                                    <div class="col-md-2">
                                        安装时长
                                    </div>
                                    <div class="col-md-1">
                                        备注
                                    </div>
                                    <div class="col-md-1">
                                        转接卡是否安装完成
                                    </div>
                                </div>
                                <hr />
                                <div class="row">
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AssembleAdapterCardBT)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AssembleAdapterCardPrincipal)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AssembleAdapterCardFT)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AdapterCard_Power_List)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AssembleAdapterTime)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.Remark)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.AssembleAdapterFinish)
                                    </div>

                                </div>
                                <hr />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 模态框（Modal）视检 -->
            <div class="modal fade" id="@item.Id-modalViewCheck" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title">条码号:@item.BoxBarCode</h4>
                        </div>
                        <div class="modal-body">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-2">
                                        开始时间
                                    </div>
                                    <div class="col-md-2">
                                        视检负责人
                                    </div>
                                    <div class="col-md-2">
                                        完成时间
                                    </div>
                                    <div class="col-md-2">
                                        视检时长
                                    </div>
                                    <div class="col-md-2">
                                        视检异常
                                    </div>
                                    <div class="col-md-1">
                                        备注
                                    </div>
                                    <div class="col-md-1">
                                        视检是否完成
                                    </div>
                                </div>
                                <hr />
                                <div class="row">
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.ViewCheckBT)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AssembleViewCheckPrincipal)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.ViewCheckFT)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.ViewCheckTime)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.ViewCheckAbnormal)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.Remark)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.ViewCheckFinish)
                                    </div>
                                </div>
                                <hr />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 模态框（Modal）电检 -->
            <div class="modal fade" id="@item.Id-modalElectricityCheck" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title">条码号:@item.BoxBarCode</h4>
                        </div>
                        <div class="modal-body">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-2">
                                        开始时间
                                    </div>
                                    <div class="col-md-2">
                                        电检负责人
                                    </div>
                                    <div class="col-md-2">
                                        完成时间
                                    </div>
                                    <div class="col-md-2">
                                        电检时长
                                    </div>
                                    <div class="col-md-2">
                                        电检异常
                                    </div>
                                    <div class="col-md-1">
                                        备注
                                    </div>
                                    <div class="col-md-1">
                                        电检是否完成
                                    </div>
                                </div>
                                <hr />
                                <div class="row">
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.ElectricityCheckBT)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.AssembleElectricityCheckPrincipal)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.ElectricityCheckFT)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.ElectricityCheckTime)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.ElectricityCheckAbnormal)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.Remark)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.ElectricityCheckFinish)
                                    </div>
                                </div>
                                <hr />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 模态框（Modal）PQC -->
            <div class="modal fade" id="@item.Id-modalPQCCheck" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title">条码号:@item.BoxBarCode</h4>
                        </div>
                        <div class="modal-body">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-2">
                                        开始时间
                                    </div>
                                    <div class="col-md-1">
                                        PQC负责人
                                    </div>
                                    <div class="col-md-1">
                                        产线
                                    </div>
                                    <div class="col-md-2">
                                        完成时间
                                    </div>
                                    <div class="col-md-2">
                                        PQC时长
                                    </div>
                                    <div class="col-md-2">
                                        PQC异常
                                    </div>
                                    <div class="col-md-1">
                                        备注
                                    </div>
                                    <div class="col-md-1">
                                        PQC是否完成
                                    </div>
                                </div>
                                <hr />
                                <div class="row">
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.PQCCheckBT)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.AssemblePQCPrincipal)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.AssembleLineId)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.PQCCheckFT)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.PQCCheckTime)
                                    </div>
                                    <div class="col-md-2">
                                        @Html.DisplayFor(modelItem => item.PQCCheckAbnormal)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.Remark)
                                    </div>
                                    <div class="col-md-1">
                                        @Html.DisplayFor(modelItem => item.PQCCheckFinish)
                                    </div>
                                </div>
                                <hr />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
</table>


@*-----------------------分页功能----------------------------------------------------------------------------------------*@
<div class="text-center">
    <div id="pagebar">
        @for (var i = 0; i < ViewBag.PageCount; i++)
        {
            if (i == ViewBag.PageIndex)
            {
                <span style="font-size:25px" class="currentpagenumber">  @(i + 1)  </span>
            }
            else
            {
                <a class="pagenumber" style="font-size:20px" href="javascript:;">  @(i + 1)  </a>
            }
        }
    </div>
</div>

@section scripts {
    <script>
        var queryColumn = new Vue ({
            el:'#queryColumn',
            data:{
                BoxBarCode:"",
                lookup:true,
                Remark:"",
            },
            watch:{
                BoxBarCode:function(val){
                    if($("#orderNum").val()==""&&this.BoxBarCode==""&&this.Remark==""){
                        this.lookup = true;
                    }else{
                        this.lookup = false;
                    };
                },
                Remark:function(val){
                    if($("#orderNum").val()==""&&this.BoxBarCode==""&&this.Remark==""){
                        this.lookup = true;
                    }else{
                        this.lookup = false;
                    };
                }
            }
        });
    </script>
    <script>

        function submitForm(pagenumber) {
            pagenumber = parseInt(pagenumber, 10);
            $('#PageIndex').val(pagenumber - 1);
            $('#searchForm').submit();
        }
        $(function () {

            $('#searchButton').click(function () {
                submitForm($('#pagebar .currentpagenumber').text());
            });

            $('#pagebar .pagenumber').click(function () {
                submitForm($(this).text());
            });

        });

        $("#orderNum").change(function (val) {
            if(val.target.value == ""&&queryColumn.BoxBarCode==""&&queryColumn.Remark==""){
                queryColumn.lookup = true;
            }else{
                queryColumn.lookup = false;
            };
        });
    </script>
}

