@model IEnumerable<JianHeMES.Models.SMT_ProductionLineInfo>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <script src="~/Scripts/vue.js"></script>
    <script src="~/Scripts/jquery-1.11.3.js"></script>
    <title>SMT看板管理界面</title>
    <style>
        .table > tbody > tr > td, .table > tbody > tr > th {
            text-align: center;
            height: 70px;
            vertical-align: middle !important;
            border: 0px;
        }

        .lineedit, .linename, .linenum, .lineorder, .linestatu {
            width: 130px;
        }

        .linenum {
            margin: auto;
            text-align: center;
            width: 35%;
            height: 70%;
            line-height: 37px;
            border-radius: 50%;
        }
    </style>
</head>
<body class="text-center">
    <div id="app" class="container body-content">
        <h3>SMT看板管理界面</h3>
        @if (Model != null)
        {
            int i1 = 0;
            int i2 = 0;
            int i3 = 0;
            int i4 = 0;
            int i5 = 0;
            <table class="table">
                <tr>
                    <th></th>
                    @foreach (var item in Model)
                    {
                        if (i1 < 7)
                        {
                            <th @*class="warning"*@>
                                <div class="linenum">@Html.DisplayFor(modelItem => item.LineNum)</div>
                            </th>
                            <th></th>
                            i1++;
                        }
                        else
                        {
                            break;
                        }
                    }
                </tr>
                <tr>
                    <td></td>
                    @foreach (var item in Model)
                    {
                        if (i2 < 7)
                        {
                            <td class="lineorder" style="border-radius: 11px 11px 0px 0px;">
                                @Html.DisplayFor(modelItem => item.ProducingOrderNum)
                            </td>
                            <td></td>
                            i2++;
                        }
                        else
                        {
                            break;
                        }
                    }
                </tr>
                <tr>
                    <th></th>
                    @foreach (var item in Model)
                    {
                        if (i3 < 7)
                        {
                            <th class="linestatu">@Html.DisplayFor(modelItem => item.Status)</th>
                            <th></th>
                            i3++;
                        }
                        else
                        {
                            break;
                        }
                    }
                </tr>
                <tr>
                    <td></td>
                    @foreach (var item in Model)
                    {
                        if (i4 < 7)
                        {
                            <td class="linename">
                                @Html.DisplayFor(modelItem => item.Team)<br />
                                @Html.DisplayFor(modelItem => item.GroupLeader)
                            </td>
                            <td></td>
                            i4++;
                        }
                        else
                        {
                            break;
                        }
                    }
                </tr>
                <tr>
                    <td></td>
                    @foreach (var item in Model)
                    {
                        if (i5 < 7)
                        {
                            <td class="lineedit" style="border-radius: 0px 0px 11px 11px;">
                                @Html.ActionLink("修改", "SMT_ProductionLineEdit", new { id = item.Id })
                            </td>
                            <td></td>
                            i5++;
                        }
                        else
                        {
                            break;
                        }
                    }
                </tr>
            </table>
            i1 = 0; i2 = 0; i3 = 0; i4 = 0; i5 = 0;
            <table class="table">
                <tr>
                    <th></th>
                    @foreach (var item in Model)
                    {
                        if (i1 >= 7)
                        {
                            <th @*class="warning"*@>
                                <div class="linenum">@Html.DisplayFor(modelItem => item.LineNum)</div>
                            </th>
                            <th></th>
                            i1++;
                        }
                        else
                        {
                            i1++;
                        }
                    }
                </tr>
                <tr>
                    <td></td>
                    @foreach (var item in Model)
                    {
                        if (i2 >= 7)
                        {
                            <td class="lineorder" style="border-radius: 11px 11px 0px 0px;">
                                @Html.DisplayFor(modelItem => item.ProducingOrderNum)
                            </td>
                            <td></td>
                            i2++;
                        }
                        else
                        {
                            i2++;
                        }
                    }
                </tr>
                <tr>
                    <th></th>
                    @foreach (var item in Model)
                    {
                        if (i3 >= 7)
                        {
                            <th class="linestatu">@Html.DisplayFor(modelItem => item.Status)</th>
                            <th></th>
                            i3++;
                        }
                        else
                        {
                            i3++;
                        }
                    }
                </tr>
                <tr>
                    <td></td>
                    @foreach (var item in Model)
                    {
                        if (i4 >= 7)
                        {
                            <td class="linename">
                                @Html.DisplayFor(modelItem => item.Team)<br />
                                @Html.DisplayFor(modelItem => item.GroupLeader)
                            </td>
                            <td></td>
                            i4++;
                        }
                        else
                        {
                            i4++;
                        }
                    }
                </tr>
                <tr>
                    <td></td>
                    @foreach (var item in Model)
                    {
                        if (i5 >= 7)
                        {
                            <td class="lineedit" style="border-radius: 0px 0px 11px 11px;">
                                @Html.ActionLink("修改", "SMT_ProductionLineEdit", new { id = item.Id })
                            </td>
                            <td></td>
                            i5++;
                        }
                        else
                        {
                            i5++;
                        }
                    }
                </tr>
            </table>
        }
        <br />
        @*<table class="table">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.LineNum)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ProducingOrderNum)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.CreateDate)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Team)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.GroupLeader)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Status)
                </th>
                <th></th>
            </tr>

            @if (Model != null)
            {
                foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.LineNum)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ProducingOrderNum)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.CreateDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Team)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.GroupLeader)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Status)
                        </td>
                        <td>
                            @Html.ActionLink("修改", "SMT_ProductionLineEdit", new { id = item.Id }) |
                            @Html.ActionLink("详细", "Details", new { id = item.Id }) |
                                @Html.ActionLink("删除", "Delete", new { id = item.Id })
                        </td>
                    </tr>
                }
            }
        </table>*@
        <p class="text-center btn btn-default">
            @Html.ActionLink("添加产线", "SMT_ProductionLineCreate")
        </p>
        <p class="text-center btn btn-default">
            @Html.ActionLink("订单管理", "SMT_OrderMangage")
        </p>
        <p class="text-center btn btn-default">
            @Html.ActionLink("生产计划管理", "SMT_ProductionPlan")
        </p>
        <p class="text-center btn btn-default">
            @Html.ActionLink("SMT用户管理", "SMT_UserMangage")
        </p>
    </div>
    <script>
        var app = new Vue({
            el: "#app",
            data: {
            },
            created: function () {
            },
            methods: {
            }
        });
        $(function () {
            $(".linestatu").each(function (index, val) {
                if (index < 7) {
                    if (val.textContent == "生产中") {
                        $(val).addClass("success");
                        $($(val).parent().prev().prev().children().children()[index]).css("background-color", "#55d255");
                        $($(val).parent().prev().children(".lineorder")[index]).addClass("success");
                        $($(val).parent().next().children(".linename")[index]).addClass("success");
                        $($(val).parent().next().next().children(".lineedit")[index]).addClass("success");
                    } else if (val.textContent == "待料") {
                        $(val).addClass("info")
                        $($(val).parent().prev().prev().children().children()[index]).css("background-color", "#35e1e7");
                        $($(val).parent().prev().children(".lineorder")[index]).addClass("info");
                        $($(val).parent().next().children(".linename")[index]).addClass("info");
                        $($(val).parent().next().next().children(".lineedit")[index]).addClass("info");
                    } else if (val.textContent == "停产") {
                        $(val).addClass("danger")
                        $($(val).parent().prev().prev().children().children()[index]).css("background-color", "rgb(251, 96, 96)");
                        $($(val).parent().prev().children(".lineorder")[index]).addClass("danger");
                        $($(val).parent().next().children(".linename")[index]).addClass("danger");
                        $($(val).parent().next().next().children(".lineedit")[index]).addClass("danger");
                    };
                } else {
                    if (val.textContent == "生产中") {
                        $(val).addClass("success");
                        $($(val).parent().prev().prev().children().children()[index - 7]).css("background-color", "#55d255");
                        $($(val).parent().prev().children(".lineorder")[index - 7]).addClass("success");
                        $($(val).parent().next().children(".linename")[index - 7]).addClass("success");
                        $($(val).parent().next().next().children(".lineedit")[index - 7]).addClass("success");
                    } else if (val.textContent == "待料") {
                        $(val).addClass("info")
                        $($(val).parent().prev().prev().children().children()[index - 7]).css("background-color", "#35e1e7");
                        $($(val).parent().prev().children(".lineorder")[index - 7]).addClass("info");
                        $($(val).parent().next().children(".linename")[index - 7]).addClass("info");
                        $($(val).parent().next().next().children(".lineedit")[index - 7]).addClass("info");
                    } else if (val.textContent == "停产") {
                        $(val).addClass("danger")
                        $($(val).parent().prev().prev().children().children()[index - 7]).css("background-color", "rgb(251, 96, 96)");
                        $($(val).parent().prev().children(".lineorder")[index - 7]).addClass("danger");
                        $($(val).parent().next().children(".linename")[index - 7]).addClass("danger");
                        $($(val).parent().next().next().children(".lineedit")[index - 7]).addClass("danger");
                    };
                }
            })
        });
    </script>
</body>
</html>
