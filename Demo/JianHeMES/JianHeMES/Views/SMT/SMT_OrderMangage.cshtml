@model IEnumerable<JianHeMES.Models.SMT_OrderInfo>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "_pview";
}

<script src="~/Scripts/highcharts.js"></script>
<script src="~/Scripts/highcharts-3d.js"></script>
<script src="~/Scripts/modules/exporting.js"></script>

@*引入EasyUI框架*@
<script type="text/javascript" src="~/Scripts/jquery-1.11.3.js"></script>

<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>

<script type="text/javascript" src="~/Scripts/jquery.easyui.min.js"></script>
<link rel="stylesheet" type="text/css" href="~/Content/easyui.css">
<link rel="stylesheet" type="text/css" href="~/Content/icon.css">
<script src="~/Scripts/locale/easyui-lang-zh_CN.js"></script>
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />

@*引入Vue.js框架*@
<script src="~/Scripts/vue.js"></script>

@*引入Bootstrap框架*@
<link rel="stylesheet" href="~/Scripts/bootstrap.min.css" />
<script type="text/javascript" src="~/Scripts/bootstrap-paginator.js"></script>

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>SMT看板订单管理</title>
</head>
<body>

    <h4 class="text-center">SMT看板订单管理</h4>

    <style>
        #notdo {
            width: 200px;
            height: 100px;
            overflow: auto;
            padding: 0px 15px;
            margin: 0px 50px;
            border: none;
        }
    </style>
    <br />
    <div class="text-center">
        <p class="text-success text-center btn btn-default">
            @Html.ActionLink("新建订单", "SMT_OrderInfoCreate")
        </p>

    </div>
    <br />

    @using (Ajax.BeginForm("SMT_OrderMangage", "SMT", new AjaxOptions
    {
        UpdateTargetId = "List",
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "post",
        OnFailure = "fail",
        LoadingElementId = "loading"
    }))
    {
        <p>
            完成状态：@Html.DropDownList("FinishStatus", (List<SelectListItem>)ViewBag.FinishStatus, "全部")
            <input type="hidden" id="PageIndex" name="PageIndex" value="0" />
            <button type="submit">查找</button>
        </p>
        @*<div id="loading">加载中...</div>*@
    }

    <br />

    @*<table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.OrderNum)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Quantity)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PlatformType)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Customer)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DeliveryDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Status)
            </th>
            <th></th>
        </tr>
        <tbody id="List">
            @Html.Partial("SMT_OrderMangage_pview", Model)
        </tbody>
    </table>*@

    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.OrderNum)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Quantity)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PlatformType)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Customer)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DeliveryDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Status)
            </th>
            <th></th>
        </tr>
        <tbody id="List">
            @if (Model != null)
            {
                foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.OrderNum)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Quantity)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.PlatformType)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Customer)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.DeliveryDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Status)
                        </td>
                        <td>
                            @Html.ActionLink("修改", "SMT_OrderInfoEdit", new { id = item.Id }) @*|
                            @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                            @Html.ActionLink("Delete", "Delete", new { id = item.Id })*@
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>

    @*-----------------------分页功能----------------------------------------------------------------------------------------*@
    <div class="text-center">
        <div id="pagebar">
            @for (var i = 0; i < ViewBag.PageCount; i++)
            {
                if (i == ViewBag.PageIndex)
                {
                    <span class="currentpagenumber">@(i + 1)</span>
                }
                else
                {
                    <a class="pagenumber" href="javascript:;">@(i + 1)</a>
                }
            }
        </div>
    </div>
    @section scripts {
        <script>
            function submitForm(pagenumber) {
                pagenumber = parseInt(pagenumber, 10);
                $('#PageIndex').val(pagenumber - 1);
                $('#searchForm').submit();
            }

            $(function () {

                $('#searchButton').click(function () {
                    submitForm($('#pagebar .currentpagenumber').text());
                });

                $('#pagebar .pagenumber').click(function () {
                    submitForm($(this).text());
                });

            });
        </script>
    }

    <p>
        @Html.ActionLink("返回", "SMT_Mangage")
    </p>

</body>
</html>
