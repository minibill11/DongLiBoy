@model IEnumerable<JianHeMES.Models.OrderMgm>
@*@using static JianHeMES.Models.AllModels*@

@{
    ViewBag.Title = "订单管理";
}
<script type="text/javascript" src="~/Scripts/jquery-1.11.3.js"></script>
<h2>@ViewBag.Title</h2>

<p>
    @Html.ActionLink("创建新订单", "Create")
</p>
@using (Html.BeginForm("Index", "OrderMgms", FormMethod.Post, new { id = "searchForm" }))
{
    @Html.AntiForgeryToken()
    <p class="text-center" >
        订单号: @Html.DropDownList("OrderNum",
                ViewBag.OrderNumList as IEnumerable<SelectListItem>, "全部")
        平台型号查询:<input type="text" name="PlatformType" />
        订单号查询:<input type="text" name="SearchString" />

        <input type="hidden" id="PageIndex" name="PageIndex" value="0" />
        &nbsp; &nbsp; &nbsp;<input type="button" id="searchButton" value="检索" />
    </p>
}
<table class="table" >
    <tr>
        @*<th>
            @Html.DisplayNameFor(model => model.ID)
        </th>*@
        <th>
            @Html.DisplayNameFor(model => model.OrderNum)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CustomerName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ContractDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DeliveryDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.PlanInputTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.PlanCompleteTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.PlatformType)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Area)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Boxes)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Models)
        </th>
        @*<th>
            @Html.DisplayNameFor(model => model.ModelsMore)
        </th>*@
        <th>
            @Html.DisplayNameFor(model => model.Powers)
        </th>
        @*<th>
            @Html.DisplayNameFor(model => model.PowersMore)
        </th>*@
        <th>
            @Html.DisplayNameFor(model => model.AdapterCard)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IsRepertory)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Remark)
        </th>
        @*<th>
            @Html.DisplayNameFor(model => model.AdapterCardMore)
        </th>*@
        <th>
            @Html.DisplayNameFor(model => model.BarCodeCreated)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BarCodeCreateDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BarCodeCreator)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CompletedRate)
        </th>
        <th>操作</th>
    </tr>
    @if (Model != null)
    {
        foreach (var item in Model)
        {
            @Html.TextBoxFor(modelItem => item.BarCodeCreated, new { @id = item.ID + "-BarCodeCreated", @class = "form-control", @style = "display:none", @readonly = "readonly" })
    <tr>
        @*<td>
            @Html.DisplayFor(modelItem => item.ID)
        </td>*@
        <td>
            @Html.DisplayFor(modelItem => item.OrderNum)

        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CustomerName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ContractDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DeliveryDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PlanInputTime)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PlanCompleteTime)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PlatformType)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Area)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Boxes)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Models)
        </td>
        @*<td>
            @Html.DisplayFor(modelItem => item.ModelsMore)
        </td>*@
        <td>
            @Html.DisplayFor(modelItem => item.Powers)
        </td>
        @*<td>
            @Html.DisplayFor(modelItem => item.PowersMore)
        </td>*@
        <td>
            @Html.DisplayFor(modelItem => item.AdapterCard)
        </td>
        <th>
            @Html.DisplayFor(modelItem => item.IsRepertory)
        </th>
        <th>
            @Html.DisplayFor(modelItem => item.Remark)
        </th>
        @*<td>
            @Html.DisplayFor(modelItem => item.AdapterCardMore)
        </td>*@
        <td>
            <input id="@item.ID-Created" type="checkbox" />
            <script>
                if ($("#@item.ID-BarCodeCreated").val() == "1") {
                    $("#@item.ID-Created").attr("checked", true)
                }
            </script>
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.BarCodeCreateDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BarCodeCreator)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CompletedRate)
        </td>
        <td>
            @*@Html.ActionLink("修改", "Edit", new { id = item.ID }) |*@
            @Html.ActionLink("详细", "Details", new { id = item.ID }) @*|
        @Html.ActionLink("删除", "Delete", new { id = item.ID })|
        @Html.RouteLink("创建订单条码", "Default", new { Controller = "BarCodes", Action = "CreateBarCodes", id = item.ID })*@
        </td>
    </tr>
        }
    }
</table>


<div id="pagebar">
    @for (var i = 0; i < ViewBag.PageCount; i++)
    {
        if (i == ViewBag.PageIndex)
        {
            <span class="currentpagenumber">@(i + 1)</span>
        }
        else
        {
            <a class="pagenumber" href="javascript:;">@(i + 1)</a>
        }
    }
</div>
@section scripts {
    <script>
        function submitForm(pagenumber) {
            pagenumber = parseInt(pagenumber, 10);
            $('#PageIndex').val(pagenumber - 1);
            $('#searchForm').submit();
        }

        $(function () {

            $('#searchButton').click(function () {
                submitForm($('#pagebar .currentpagenumber').text());
            });

            $('#pagebar .pagenumber').click(function () {
                submitForm($(this).text());
            });

        });


        $(':checkbox').bind('click', function () {
            return false;
        });
    </script>
}