<!--- 甘特图看板 --->
<template>
  <div>
    <div class="mainContainer">
      <Button type="primary" @click="onAddTask()">添加计划</Button>
      <div class="container">
        <!-- <Gantt :tasks="tasks"></Gantt> -->
        <Gantt :task="task" bottom="10%" :isShow="true" style="height:700px;" />
      </div>
    </div>
    <!-- 弹出添加任务 -->
    <Modal v-model="modal" title="添加任务" @on-ok="onSaveTask">
      <Form :model="formItem" :label-width="100">
        <FormItem label="工段">
          <Input placeholder="请输入工段" v-model="formItem.name" />
        </FormItem>
        <FormItem label="计划开始时间">
          <DatePicker type="date" placeholder="请选择时间" v-model="formItem.planned_start"></DatePicker>
        </FormItem>
        <FormItem label="计划结束时间">
          <DatePicker type="date" placeholder="请选择时间" v-model="formItem.planned_end"></DatePicker>
        </FormItem>
      </Form>
    </Modal>
  </div>
</template>

<script>
// import Gantt from "./gantt/gantt";
import Gantt from "./gantt-demo/gantt-demo";
export default {
  name: "gantt_view",
  data() {
    return {
      // text: "任务进度看板",
      modal: false,
      formItem: {
        name: "",
        planned_start: "",
        planned_end: "",
        start_time: "",
        end_time: ""
      },
      task: [
        {
          name: "任务一",
          planned_start: new Date("2019/09/02"),
          planned_end: new Date("2019/09/12"),
          start_time: new Date("2019/09/03"),
          end_time: new Date("2019/09/11")
        },
        {
          name: "任务二",
          planned_start: new Date("2019/09/15"),
          planned_end: new Date("2019/09/20"),
          start_time: new Date("2019/09/15"),
          end_time: new Date("2019/09/20")
        },
        {
          name: "任务三",
          planned_start: new Date("2019/09/15"),
          planned_end: new Date("2019/09/25"),
          start_time: new Date("2019/09/15"),
          end_time: new Date("2019/09/27")
        },
        {
          name: "任务四",
          planned_start: new Date("2019/10/03"),
          planned_end: new Date("2019/10/05"),
          start_time: new Date("2019/10/03"),
          end_time: new Date("2019/10/11")
        },
        {
          name: "任务五",
          planned_start: new Date("2019/10/04"),
          planned_end: new Date("2019/10/07"),
          start_time: new Date("2019/10/04"),
          end_time: new Date("2019/10/16")
        },
        {
          name: "任务六",
          planned_start: new Date("2019/10/05"),
          planned_end: new Date("2019/10/09"),
          start_time: new Date("2019/10/05"),
          end_time: new Date("2019/10/18")
        },
        {
          name: "任务七",
          planned_start: new Date("2019/10/06"),
          planned_end: new Date("2019/10/12"),
          start_time: new Date("2019/10/06"),
          end_time: new Date("2019/10/17")
        }
      ]
      // tasks: {
      //   data: [
      //     {
      //       id: 1,
      //       start_date: "2018-04-01 00:00:00",
      //       duration: "5",
      //       text: "Project #1",
      //       progress: "0.8",
      //       parent: 0,
      //       deadline: "2018-04-09 00:00:00",
      //       planned_start: "2018-04-01 00:00:00",
      //       planned_end: "2018-04-07 00:00:00",
      //       open: true
      //     },
      //     {
      //       id: 2,
      //       start_date: "2018-04-06 00:00:00",
      //       duration: "4",
      //       text: "Task #1",
      //       progress: "0.5",
      //       parent: 1,
      //       deadline: "2018-04-11 00:00:00",
      //       planned_start: "2018-04-06 00:00:00",
      //       planned_end: "2018-04-10 00:00:00",
      //       open: true
      //     },
      //     {
      //       id: 3,
      //       start_date: "2018-04-03 00:00:00",
      //       duration: "6",
      //       text: "Task #2",
      //       progress: "0.7",
      //       parent: 1,
      //       deadline: "2018-04-10 00:00:00",
      //       planned_start: "2018-04-05 00:00:00",
      //       planned_end: "2018-04-14 00:00:00",
      //       open: true
      //     },
      //     {
      //       id: 4,
      //       start_date: "2018-04-07 00:00:00",
      //       duration: "2",
      //       text: "Task #3",
      //       progress: "0",
      //       parent: 1,
      //       deadline: "2018-04-17 00:00:00",
      //       planned_start: "2018-04-03 00:00:00",
      //       planned_end: "2018-04-05 00:00:00",
      //       open: true
      //     }
      //   ]
      // }
    };
  },
  components: { Gantt },
  created() {},
  methods: {
    onAddTask() {
      this.modal = true;
    },
    onSaveTask() {
      this.task.push(this.formItem);
      // console.log(this.task)
    }
    // selectchangevt() {},
    // selectclearvt() {}
  }
};
</script>
<style lang="less">
.mainContainer {
  margin: 0;
  padding: 0;
  width: 100%;
  height: ~"calc(100vh - 170px)";
  overflow: hidden;
}
.container {
  width: 100%;
  height: 100%;
}
</style>