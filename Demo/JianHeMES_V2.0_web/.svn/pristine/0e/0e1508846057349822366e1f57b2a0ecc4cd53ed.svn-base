<!--- 甘特图看板 --->
<template>
  <div>
    <div class="mainContainer">
      <div class="container">
        <Gantt :tasks="tasks"></Gantt>
      </div>
    </div>
  </div>
</template>

<script>
import { getList } from "@/api/test";
import Gantt from "./gantt/gantt";
export default {
  name: "gantt_board",
  data() {
    return {
      tasks: {
        data: [
          {
            id: 1,
            start_date: "2020-04-01 00:00:00",   //实际开始时间
            duration: "5",                       //周期
            text: "Project #1",                  //工段名
            progress: "0.8",                     //进度百分比
            parent: 0,                           //链接树父节点
            deadline: "2020-04-09 00:00:00",     //实际结束时间
            planned_start: "2020-04-01 00:00:00",//计划开始时间
            planned_end: "2020-04-07 00:00:00",  //计划结束时间
            open: true                           //树形文件是否展开
          },
          {
            id: 2,
            start_date: "2020-04-06 00:00:00",
            duration: "4",
            text: "Task #1",
            progress: "0.5",
            parent: 1,
            deadline: "2020-04-11 00:00:00",
            planned_start: "2020-04-06 00:00:00",
            planned_end: "2020-04-10 00:00:00",
            open: true
          },
          {
            id: 3,
            start_date: "2020-04-03 00:00:00",
            duration: "6",
            text: "Task #2",
            progress: "0.7",
            parent: 1,
            deadline: "2020-04-10 00:00:00",
            planned_start: "2020-04-05 00:00:00",
            planned_end: "2020-04-14 00:00:00",
            open: true
          },
          {
            id: 4,
            start_date: "2020-04-07 00:00:00",
            duration: "2",
            text: "Task #3",
            progress: "0",
            parent: 1,
            deadline: "2020-04-17 00:00:00",
            planned_start: "2020-04-03 00:00:00",
            planned_end: "2020-04-05 00:00:00",
            open: true
          }
        ]
      }
    };
  },
  components: { Gantt },
  created() {
    getList()
      .then(res => {
        console.log(res);
        if (res.status == 200) {
          this.tasks.data = res.data;
             console.log('tasks',this.tasks);
        }
      })
      .catch(error => {
        // 处理 getJSON 和 前一个回调函数运行时发生的错误
        console.log("发生错误！", error);
      });
  },
  methods: {
    onAddTask() {
      this.modal = true;
    },
    onSaveTask() {
      this.task.push(this.formItem);
      // console.log(this.task)
    }
    // selectchangevt() {},
    // selectclearvt() {}
  }
};
</script>
<style lang="less">
.mainContainer {
  margin: 0;
  padding: 0;
  width: 100%;
  height: ~"calc(100vh - 170px)";
  overflow: hidden;
}
.container {
  width: 100%;
  height: 100%;
}
</style>