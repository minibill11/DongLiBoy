<!---  --->
<template>
  <div class="select_name">
      <el-select size="small" v-model="select_department" placeholder="请选择部门" style="width:150px;"> 
          <el-option v-for="item in department_options"
                     :key="item.value"
                     :label="item.label"
                     :value="item.value">
          </el-option>
     </el-select>
     <el-select size="small" v-model="select_position" placeholder="请选择位置" style="width:150px;">
          <el-option v-for="item in position_options"
                     :key="item.value"
                     :label="item.label"
                     :value="item.value">
          </el-option>
     </el-select>
     <el-select size="small" v-model="select_district" placeholder="请选择区域号" style="width:150px;">
         <el-option v-for="item in district_options"
                    :key="item.value"
                    :label="item.label"
                    :value="item.value">
         </el-option>
     </el-select>
  </div>
</template>

<script>
import {regionGetDep,regionGetDis,regionGetPosi} from "@/api/hr/kpi-7s";
export default {
  name: '',
  props: ["source"],
  data() {
    return {
        select_department:'',
        department_options:[],
        select_position:'',
        position_options:[],
        select_district:'',
        district_options:[],
    };
  },
  components: {},
  computed: {},
  watch: {
      select_department(val){
          if(val!=''){
              this.onGetPosition();
          }
      },
      select_position(val){
          if(val!=''){
              this.onGetDistrictData();
          }
      },
  },
  methods: {
      //获取初始化下拉数据
      onGetDepartmentData() {
          regionGetDep().then(res => {
              if(this.source=="区域数据"){//去掉第一个选项“全部位置”
                  res.data.Data.shift();
              }             
              this.department_options = res.data.Data;
          })
      },
      onGetDistrictData() {
          let obj ={ department: this.select_department, position: this.select_position }
          regionGetDis(obj).then(res => {
              this.district_options = res.data.Data;
          })
      },
      onGetPosition() {
          let obj={ department: this.select_department }
          regionGetPosi(obj).then(res => {
              this.position_options = res.data.Data;
          })
      },

  },
  created() {},
  mounted() {
        this.onGetDepartmentData()
  },
  beforeCreate() {},
  beforeMount() {},
  beforeUpdate() {},
  updated() {},
  beforeDestroy() {},
  destroyed() {},
  activated() {},
}
</script>

<style lang='less' scoped>
@import url('~@/assets/style/color.less');
.select_name .el-select{
    margin: 5px;
}

</style>