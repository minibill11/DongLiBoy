@model JianHeMES.Models.Warehouse_Material_BaseInfo

@{
    ViewBag.Title = "修改库位号清单";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Scripts/Bootstraps/Element-ui.css" rel="stylesheet" />
<script src="~/Scripts/axios.min.js"></script>
<script src="~/Scripts/Bootstraps/Element-ui.js"></script>
<script src="~/Content/styleFile/solder/solderJavascript.js"></script>
<style>
    h2 {
        text-align: center;
        font-size: 1.8rem;
    }
    
     @@media screen and (min-width:800px){
        .tableContainer{
                width:28%;
                margin:15px auto;
           }
     }
     @@media screen and (max-width:410px){
       .tableContainer{
                width:100%;
                
           }
    }
     .el-popover{
         min-width:75px !important;
     }
</style>
<h2>修改库位号清单</h2>

<div id="app">
    <el-button @@click="goback" size="mini" type="primary">返回</el-button>
    <div class="tableContainer">
        <el-table v-bind:data="tableData"
                  max-height="550"
                  style="width: 100%">
            <el-table-column prop="MaterialBacrcode"
                             label="条码号"
                             width="100">
            </el-table-column>
            <el-table-column prop="MaterialNumber"
                             label="物料号"
                             width="100">
            </el-table-column>
            <el-table-column prop="OldWarehouseNum"
                             label="老库位"
                             width="75">
            </el-table-column>
            <el-table-column prop="NewWarehouseNum"
                             label="新库位"
                             width="75">
                <template slot-scope="scope">
                    <el-popover trigger="click" placement="top">
                        <el-button @@click="remove(scope.row,scope.$index)" type="danger" size="mini">移除</el-button>
                        <div slot="reference" class="name-wrapper">
                            <el-tag size="medium">{{ scope.row.NewWarehouseNum }}</el-tag>
                        </div>
                    </el-popover>
                </template>
            </el-table-column>
        </el-table>
    </div>
</div>
@*<div>
    @Html.ActionLink("Back to List", "Index")
</div>*@

<script>
    const app = new Vue({
        el: "#app",
        data: {
            tableData: []
        },
        methods: {
            // 获取列表
            getInfos() {
                axios.post("/Warehouse_Material/LocationQuery").then(res=> {
                    console.log(res.data)
                    this.tableData = res.data;
                })
            },
            // 移除
            remove(item, index) {
                axios.post("/Warehouse_Material/DeleteLocation", { id: item.ID }).then(res=> {
                    console.log(res.data)
                    if (res.data.table == true) {
                        this.tableData.splice(index, 1);
                        this.$notify({
                            message: "移除成功!",
                            type: "success"
                        });
                    } else {
                        this.$notify({
                            message: res.data.ware,
                            type: "warning"
                        });
                    }
                })
            },
            // 返回
            goback() {
                window.history.back();
            }
        },
        mounted() {
            this.getInfos();
        }
    })
</script>
