
@{
    ViewBag.Title = "DivertIndex";
}
<script src="~/Scripts/Bootstraps/Element-ui.js"></script>
<script src="~/Scripts/Bootstraps/bootstrap-select.min.js"></script>
<script src="~/Scripts/axios.min.js"></script>
<link href="~/Scripts/Bootstraps/Element-ui.css" rel="stylesheet" />
<link href="~/Scripts/Bootstraps/bootstrap-select.min.css" rel="stylesheet" />
<style>
    .selectpicker, .bootstrap-select > .btn {
        border: 1px solid #ccc;
    }

    .form-control {
        max-width: 220px;
    }
</style>


<div id="app">
    <el-container>
        <el-header style="height:auto">
            <el-row class="text-center">
                <h2>挪用条码查询</h2>
                <span>
                    订单号：@Html.DropDownList("orderNum", (List<SelectListItem>)ViewBag.OrderNumList, "全部", new { @class = "selectpicker", data_live_search = "true", data_style = "form-control" })
                    条码号：<input id="barcode" class="form-control" style="display:inline-block" />
                    <el-button type="primary" v-on:click="getData" size="small">查询</el-button>
                </span>
            </el-row>
        </el-header>
        <el-main v-loading="loading">
            <template>
                <el-table :data="tableData"
                          max-height="600"
                          border
                          style="width:100%;text-align:center;">
                    <el-table-column prop="NewOrderNum"
                                     label="订单号"
                                     width="180">
                    </el-table-column>
                    <el-table-column prop="NewBarCodesNum"
                                     label="条码号"
                                     width="180">
                    </el-table-column>
                    <el-table-column prop="OldOrderNum"
                                     label="挪用订单"
                                     width="180">
                    </el-table-column>
                    <el-table-column prop="OldBarCodeNum"
                                     label="挪用条码"
                                     width="180">
                    </el-table-column>
                    <el-table-column prop="Procedure"
                                     label="挪用工段"
                                     width="180">
                    </el-table-column>
                    <el-table-column prop="Name"
                                     label="操作者"
                                     width="180">
                    </el-table-column>
                </el-table>
            </template>
        </el-main>
    </el-container>
</div>
<script>
    var app = new Vue({
        el: "#app",
        data: {
            tableData: [],
            loading: false,
        },
        methods: {
            getData: () => {
                app.loading = true;
                axios.post("/BarCodes/BarcodeRelation", {
                    orderNum: $("#orderNum").val(),
                    barcode: $("#barcode").val(),
                }).then(response => {
                    //console.log(response.data)
                    app.tableData = response.data;
                    app.loading = false;
                }).catch(error => {
                    console.warn("读取数据失败" + error)
                    app.loading = false;
                });
            },
        }
    });
</script>

