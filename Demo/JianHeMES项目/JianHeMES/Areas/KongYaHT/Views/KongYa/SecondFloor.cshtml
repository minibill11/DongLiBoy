@{
    ViewBag.Title = "二楼温湿度";
}

<script src="~/Areas/KongYaHT/Script/highcharts.js"></script>
<script src="~/Areas/KongYaHT/Script/highcharts-more.js"></script>
<h2 class="text-center" style="color:#006FBD;font-weight: bold;">@ViewBag.Title</h2>

<style type="text/css">
    .modal-dialog {
        left: 0;
    }

    #floor2 {
        position: relative;
        width: 1172px;
        height: 18px;
        bottom: 200px;
    }

    #WS1 {
        position: relative;
        margin-left: 360px;
        bottom: -350px;
    }

    #WS2 {
        display: none;
        position: relative;
        margin-left: 400px;
        bottom: -250px;
    }

    #WS1, #WS2 {
        border: 1px dashed #d53737;
        padding: 2px;
        width: 123px;
        height: 59px;
    }

    #GJB1,
    #GJB2 {
        color: red;
    }

    #floor2 a:hover, #floor2 a:active, #floor2 a:visited {
        text-decoration: none;
        color: rgb(51, 51, 51);
    }

    #floor2 a {
        display: block;
        width: 110px;
        color: rgb(51, 51, 51);
    }
</style>

@*
    这里的HTML代码，例如WS1，是采用绝对定位的方式固定框框在页面一个固定的位置，位置和背景svg图相关，
    迁移建议：每一个方框做成组件，因为显示形式是相同的，此页面需要重做，数据渲染不要继续采用jquery获取dom的方式，而是组件渲染方式
*@
<body style="background-color: #9D9D9D;">
    <div class="container body-content">
        <div>@Html.RouteLink("温湿度数据汇总", "KongYaHT", new { Controller = "KongYa", Action = "FloorDataShow" })</div>
        <div id="floor2">
            <div id="WS1">
                <div style="font-size: 13px;font-weight:bolder;">
                    <a href="~/KongYaHT/KongYa/HTCharts?point=二楼老化" title="点击查看温湿度详情" target="_blank">
                        <font>温度：</font><font style="background-color:yellow"><span id="1F_temprature2">#</span> °C</font><br />
                        <font>湿度：</font><font style="background-color:yellow"><span id="1F_humidity2">#</span> %RH</font><br />
                        <font>状态：</font><span style="color:white;font-weight:normal" id="1F_state2">#</span>
                    </a>
                </div>
            </div>
            <div id="WS2">
                <div style="font-size: 13px;font-weight:bolder;">
                    <a href="~/KongYaHT/KongYa/HTCharts?point=一楼配套加工(4)" title="点击查看温湿度详情" target="_blank">
                        <font>温度：</font><font style="background-color:yellow"><span id="1F_temprature4">#</span> °C</font><br />
                        <font>湿度：</font><font style="background-color:yellow"><span id="1F_humidity4">#</span> %RH</font><br />
                        <font>状态：</font><span style="color:white;font-weight:normal" id="1F_state4">#</span>
                    </a>
                </div>
            </div>
        </div>

        <embed src="~/Areas/KongYaHT/image/2s2.svg">

        <div style="font-size:15px">
            根据中华人民共和国国家军用标准GJB 3007A-2009规定，防静电工作区环境条件要求：<br> 1.室温一般维持在
            <span id="GJB1">16℃～28℃</span>范围内，温度变化率小于5℃/h；<br> 2.室内相对湿度保持在
            <span id="GJB2">45%～70%</span>范围内，并不得结露。
        </div>
    </div>

    @section scripts {
        <script src="~/Scripts/jquery.signalR-2.3.0.min.js"></script>
        <script src="~/signalr/hubs"></script>
        <script>
            $(function () {
                var mypush = $.connection.Hub1;
                mypush.client.sendTH1 = function (TH1_json) {


                    //以下为数据显示方法，目前是用id定位节点赋值，改为vue方式用data显示数据即可，
                    //css控制可以写在html上，用vue的方式判断显示颜色和描述，
                    //判断逻辑为：
                    //温度：16℃～28℃ 是正常、绿色，非范围内报警
                    //湿度：45%～70% 是正常、绿色，非范围内报警

                    var TH_40004518_1 = JSON.parse(TH1_json.TH_40004518_1);
                    //var TH_40004518_4 = JSON.parse(TH1_json.TH_40004518_4);


                    //点1
                    $("#1F_temprature2").html(TH_40004518_1.Tem);
                    $("#1F_humidity2").html(TH_40004518_1.Hum);
                    if (TH_40004518_1.Tem > 16 && TH_40004518_1.Tem < 28) {
                        if (TH_40004518_1.Hum > 45 && TH_40004518_1.Hum < 70) {
                            $("#1F_state2").html("正常").css("background", "green");
                        } else { $("#1F_state2").html("湿度警报").css("background", "red"); }
                    } else {
                        if (TH_40004518_1.Hum > 45 && TH_40004518_1.Hum < 70) {
                            $("#1F_state2").html("温度警报").css("background", "red");
                        } else { $("#1F_state2").html("温湿度警报").css("background", "red"); }
                    }
                    //点4
                    //$("#1F_temprature4").html(TH_40004518_4.Tem);
                    //$("#1F_humidity4").html(TH_40004518_4.Hum);
                    //if (TH_40004518_4.Tem > 16 && TH_40004518_4.Tem < 28) {
                    //    if (TH_40004518_4.Hum > 45 && TH_40004518_4.Hum < 70) {
                    //        $("#1F_state4").html("正常").css("background", "green");
                    //    } else { $("#1F_state4").html("湿度警报").css("background", "red"); }
                    //} else {
                    //    if (TH_40004518_4.Hum > 45 && TH_40004518_4.Hum < 70) {
                    //        $("#1F_state4").html("温度警报").css("background", "red");
                    //    } else { $("#1F_state4").html("温湿度警报").css("background", "red"); }
                    //}
                };
                $.connection.hub.start();
            });
        </script>
    }
</body>