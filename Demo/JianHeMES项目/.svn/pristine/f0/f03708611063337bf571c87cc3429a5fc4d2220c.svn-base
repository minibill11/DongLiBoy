<script type="text/template" id="Eq_Header">
    <div class="eq-header">
        <div class="eq-title">设备管理</div>
        <div class="eq-header-btn">
            <el-button v-for="(item,index) in header_btn" :key="index" size="small" :type="active==item?'primary':'normal'" :plain="active==item?false:true" @@click="onToTurn(item)" style="border-bottom: none;font-size:14px;">{{item}}</el-button>
        </div>
        <hr class="style-one" />
    </div>
</script>
<script>
    Vue.component('eq-header-component', {
        props: ["active"],
        template: document.getElementById("Eq_Header"),
        data: function () {
            return {
                active: '',
                header_btn: [],
            }
        },
        mounted() {
                var roles = JSON.parse(localStorage.getItem("rigths"))
                if (this.checkRoles(roles, '设备查询')) {
                    this.header_btn.push('运行状态')
                }
                if (this.checkRoles(roles, '查看设备台账')) {
                    this.header_btn.push('设备台账')
                } if (this.checkRoles(roles, '查看产线设备')) {
                    this.header_btn.push('产线设备')
                } if (this.checkRoles(roles, '查询点检保养表')) {
                    this.header_btn.push('点检查询')
                } if (this.checkRoles(roles, '查询设备报修单')) {
                    this.header_btn.push('报修单查询')
                } if (this.checkRoles(roles, '查看安全库存')) {
                    this.header_btn.push('安全库存清单')
                } if (this.checkRoles(roles, '查看指标达成率')) {
                    this.header_btn.push('指标达成率')
                } if (this.checkRoles(roles, '扫码点检')) {
                    this.header_btn.push('扫码点检')
                } if (this.checkRoles(roles, '查看供气系统')) {
                    this.header_btn.push('供气系统')
                }
                //console.log(this.header_btn);
            //this.$forceUpdate();
        },
        methods: {
            //检测权限方法
            checkRoles(list, roleName) {
                var flag = false
                if (list && roleName) {
                    for (let item in list) {
                        if (list[item] == roleName) {
                            flag = true
                        }
                    }
                }
                return flag
            },
            onToTurn(val) {
                if (val == '运行状态') {
                    window.location.href = "/Equipment/Equipment_NewIndex"
                }
                if (val == '设备台账') {
                    window.location.href = "/Equipment/Equipment_Parameter"
                }
                if (val == '产线设备') {
                    window.location.href = "/Equipment/Equipment_Production_line"
                }
                if (val == '点检查询') {
                    window.location.href = "/Equipment/Equipment_Tally_Query"
                }
                if (val == '报修单查询') {
                    window.location.href = "/Equipment/Equipment_Fixbill_Query"
                }
                if (val == '安全库存清单') {
                    window.location.href = "/Equipment/Equipment_Safety_Bill"
                }
                if (val == '指标达成率') {
                    window.location.href = "/Equipment/Equipment_Quality_Goal"
                }
                if (val == '扫码点检') {
                    window.location.href = "/Equipment/Equipment_ScanCode_Check"
                }
                if (val == '供气系统') {
                    window.location.href = "/Equipment/Equipment_Gas_Supply"
                }
            }
        }
    });
</script>
