<!DOCTYPE html>
<html lang="zh-CN">
<head>
    @*<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />*@
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewBag.Title - 健和光电MES</title>
    @Scripts.Render("~/Scripts/jquery")
    @Scripts.Render("~/Scripts/jqueryval")
    @*@Scripts.Render("~/Scripts_home")*@
    @*@Scripts.Render("~/Scripts/echarts")*@
    @*@Scripts.Render("~/Scripts/easyui")*@
    @*@Scripts.Render("~/Scripts/modernizr")*@
    @Scripts.Render("~/Scripts/bootstrap")
    @Scripts.Render("~/Scripts/vue")
    @*@Scripts.Render("~/Scripts/highcharts")*@
    @Styles.Render("~/Content/easyuicss")
    @Styles.Render("~/Content/css")
    <script src="~/Scripts/axios.min.js"></script>
    <link href="~/Scripts/animate.css" rel="stylesheet" />
    <script src="~/Scripts/main/print.ip.js"></script>
    <style>
        .navbar-toggle {
            float: left;
            margin-left: 20px;
            margin-right: 0;
        }

        .navbar-fixed-top .navbar-collapse {
            max-height: 100%;
        }

        .navbar-nav {
            margin: 0px;
        }

        @@media(max-width:768px) {
            .navbar-nav > li > a {
                padding-top: 6px;
                padding-bottom: 6px;
            }

            .dropdown-menu .divider {
                margin: 2px 0;
            }

            .navbar-nav .open .dropdown-menu > li > a {
                padding: 1px;
            }

            .navbar-nav .open .dropdown-menu li {
                text-align: left;
                padding: 0 25px;
            }

            .nav > li > a, .navbar-brand {
                padding: 3px 15px;
            }

            .dropdown-menu {
                padding: 0;
            }
        }

        @@media (min-width:768px) and (max-width: 992px) {
            .navbar .dropdownToolbarButton a {
                font-size: 13px;
                padding: 15px 10px;
            }
        }

        @@media (min-width:768px) and (max-width: 1200px) {
            .body-content {
                margin-top: 50px;
            }
        }

        @@media (min-width: 768px) {
            .titleul {
                width: 718px;
            }

            .nav > li > a, .navbar-brand {
                padding: 10px;
                height: 50px;
                line-height: 30px;
            }
        }

        @@media (min-width: 992px) {
            .titleul {
                width: 930px;
            }

            .loginlabel {
                text-align: right;
            }
        }

        @@media (min-width: 1200px) {
            .titleul {
                width: 1130px;
            }

            .navbar-collapse {
                width: 1300px;
            }

            .container {
                width: 1300px;
            }
        }

        .titleul a {
            padding-left: 6px !important;
        }

        [v-cloak] {
            display: none !important;
        }

        .version:hover {
            text-decoration: none;
        }
    </style>
</head>

@*@using StackExchange.Profiling;*@

<body>
    @*获取UserRoles*@
    @{var UserRoles = Session["User"] == null ? string.Empty : ((JianHeMES.Models.Users)Session["User"]).Role; }


    <div class="navbar navbar-inverse navbar-fixed-top">
        <div id="headerApp" class="container" v-cloak>
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                @Html.ActionLink("健和光电MES", "Index", "Home", new { area = "" }, new { @class = "navbar-brand hidden-sm hidden-md", style = "padding:10px;height:50px;line-height:30px" })
            </div>
            <div class="navbar-collapse collapse">
                <div class="dropdownToolbarButton">
                    <ul class="nav navbar-nav titleul">
                        @if (Session["User"] != null && (UserRoles == "系统管理员" || ((JianHeMES.Models.Users)Session["User"]).Department == "销售部") && ((JianHeMES.Models.Users)Session["User"]).UserName != "姜春艳" && ((JianHeMES.Models.Users)Session["User"]).UserName != "刘秋如")
                        {
                            @*销售部*@
                            <li class="dropdown">
                                @Html.RouteLink("销售部", "Default", new { controller = "Query", Action = "businessDepartment" })
                            </li>
                        }
                        else
                        {
                            if (Session["User"] != null)
                            {
                                @*销售部*@
                                <li class="dropdown xiaoshou">
                                    @Html.RouteLink("销售部", "Default", new { controller = "Query", Action = "businessDepartment" })
                                </li>
                            }
                        }

                        @if (Session["User"] != null && (UserRoles == "系统管理员" || ((JianHeMES.Models.Users)Session["User"]).Department == "合约部" || ((JianHeMES.Models.Users)Session["User"]).Department == "财务部" || ((JianHeMES.Models.Users)Session["User"]).Department == "采购部" || ((JianHeMES.Models.Users)Session["User"]).Department == "客户服务部"))
                        {
                            @*合约部*@
                            <li class="dropdown">
                                @Html.RouteLink("合约部", "Default", new { controller = "Query", Action = "contractDepartment" })
                            </li>
                        }
                        else
                        {
                            if (Session["User"] != null)
                            {
                                @*合约部*@
                                <li class="dropdown heyue">
                                    @Html.RouteLink("合约部", "Default", new { controller = "Query", Action = "contractDepartment" })
                                </li>
                            }
                        }
                        @if (Session["User"] != null && (((JianHeMES.Models.Users)Session["User"]).Department != "合约部" && ((JianHeMES.Models.Users)Session["User"]).Department != "销售部" && ((JianHeMES.Models.Users)Session["User"]).Department != "财务部" && ((JianHeMES.Models.Users)Session["User"]).Department != "采购部" && ((JianHeMES.Models.Users)Session["User"]).Department != "客户服务部") && (((JianHeMES.Models.Users)Session["User"]).Department != "研发部") && ((JianHeMES.Models.Users)Session["User"]).UserName != "姜春艳" && ((JianHeMES.Models.Users)Session["User"]).UserName != "刘秋如")
                        {
                            @*全厂温湿度*@
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    全厂温湿度
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu collapse" style="text-align: left; min-width: 114px;">
                                    <li>@Html.RouteLink("一楼", "KongYaHT", new { Controller = "KongYa", Action = "FirstFloor" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("二楼", "KongYaHT", new { Controller = "KongYa", Action = "SecondFloor" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("三楼", "KongYaHT", new { Controller = "KongYa", Action = "ThirdFloor" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("四楼", "KongYaHT", new { Controller = "KongYa", Action = "FourthFloor" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("五楼", "KongYaHT", new { Controller = "KongYa", Action = "FifthFloor" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("六楼", "KongYaHT", new { Controller = "KongYa", Action = "Sixthfloor" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("汇总表", "KongYaHT", new { Controller = "KongYa", Action = "FloorDataShow" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("导出数据", "KongYaHT", new { Controller = "KongYa", Action = "OutputTHDataToExcel" })</li>
                                </ul>
                            </li>
                        }

                        @if (Session["User"] != null && (((JianHeMES.Models.Users)Session["User"]).Department != "合约部" && ((JianHeMES.Models.Users)Session["User"]).Department != "销售部" && ((JianHeMES.Models.Users)Session["User"]).Department != "财务部" && ((JianHeMES.Models.Users)Session["User"]).Department != "采购部" && ((JianHeMES.Models.Users)Session["User"]).Department != "客户服务部") && (((JianHeMES.Models.Users)Session["User"]).Department != "研发部") && ((JianHeMES.Models.Users)Session["User"]).UserName != "姜春艳" && ((JianHeMES.Models.Users)Session["User"]).UserName != "刘秋如")
                        {
                            @*空压机房*@
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    空压机房
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu collapse" style="text-align: left; min-width: 114px;">
                                    <li>@Html.RouteLink("空压机房", "KongYaHT", new { Controller = "KongYa", Action = "KongYaIndex" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("汇总表", "KongYaHT", new { Controller = "KongYa", Action = "KYDataShow" })</li>
                                </ul>
                            </li>
                        }
                        @*生产管控*@
                        @if (Session["User"] != null && (((JianHeMES.Models.Users)Session["User"]).Department != "合约部" && ((JianHeMES.Models.Users)Session["User"]).Department != "销售部" && ((JianHeMES.Models.Users)Session["User"]).Department != "财务部" && ((JianHeMES.Models.Users)Session["User"]).Department != "采购部" && ((JianHeMES.Models.Users)Session["User"]).Department != "客户服务部") && (((JianHeMES.Models.Users)Session["User"]).Department != "研发部") && ((JianHeMES.Models.Users)Session["User"]).UserName != "姜春艳" && ((JianHeMES.Models.Users)Session["User"]).UserName != "刘秋如")
                        {
                            <li class="productC">@Html.RouteLink("生产管控", "Default", new { controller = "ProductionControl", Action = "Index" })</li>
                        }
                        @*PMC部*@
                        @if (Session["User"] != null && (((JianHeMES.Models.Users)Session["User"]).Department != "合约部" && ((JianHeMES.Models.Users)Session["User"]).Department != "销售部" && ((JianHeMES.Models.Users)Session["User"]).Department != "财务部" && ((JianHeMES.Models.Users)Session["User"]).Department != "采购部" && ((JianHeMES.Models.Users)Session["User"]).Department != "客户服务部") && (((JianHeMES.Models.Users)Session["User"]).Department != "研发部") && ((JianHeMES.Models.Users)Session["User"]).UserName != "姜春艳" && ((JianHeMES.Models.Users)Session["User"]).UserName != "刘秋如")
                        {
                            <li class="dropdown" @*style="display:none;"*@>
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    PMC部
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu collapse" style="text-align: left; min-width: 114px;">
                                    <li>@Html.RouteLink("订单管理", "Default", new { controller = "OrderMgms", Action = "Index" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("订单模组概况", "Default", new { controller = "Query", Action = "ordernumModuleInfo" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("仓库物料管理", "Default", new { controller = "Warehouse_Material", Action = "QueryData" }, new { @class = "checkstatuss" })</li>
                                    <li class="divider"></li>
                                    <li class="rukexinxicaozuo">@Html.RouteLink("成品入库", "Default", new { controller = "Packagings", Action = "inStockConfirm" }, new { @class = "checkstatus" })</li>
                                    <li class="divider rukexinxicaozuo"></li>
                                    <li class="chukuxinxicaozuo">@Html.RouteLink("成品出库", "Default", new { controller = "Packagings", Action = "outStockConfirm" }, new { @class = "checkstatus" })</li>
                                    <li class="divider chukuxinxicaozuo"></li>
                                    <li class="xigaokanban">@Html.RouteLink("锡膏看板", "Default", new { controller = "SMT_Sulderpaster", Action = "mcBoard" }, new { @class = "checkstatus" })</li>
                                    <li class="divider xigaokanban"></li>
                                    <li class="mcxigaocaozuo">@Html.RouteLink("锡膏入库", "Default", new { controller = "SMT_Sulderpaster", Action = "AddWarehouseBaseInfo" }, new { @class = "checkstatus" })</li>
                                    <li class="divider mcxigaocaozuo"></li>
                                    <li>@Html.RouteLink("直通率看板", "Default", new { Controller = "KPI", Action = "GetPassThrough" })</li>
                                    <li class="divider"></li>
                                    <li class="chanzhikanbanchakan">@Html.RouteLink("产值看板", "Default", new { controller = "Packagings", Action = "board" }, new { @class = "checkstatus" })</li>
                                    <li class="divider chanzhikanbanchakan"></li>
                                    <li class="lrjhxxshow">@Html.RouteLink("计划信息", "Default", new { Controller = "Plans", Action = "KPI_Plan" })</li>
                                    <li class="divider lrjhxxshow"></li>
                                    <li>@Html.RouteLink("条码管理", "Default", new { controller = "BarCodes", Action = "Index" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("模组编号录入", "Default", new { controller = "BarCodes", Action = "SetJsonFile" })</li>
                                    <li class="divider PCdepar"></li>
                                    <li>@Html.RouteLink("SMT生产计划", "Default", new { Controller = "SMT", Action = "New_SMT_ProductionPlan" }, new { @class = "PCdepar" })</li>
                                    <li class="divider"></li>
                                    <li class="">@Html.RouteLink("工段工序录入", "Default", new { controller = "Plans", Action = "Section_Enter" })</li>
                                    <li class="divider StockAmountCalculate"></li>
                                    <li class="StockAmountCalculate">@Html.RouteLink("库存金额表", "Default", new { controller = "Warehouse_Material", Action = "StockAmount_Index" })</li>
                                    <li class="divider kuweihaoxiugai"></li>
                                    <li class="kuweihaoxiugai">@Html.RouteLink("删除入库信息", "Default", new { controller = "Packagings", Action = "DeleteConfirmAll" }, new { @class = "checkstatus" })</li>
                                </ul>
                            </li>

                        }

                        @*装配部*@
                        @if (Session["User"] != null && (((JianHeMES.Models.Users)Session["User"]).Department != "合约部" && ((JianHeMES.Models.Users)Session["User"]).Department != "销售部" && ((JianHeMES.Models.Users)Session["User"]).Department != "财务部" && ((JianHeMES.Models.Users)Session["User"]).Department != "采购部" && ((JianHeMES.Models.Users)Session["User"]).Department != "客户服务部") && (((JianHeMES.Models.Users)Session["User"]).Department != "研发部") && ((JianHeMES.Models.Users)Session["User"]).UserName != "姜春艳" && ((JianHeMES.Models.Users)Session["User"]).UserName != "刘秋如")
                        {
                            <li class="dropdown zhuangpei12">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    总装一/二部
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu collapse" style="text-align: left; min-width: 114px;">
                                    <li>@Html.RouteLink("模块看板", "Default", new { controller = "ModuleManagement", Action = "Index" }, new { @class = "checkstatus" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("模块实时看板", "Default", new { controller = "ModuleManagement", Action = "Board" }, new { @class = "checkstatus" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("后焊产线", "Default", new { controller = "ModuleManagement", Action = "normalCheck" }, new { @class = "checkstatus" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("组装产线", "Default", new { controller = "Assembles", Action = "New_Index" }, new { @class = "checkstatus" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("拼屏查询", "Default", new { controller = "Burn_in_MosaicScreen", Action = "mosaicScreen_ShelfQuery" }, new { @class = "checkstatus" })</li>
                                    <li class="divider"></li>
                                    <li class="kaishipinping">@Html.RouteLink("开始拼屏", "Default", new { controller = "Burn_in_MosaicScreen", Action = "mosaicScreen_B" }, new { @class = "checkstatus" })</li>
                                    <li class="divider kaishipinping"></li>
                                    <li>@Html.RouteLink("校正信息", "Default", new { controller = "CalibrationRecords", Action = "New_Index" }, new { @class = "checkstatus" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("模组条码打印", "Default", new { controller = "Appearances", Action = "DisplayTotalModule" }, new { @class = "checkstatus" })</li>
                                    <li class="divider"></li>
                                    <li class="Packagingsinput">@Html.RouteLink("包装基本信息", "Default", new { controller = "Packagings", Action = "inputPackaging" }, new { @class = "checkstatus" })</li>
                                    <li class="divider Packagingsinput"></li>
                                    <li class="Packagingsinput">@Html.RouteLink("模组编号录入", "Default", new { controller = "BarCodes", Action = "SetJsonFile" }, new { @class = "checkstatus" })</li>
                                    <li class="divider Packagingsinput"></li>
                                    <li class="neixiangqueren">@Html.RouteLink("内箱确认", "Default", new { controller = "Packagings", Action = "insideConfirm" }, new { @class = "checkstatus" })</li>
                                    <li class="divider neixiangqueren"></li>
                                    <li>@Html.RouteLink("球场屏", "Default", new { controller = "CourtScreenModuleInfoes", Action = "Index" }, new { @class = "checkstatus" })</li>
                                </ul>
                            </li>
                        }


                        @*品质部*@
                        @if (Session["User"] != null && (((JianHeMES.Models.Users)Session["User"]).Department != "合约部" && ((JianHeMES.Models.Users)Session["User"]).Department != "销售部" && ((JianHeMES.Models.Users)Session["User"]).Department != "财务部" && ((JianHeMES.Models.Users)Session["User"]).Department != "采购部" && ((JianHeMES.Models.Users)Session["User"]).Department != "客户服务部") && (((JianHeMES.Models.Users)Session["User"]).Department != "研发部") && ((JianHeMES.Models.Users)Session["User"]).UserName != "姜春艳" && ((JianHeMES.Models.Users)Session["User"]).UserName != "刘秋如")
                        {

                            <li class="dropdown quantityDepar">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    品质部
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu collapse" style="text-align: left; min-width: 114px;">
                                    <li>@Html.RouteLink("FQC", "Default", new { controller = "FinalQCs", Action = "New_Index" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("客户订单模块扫码", "Default", new { controller = "FinalQCs", Action = "recordBarcode" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("老化OQC", "Default", new { controller = "Burn_in", Action = "New_Index" }, new { @class = "checkstatus" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("外观电检", "Default", new { controller = "Appearances", Action = "New_Index" }, new { @class = "checkstatus" })</li>
                                    <li class="divider"></li>
                                    <li class="waixiangzhuangxiang">@Html.RouteLink("外箱装箱", "Default", new { controller = "Packagings", Action = "outsideBinningPrint" }, new { @class = "checkstatus" })</li>
                                    <li class="divider waixiangzhuangxiang"></li>
                                    <li>@Html.RouteLink("IQC管理", "Default", new { controller = "IQCReports", Action = "Index" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("备品配件物料管理", "Default", new { controller = "Packagings", Action = "SPC_QueryByOrderNumber" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("客诉订单", "Default", new { controller = "Customer_Complaints", Action = "index" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("客损统计表", "Default", new { controller = "Customer_Complaints", Action = "Customer_loss_byFaultOrType" })</li>
                                </ul>
                            </li>
                        }
                        else
                        {
                            if (Session["User"] != null && ((JianHeMES.Models.Users)Session["User"]).Department == "客户服务部")
                            {
                                <li class="keshu">@Html.RouteLink("客诉订单", "Default", new { controller = "Customer_Complaints", Action = "index" })</li>
                            }
                        }

                        @*SMT部*@
                        @if (Session["User"] != null && (((JianHeMES.Models.Users)Session["User"]).Department != "合约部" && ((JianHeMES.Models.Users)Session["User"]).Department != "销售部" && ((JianHeMES.Models.Users)Session["User"]).Department != "财务部" && ((JianHeMES.Models.Users)Session["User"]).Department != "采购部" && ((JianHeMES.Models.Users)Session["User"]).Department != "客户服务部") && (((JianHeMES.Models.Users)Session["User"]).Department != "研发部") && ((JianHeMES.Models.Users)Session["User"]).UserName != "姜春艳" && ((JianHeMES.Models.Users)Session["User"]).UserName != "刘秋如")
                        {
                            <li class="dropdown SMTdepar">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    SMT部
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu collapse" style="text-align: left; min-width: 114px;">
                                    <li>@Html.RouteLink("生产信息看板", "Default", new { controller = "SMT", Action = "SMT_ProductionInfo" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("产线状态看板", "Default", new { controller = "SMT", Action = "SMT_Manage" })</li>
                                    <li class="divider"></li>
                                    <li class="chanxiancaozuo">@Html.RouteLink("产线信息录入", "Default", new { controller = "SMT", Action = "SMT_Operator" }, new { @class = "checkstatus" })</li>
                                    <li class="divider chanxiancaozuo"></li>
                                    <li>@Html.RouteLink("历史记录", "Default", new { controller = "SMT", Action = "SMT_ProductionData" }, new { @class = "checkstatus" })</li>
                                    <li class="divider"></li>
                                    <li class="smtxigaocaozuo">@Html.RouteLink("锡膏入冰柜", "Default", new { controller = "SMT_Sulderpaster", Action = "AddSMTFreezer" }, new { @class = "checkstatus" })</li>
                                    <li class="divider smtxigaocaozuo"></li>
                                    <li class="smtxigaocaozuo">@Html.RouteLink("锡膏搅拌使用", "Default", new { controller = "SMT_Sulderpaster", Action = "Stir" }, new { @class = "checkstatus" })</li>
                                    <li class="divider smtxigaocaozuo"></li>
                                    <li class="xigaokanban">@Html.RouteLink("锡膏看板", "Default", new { controller = "SMT_Sulderpaster", Action = "smtBoard" }, new { @class = "checkstatus" })</li>
                                    <li class="divider xigaokanban"></li>
                                    <li>@Html.RouteLink("IC面生产看板", "Default", new { controller = "SMT", Action = "DisplayICContenInfo" })</li>
                                    <li class="divider"></li>
                                    <li>@Html.RouteLink("灯面生产看板", "Default", new { controller = "SMT", Action = "DisplayLightContenInfo" })</li>
                                </ul>
                            </li>

                        }

                        @* 技术部 *@
                        @if (Session["User"] != null && (((JianHeMES.Models.Users)Session["User"]).Department != "合约部" && ((JianHeMES.Models.Users)Session["User"]).Department != "销售部" && ((JianHeMES.Models.Users)Session["User"]).Department != "财务部" && ((JianHeMES.Models.Users)Session["User"]).Department != "客户服务部") && (((JianHeMES.Models.Users)Session["User"]).Department != "研发部") && ((JianHeMES.Models.Users)Session["User"]).UserName != "姜春艳" && ((JianHeMES.Models.Users)Session["User"]).UserName != "刘秋如")
                        {
                            <li class="dropdown techDepar">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    技术部
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu collapse" style="text-align: left; min-width: 114px;">
                                    @*<li class="shebeichaxun">@Html.RouteLink("设备管理", "Default", new { controller = "Equipment", Action = "Equipment_Rateof_grain" })</li>*@
                                    <li class="shebeichaxun">@Html.RouteLink("设备管理", "Default", new { controller = "Equipment", Action = "Equipment_NewIndex" })</li>
                                    <li class="divider shebeichaxun"></li>
                                    <li class="xiaoyangchaxun">@Html.RouteLink("小样报告", "Default", new { controller = "Small_Sample", Action = "index" })</li>
                                    <li class="divider xiaoyangchaxun"></li>
                                    <li class="gxcnsy">@Html.RouteLink("工序产能首页", "Default", new { controller = "Process_Capacity", Action = "index" })</li>
                                    <li class="divider gxcnsy"></li>
                                    <li class="gxcnlr">@Html.RouteLink("工序产能信息录入", "Default", new { controller = "Process_Capacity", Action = "index4" })</li>
                                    <li class="divider gxcnlr"></li>
                                    <li class="">@Html.RouteLink("SOP", "Default", new { controller = "SOP", Action = "index" })</li>
                                </ul>
                            </li>

                        }
                        @if (((JianHeMES.Models.Users)Session["User"]) != null && (((JianHeMES.Models.Users)Session["User"]).Department == "研发部"))
                        {
                            <li class="xiaoyangchaxun">@Html.RouteLink("小样报告", "Default", new { controller = "Small_Sample", Action = "index" })</li>
                            <li class="divider xiaoyangchaxun"></li>
                        }
                        @if (Session["User"] != null && (((JianHeMES.Models.Users)Session["User"]).Department != "合约部" && ((JianHeMES.Models.Users)Session["User"]).Department != "销售部" && ((JianHeMES.Models.Users)Session["User"]).Department != "财务部" && ((JianHeMES.Models.Users)Session["User"]).Department != "采购部" && ((JianHeMES.Models.Users)Session["User"]).Department != "客户服务部") && (((JianHeMES.Models.Users)Session["User"]).Department != "研发部") && ((JianHeMES.Models.Users)Session["User"]).UserName != "姜春艳" && ((JianHeMES.Models.Users)Session["User"]).UserName != "刘秋如")
                        {
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    配套加工部
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu collapse" style="text-align: left; min-width: 114px;">
                                    <li>@Html.RouteLink("生产进度管控", "Default", new { Controller = "MetalPlate", Action = "MetalPlate_Index" })</li>
                                    @*<li class="divider"></li>
                                        <li>@Html.RouteLink("基本信息录入", "Default", new { Controller = "MetalPlate", Action = "CreatBasicInfo" })</li>
                                        <li class="divider"></li>
                                        <li>@Html.RouteLink("生产数据录入", "Default", new { Controller = "MetalPlate", Action = "CreatProduction" })</li>*@
                                </ul>
                            </li>
                        }


                        @*人力资源部*@
                        @if (((JianHeMES.Models.Users)Session["User"]) != null && (((JianHeMES.Models.Users)Session["User"]).Department != "合约部" && ((JianHeMES.Models.Users)Session["User"]).Department != "销售部" && ((JianHeMES.Models.Users)Session["User"]).Department != "财务部" && ((JianHeMES.Models.Users)Session["User"]).Department != "采购部" && ((JianHeMES.Models.Users)Session["User"]).Department != "客户服务部"))
                        {
                            <li class="dropdown HRdepar" style="display:none;">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    人力资源部
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu collapse" style="text-align: left; min-width: 114px;">

                                    <li class="Dailys">@Html.RouteLink("人事日报表", "Default", new { controller = "Personnel", Action = "Daily" })</li>
                                    <li class="divider Dailys"></li>

                                    <li class="Contrast">@Html.RouteLink("人工成本周对比", "Default", new { controller = "Personnel_of_Contrast", Action = "Contrast" })</li>
                                    <li class="divider Contrast"></li>


                                    <li class="Turnoverrate">@Html.RouteLink("月流失率", "Default", new { controller = "Personnel_Turnoverrate", Action = "Turnoverrate" })</li>
                                    <li class="divider Turnoverrate"></li>

                                    <li class="Recruitment">@Html.RouteLink("招聘周报", "Default", new { controller = "Personnel_Recruitment", Action = "Recruitment" })</li>
                                    <li class="divider Recruitment"></li>

                                    <li class="LeavedPersonServiceLength">@Html.RouteLink("离职员工工龄分布", "Default", new { controller = "Personnel_Roster", Action = "LeavedPersonServiceLength" })</li>
                                    <li class="divider LeavedPersonServiceLength"></li>

                                    <li class="">@Html.RouteLink("班组评优月度积分统计表", "Default", new { controller = "KPI", Action = "IntegralTable_Index" })</li>
                                    <li class="divider "></li>

                                    <li class="">@Html.RouteLink("KPI", "Default", new { controller = "KPI", Action = "KPI_Index" })</li>
                                    <li class="divider"></li>

                                    <li class="">@Html.RouteLink("7S管理", "Default", new { controller = "KPI", Action = "KPI_7S_Summarizing" })</li>
                                    <li class="divider"></li>

                                    <li class="huamingce">@Html.RouteLink("花名册", "Default", new { controller = "Personnel_Roster", Action = "Index" })</li>
                                    <li class="divider huamingce"></li>

                                    <li class="Index2">@Html.RouteLink("组织架构", "Default", new { controller = "Personnel_Framework", Action = "Index2" })</li>
                                    <li class="divider Index2"></li>

                                    <li class="Index2 yueduyouxiu">@Html.RouteLink("月度优秀班组评选", "Default", new { controller = "Personnel_Quality_objectives", Action = "Index" })</li>
                                    <li class="divider Index2 yueduyouxiu"></li>

                                    <li class="yuanyin">@Html.RouteLink("离职原因调查", "Default", new { controller = "Personnel_Reasons_for_leaving", Action = "Index" })</li>
                                    <li class="divider yuanyin"></li>

                                    <li class="leave">@Html.RouteLink("请假记录", "Default", new { controller = "Personnel_Leave", Action = "Index" })</li>
                                    <li class="divider leave"></li>

                                    <li class="dropdown xitongyonghu">
                                        @Html.RouteLink("系统用户", "Default", new { controller = "Users", Action = "Usersquery" })
                                    </li>
                                    @*<li class="divider leave"></li>*@

                                    @*//|| ((JianHeMES.Models.Users)Session["User"]).Department == "人力资源部"*@

                                    @*<li class="tree">@Html.RouteLink("组织架构(图)", "Default", new { controller = "Personnel_Framework", Action = "Index" })</li>*@
                                    @*<li class="divider"></li>*@
                                    @*<li>@Html.RouteLink("离职原因调查", "Default", new { controller = "Personnel_Reasons_for_leaving", Action = "Index" })</li>
                                        <li class="divider"></li>
                                        <li>@Html.RouteLink("请假记录", "Default", new { controller = "Personnel_Leave", Action = "Index" })</li>*@

                                </ul>
                            </li>
                        }
                        else
                        {
                            @*<li>@Html.RouteLink("人事日报表", "Default", new { controller = "Personnel", Action = "Daily" })</li>
                                <li>@Html.RouteLink("小样报告", "Default", new { controller = "Small_Sample", Action = "index" })</li>*@
                        }

                        @{
                            var UserName = Session["User"] == null ? string.Empty : ((JianHeMES.Models.Users)Session["User"]).UserName;
                            var Userid = Session["User"] == null ? string.Empty : ((JianHeMES.Models.Users)Session["User"]).ID.ToString();
                        }

                        @*用户状态*@
                        @if (Session["User"] == null)
                        {
                            <li class="navbar-right">
                                <a id="logingo" href="/Users/Login"><span class="glyphicon glyphicon-log-in"></span>  登录</a>
                                @*<a id="logingo" data-toggle="modal" data-target="#login" href=""><span class="glyphicon glyphicon-log-in"></span>  登录</a>*@
                            </li>
                        }
                        else
                        {
                            <li class="dropdown navbar-right">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <span class="glyphicon glyphicon-user"></span>  @UserName<span class="badge" style="background-color:red" v-on:click="getInfor">{{num}}</span>
                                    <b class="caret"></b>
                                </a>

                                <ul class="dropdown-menu collapse" style="min-width: 104px;">
                                    @if (Session["User"] != null && UserRoles == "系统管理员")
                                    {
                                        <li>@Html.RouteLink("用户管理", "Default", new { Controller = "Users", Action = "Index" })</li>
                                        <li>@Html.RouteLink("批量增加用户", "Default", new { Controller = "Users", Action = "BatchUsers" })</li>
                                        <li>@Html.RouteLink("日志查询", "Default", new { Controller = "Users", Action = "UerserOperateLogsQuery" })</li>
                                        <li>@Html.RouteLink("权限对比", "Default", new { Controller = "Users", Action = "PermissionList" })</li>
                                    }
                                    <li>@Html.RouteLink("说明书", "Default", new { Controller = "Manual", Action = "Index" })</li>
                                    <li class="messhow">@Html.RouteLink("版本管理", "Default", new { Controller = "VersionManagement", Action = "Index" })</li>
                                    <li>@Html.RouteLink("查看权限", "Default", new { Controller = "Users", Action = "ViewUserRights" })</li>
                                    <li class="banzuEdit">@Html.RouteLink("班组信息", "Default", new { Controller = "Users", Action = "UserTeam" })</li>
                                    <li>@Html.RouteLink("修改密码", "Default", new { id = Userid, Controller = "Users", Action = "Modifypwd" })</li>
                                    <li><a href="/Users/Logoff">退出</a></li>
                                </ul>
                            </li>
                        }
                    </ul>
                    @*@Html.Partial("_LoginPartial")*@
                </div>
            </div>
        </div>
    </div>
    <div class="container body-content">
        @RenderBody()
        @RenderSection("scripts", false)
        <footer id="footer" class="footer hidden-xs hidden-sm text-center">
            <hr />
            <p align="center">
                &copy; @DateTime.Now.Year - 健和光电MES
                <template v-if="currentVersion">
                    &nbsp;|&nbsp; 当前版本:
                    <a class="version" v-bind:href="'/VersionManagement/Index?version='+currentVersion" target="_blank">{{currentVersion}}</a>
                </template>
            </p>

        </footer>
    </div>

    <div id="login" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h3 class="modal-title text-center" id="myModalLabel">
                        登录
                    </h3>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <div class="col-md-3 loginlabel" style="padding:8px"><label for="UserNum">员工编号</label></div>
                        <input autofocus="autofocus" class="form-control" id="UserNum" v-model="UserNum" placeholder="请输入员工编号" type="text" value="">
                    </div>
                    <div class="form-group ">
                        <div class="col-md-3 loginlabel" style="padding:8px"><label for="PassWord">密码</label></div>
                        <input class="form-control" id="PassWord" v-model="PassWord" placeholder="请输入密码" type="password">
                    </div>
                    <div class="form-group">
                        <div class="col-md-3 hidden-xs hidden-sm" style="padding:8px"><label></label></div>
                        <span class="text-danger">{{loginPrompt}}</span>
                    </div>
                    <div class="form-group">
                        <input id="nowfocus" type="button" v-on:click="userlogin" class="btn btn-primary" value="登录">
                        <button class="btn btn-danger" data-dismiss="modal">取消</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @{

        var UserRole = Session["User"] == null ? string.Empty : ((JianHeMES.Models.Users)Session["User"]).Role;
        var UserIds = Session["User"] == null ? 0 : ((JianHeMES.Models.Users)Session["User"]).UserNum;
        var ischeck = ViewBag.editinfo;
    }
    <script>

        var infor = new Vue({
            el: "#headerApp",
            data: {
                num:null,
            },
            created: function() {
                this.message()
            },
            methods: {
                timer() {
                    return setTimeout(() => {
                        this.message()
                    }, 2000)
                },
                message() {
                    axios.post("/Tips/Pending_Work", { userId: @UserIds }).then(res => {
                        if (res.data == 0) {
                            $('badge').hide()
                        } else {
                            this.num = res.data
                            $('badge').show()
                            this.timer()
                        }
                    }).catch(err => { })
                },
                getInfor() {
                    //window.location.href = '/Tips/Index'
                    window.open('/Tips/Tips_Index');
                }
            },
        })
        var footer = new Vue({
            el: "#footer",
            data: {
                currentVersion: '',//当前版本
            },
            created: function () {
                axios.post('/VersionManagement/GetLasrVersion').then(res => { this.currentVersion = res.data; });
            },
        })
    </script>
    <script>
        var login = new Vue({
            el: "#login",
            data: {
                UserNum: "",
                UserId:'',
                PassWord: "",
                clickAddress: "",
                loginPrompt: ""
            },
            mounted: function () {
                var that = this
                that.UserId = @UserIds
                $("#UserNum").keypress(function (e) {
                    if (e.which == 13) {// 判断所按是否回车键
                        $("#PassWord").focus(); // 设置焦点
                        return false;// 取消默认的提交行为
                    };
                });
                $("#PassWord").keypress(function (e) {
                    if (e.keyCode == 13) {// 判断所按是否回车键
                        login.$options.methods.userlogin();
                    };
                });
                $('.dropdown').mouseover(function () {
                    $(this).addClass('open');
                }).mouseout(function () { $(this).removeClass('open'); });

                @*$(".checkstatus").click(function () {
                    if ("@Session["User"]" == "") {
                        login.clickAddress = $(this).attr("href");
                        $("#login").modal();
                        return false;
                    } else {
                        return true;
                    }
                });*@

                $('#login').on('show.bs.modal', function () {
                    login.loginPrompt = "";
                    if (login.clickAddress == "") {
                        login.clickAddress = window.location.pathname == "/Users/Login" ? "" : window.location.pathname;
                    };
                });
                $('#login').on('shown.bs.modal', function () {
                    if ($("#UserNum").val() == "") {
                        $("#UserNum").focus();
                    } else if ($("#PassWord").val() == "") {
                        $("#PassWord").focus();
                    } else {
                        $("#nowfocus").focus();
                    }
                });
                $('#login').on('hide.bs.modal', function () {
                    login.clickAddress = "";
                    login.loginPrompt = "";
                });

                var that = this
                //console.log(localStorage.getItem('rigths'))
                if ("@Session["User"]" != "") {
                    if (localStorage.getItem('rigths') == "{}" || localStorage.getItem('rigths') == null) {
                        //alert("请求权限数据了！！")
                        axios.post("/Common/Permissions", { id: that.UserId }).then(res=> {
                            localStorage.setItem('rigths', JSON.stringify(res.data));
                            showNav()
                    }).catch(err=> {

                    });
                    }else{}
                    showNav()
                } else {
                    localStorage.removeItem('rigths');
                    //alert("退出登录")
                }
            },
            methods: {
                userlogin: function () {
                    login.loginPrompt = "";
                    $.ajax({
                        url: "/Users/loginCheck",
                        type: "post",
                        data: {
                            user: {
                                UserNum: login.UserNum,
                                PassWord: login.PassWord,
                            }
                        },
                        success: function (returnVal) {
                            if (returnVal == "success") {
                                window.location.href = "http://" + window.location.host + login.clickAddress;
                            } else if (returnVal == "error") {
                                login.loginPrompt = "登录失败，请检查员工编号及密码是否有误！";
                            }
                        },
                        error: function (err) {
                            alert("登录出错！");
                        }
                    });
                },

            }
        });

        var roles = JSON.parse(localStorage.getItem("rigths"))   //
        function checkRoles(list, roleName) {   //检测权限
            if (list && roleName) {
                for (let item in list) {
                    if (list[item] == roleName) {
                        return true;
                    };
                };
            };
            return false;
        }

        function showNav() {

            let rolse = JSON.parse(localStorage.getItem("rigths"))
            if (checkRoles(rolse, '显示人事日报表')) {
                $('.Dailys').show()
            } else {
                $('.Dailys').hide()
            }
            if (checkRoles(rolse, '显示人工成本对比表')) {
                $('.Contrast').show()
            } else {
                $('.Contrast').hide()
            }
            if (checkRoles(rolse, '显示月流失率')) {
                $('.Turnoverrate').show()
            } else {
                $('.Turnoverrate').hide()
            }
            if (checkRoles(rolse, '显示招聘周报')) {
                $('.Recruitment').show()
            } else {
                $('.Recruitment').hide()
            }
            if (checkRoles(rolse, '显示离职员工工龄表')) {
                $('.LeavedPersonServiceLength').show()
            } else {
                $('.LeavedPersonServiceLength').hide()
            }
            if (checkRoles(rolse, '显示花名册')) {
                $('.huamingce').show()
            } else {
                $('.huamingce').hide()
            }
            if (checkRoles(rolse, '显示组织架构')) {
                $('.Index2').show()
                $('.tree').show()
            } else {
                $('.Index2').hide()
                $('.tree').hide()
            }
            if (checkRoles(rolse, '显示离职员工调查')) {
                $('.yuanyin').show()
            } else {
                $('.yuanyin').hide()
            }
            if (checkRoles(rolse, '显示请假记录')) {
                $('.leave').show()
            } else {
                $('.leave').hide()
            }
            if (checkRoles(rolse, 'MES计划模块')) {
                //$('.PCdepar').show()
            } else {
                //$('.PCdepar').hide()
            }
            if (checkRoles(rolse, 'MESExcution模块')) {
                //$('.productC').show()
                //$('.zhuangpei12').show()
                //$('.quantityDepar').show()
                //$('.SMTdepar').show()
                //$('.techDepar').show()
            } else {
                //$('.productC').hide()
                //$('.zhuangpei12').hide()
                ///$('.quantityDepar').hide()
                //$('.SMTdepar').hide()
                //$('.techDepar').hide()
            }
            if (checkRoles(rolse, '人力资源')) {
                $('.HRdepar').show()
            } else {
                $('.HRdepar').hide()
            }
            if (checkRoles(rolse, '包装箱信息录入修改')) {
                $('.Packagingsinput').show()
            } else {
                $('.Packagingsinput').hide()
            } if (checkRoles(rolse, '内箱装箱确认')) {
                $('.neixiangqueren').show()
            } else {
                $('.neixiangqueren').hide()
            } if (checkRoles(rolse, '入库信息录入')) {
                $('.rukexinxicaozuo').show()
            } else {
                $('.rukexinxicaozuo').hide()
            }
            if (checkRoles(rolse, '出库信息录入')) {
                $('.chukuxinxicaozuo').show()
            } else {
                $('.chukuxinxicaozuo').hide()
            } if (checkRoles(rolse, '删除入库信息')) {
                $('.kuweihaoxiugai').show()
            } else {
                $('.kuweihaoxiugai').hide()
            } if (checkRoles(rolse, '产值看板查看')) {
                //$('.chanzhikanbanchakan').show()
            } else {
                //$('.chanzhikanbanchakan').hide()
            } if (checkRoles(rolse, '设备查询')) {
                //$('.shebeichaxun').show()
            } else {
                //$('.shebeichaxun').hide()
            }
            if (checkRoles(rolse, '查看小样报告')) {
                //$('.xiaoyangchaxun').show()
            } else {
                //$('.xiaoyangchaxun').hide()
            }
            if (checkRoles(rolse, '产值看板查看') || checkRoles(rolse, '入库信息录入') || checkRoles(rolse, '库位号修改') || checkRoles(rolse, '出库信息录入')) {
                //$('.showMcDepars').show()
            } else {
                //$('.showMcDepars').hide()
            }
            if (checkRoles(rolse, '查看工序产能首页')) {
                $('.gxcnsy').show()
            } else {
                $('.gxcnsy').hide()
            }
            if (checkRoles(rolse, '工序产能信息录入')) {
                $('.gxcnlr').show()
            } else {
                $('.gxcnlr').hide()
            }
            if (checkRoles(rolse, '显示月度优秀班组评选')) {
                $('.yueduyouxiu').show()
            } else {
                $('.yueduyouxiu').hide()
            }
            if (checkRoles(rolse, '老化拼屏操作')) {
                $('.kaishipinping').show()
            } else {
                $('.kaishipinping').hide()
            }
            if (true) {  // checkRoles(rolse, '查询锡膏页面')
                $('.xigaokanban').show()
            } else {
                $('.xigaokanban').hide()
            }
            if (checkRoles(rolse, 'MC锡膏仓库操作')) {
                $('.mcxigaocaozuo').show()
            } else {
                $('.mcxigaocaozuo').hide()
            }
            if (checkRoles(rolse, 'SMT锡膏入SMT冰柜')) {
                $('.smtxigaocaozuo').show()
            } else {
                $('.smtxigaocaozuo').hide()
            }
            if (checkRoles(rolse, '查看外箱标签')) {
                $('.waixiangzhuangxiang').show()
            } else {
                $('.waixiangzhuangxiang').hide()
            }
            if (checkRoles(rolse, '产线信息录入')) {
                $('.chanxiancaozuo').show()
            } else {
                $('.chanxiancaozuo').hide()
            }
            if (checkRoles(rolse, '新增班组') || checkRoles(rolse, '删除班组')) {
                $('.banzuEdit').show()
            } else {
                $('.banzuEdit').hide()
            }
            if (checkRoles(rolse, '合约中心查询')) {
                $('.heyue').show()
            } else {
                $('.heyue').hide()
            }
            if (checkRoles(rolse, '销售中心查询')) {
                $('.xiaoshou').show()
            } else {
                $('.xiaoshou').hide()
            }
            if (checkRoles(rolse, 'MES版本查看')) {
                $('.messhow').show()
            } else {
                $('.messhow').hide()
            }
            //if (checkRoles(rolse, '录入计划信息')) {
            //    $('.lrjhxxshow').show()
            //} else {
            //    $('.lrjhxxshow').hide()
            //}
            if (checkRoles(rolse, '创建订单客诉表') || checkRoles(rolse, '修改订单客诉表')) {
                $('.keshu').show()
            } else {
                $('.keshu').hide()
            }
            if (checkRoles(rolse, '查看工厂用户清单') || checkRoles(rolse, '查看总部用户清单')) {
                $('.xitongyonghu').show()
            } else {
                $('.xitongyonghu').hide()
            }
            if (checkRoles(rolse, '查询库存金额表') ) {
               // $('.StockAmountCalculate').show()
            } else {
               // $('.StockAmountCalculate').hide()
            }
        }
    </script>
</body>
@*@MiniProfiler.RenderIncludes();*@
</html>
