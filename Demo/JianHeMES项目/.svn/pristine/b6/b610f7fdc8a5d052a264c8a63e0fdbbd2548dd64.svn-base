@{
    ViewBag.Title = "甘特";
    Layout = "~/Views/Shared/_Layout2.cshtml";
}
@* css放置处 *@
@section cssStyle {
    <link href="~/Scripts/gantt/dhtmlxgantt.css" rel="stylesheet" />
    <link href="~/Scripts/gantt/mygantt.css" rel="stylesheet" />
    <style>
        .top_action {
            padding: 10px 20px;
            display: flex;
            align-items: center;
        }

            .top_action .el-select, .top_action .el-range-editor {
                margin-right: 10px;
            }
    </style>
}

<el-row id="app" v-cloak>
    <div class="top_action">
        <el-select v-model="query" size="small" placeholder="请选择查询类型">
            <el-option label="按单号查询" value="0"></el-option>
            <el-option label="按工段查询" value="1"></el-option>
        </el-select>    
        <el-select v-model="odd" size="small" placeholder="请选择单号">
            <el-option v-for="item in odd_options"
                       :key="item.value"
                       :label="item.label"
                       :value="item.value">
            </el-option>
        </el-select>
        <el-select v-model="section" size="small" placeholder="请选择工段" multiple
                       collapse-tags>
            <el-option v-for="item in section_options"
                       
                       :key="item.value"
                       :label="item.label"
                       :value="item.value">
            </el-option>
        </el-select>
        <el-select v-model="process" size="small" placeholder="请选择工序">
            <el-option v-for="item in process_options"
                       :key="item.value"
                       :label="item.label"
                       :value="item.value">
            </el-option>
        </el-select>
        <el-date-picker v-model="date_period"
                        size="small"
                        type="daterange"
                        range-separator="至"
                        start-placeholder="开始日期"
                        end-placeholder="结束日期">
        </el-date-picker>
        <el-button type="primary" size="small">查询</el-button>
    </div>

    <div id="gantt_here" style='width:100%; height:80vh;'></div>
</el-row>
@* 分部页放置处 *@
@section renderPage {
}
@* js放置处 *@
@section jsScript {
    <script src="~/Scripts/gantt/dhtmlxgantt.js"></script>
    @*<script src="~/Scripts/gantt/data_baselines.js"></script>*@
    <script src="~/Scripts/gantt/locale_cn.js" charset="utf-8"></script>
    <script src="~/Scripts/gantt/mygantt.js"></script>
    <script>
        const app = {
            data: function () {
                return {
                    task: {}, //甘特数据
                    query:'',
                    odd: '', //选择单号
                    odd_options: [{
                        value: '1',
                        label: '单号1111'
                    }, {
                        value: '2',
                        label: '单号2222'
                    }, {
                        value: '3',
                        label: '单号3333'
                    }, {
                        value: '4',
                        label: '单号4444'
                    }, {
                        value: '5',
                        label: '单号5555'
                    }],    //单号下拉数据
                    section: '', //选择工段
                    section_options: [{
                        value: '1',
                        label: '工段1111'
                    }, {
                        value: '2',
                        label: '工段2222'
                    }, {
                        value: '3',
                        label: '工段3333'
                    }, {
                        value: '4',
                        label: '工段4444'
                    }, {
                        value: '5',
                        label: '工段5555'
                    }],    //工段下拉数据
                    process: '', //选择工序
                    process_options: [{
                        value: '1',
                        label: '工序1111'
                    }, {
                        value: '2',
                        label: '工序2222'
                    }, {
                        value: '3',
                        label: '工序3333'
                    }, {
                        value: '4',
                        label: '工序4444'
                    }, {
                        value: '5',
                        label: '工序5555'
                    }],    //工序下拉数据
                    date_period: ''   //时间段

                }
            },
            created: function () {
            },
            mounted: function () {
                axios.post("/api/API/GetOrderNumGunter/?ordernum=2017-TEST-1").then(res => {
                    //console.log(res);
                    if (res.status == 200) {
                        this.task = res.data;
                        my_gantt();
                        gantt.init("gantt_here");
                        gantt.parse(this.task);

                    }

                })

            },
            methods: {

            }
        };
    </script>
}