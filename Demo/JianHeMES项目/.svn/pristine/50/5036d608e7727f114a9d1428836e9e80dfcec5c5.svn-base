<script src="~/Scripts/echarts.js"></script>
<script type="text/template" id="chartDiv">
    <div>
        <div id="phxsDiv"></div>
        <div>sdfasdfasdf</div>
    </div>
</script>
<script>
    Vue.component('hover-div', {
        template: document.getElementById("chartDiv"),
        data: function () {
            return {
                chartLoading: false,
                phxsChart: "",
            }
        },
        mounted: function () {
            //echart折线图配置
            var chartOption = {
                title: {
                    left: 'center'
                },
                tooltip: {
                    trigger: 'axis'
                },
                grid: {
                    left: '3%',
                    right: '5%',
                    bottom: '7%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category'
                },
                yAxis: {
                    type: 'value',
                    axisLabel: {
                        formatter: '{value} %'
                    }
                },
                series: [{
                    name: "达标率(%)",
                    type: 'bar',
                    label: {
                        normal: {
                            show: true,
                            position: 'top',
                            formatter: '{c} %',
                        }
                    },
                }]
            };
            setTimeout(() => {
                //echart初始化
                this.phxsChart = echarts.init(document.getElementById('phxsDiv'));
                this.phxsChart.setOption(chartOption);
                this.phxsChart.setOption({ title: { text: '效率未达标线别 - TOP3' } });
            }, 0);
        },
        methods: {
            getdata: function (address) {
                this.chartLoading = true;
                axios.post("/SMT/" + address, {
                    time: "2020-1-6",
                }).then(res => {
                    //console.log(res.data);
                    //表格数据
                    this.dataList = res.data;
                    //图表数据
                    this.phxsChart.setOption({
                        series: [{ data: res.data.efficiency.value }],
                        xAxis: { data: res.data.efficiency.line }
                    });
                    this.chartLoading = false;
                }).catch(err => {
                    console.warn(err);
                    this.chartLoading = false;
                });
            }
        }
    });
</script>
