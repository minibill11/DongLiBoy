@model JianHeMES.Models.OrderMgm

@{
    ViewBag.Title = "订单详细情况";
}
<style>
    p {
        margin: 0;
    }

    .table > tbody > tr > td, .table > tbody > tr > th {
        padding: 2px;
        font-size: 13px;
    }

    .table-bordered > tbody > tr > td, .table-bordered > tbody > tr > th {
        border-color: #ada1a1;
    }

    .table1 {
        border-collapse: collapse;
        border-color: #ada1a1;
        font-size: 13px;
        text-align: center;
    }

        .table1 > tbody > tr > td {
            border-color: #ada1a1;
        }

        .table1 > tbody > tr:nth-child(1) > td {
            text-align: left;
        }

    body {
        overflow-y: scroll;
    }

    .titleRow div {
        font-size: 13px;
        padding: 0px;
    }

        .titleRow div span {
            font-weight: bold;
        }

    .modal-dialog {
        width: 80%;
        height: 100%;
        margin: 0px auto;
    }

    th {
        text-align: center;
    }

    @@media screen and (max-width:768px) {
        .modal-dialog {
            width: 100%;
        }

        .pdfViewer .page {
            margin: 0;
            border: 1px solid black;
        }

        #mainContainer {
            min-width: 300px;
        }
    }

    .cursor {
        cursor: pointer;
    }

    .col-md-7, .col-md-5 {
        padding: 0 5px;
    }

    .barcodeFrame {
        width: 210px;
        height: 100px;
        border: 1px solid #000000;
        overflow: auto;
    }

    hr {
        margin: 5px 0;
    }

    .border {
        border: 1px solid #555;
        border-collapse: collapse;
        padding: 3px 10px 5px;
        margin-right: -1px;
    }
    .NoVal{
        width:100px;
        height:22px;
        padding:0;
        display:inline-block;
    }
</style>
<script src="~/Scripts/imgJS/exif.js"></script>
<script src="~/Scripts/imgJS/uploadImage.js"></script>
<h3 style="text-align:center;margin:10px 0 0;">@ViewBag.Title</h3>
<hr />
<div class="row">
    <div class="titleRow col-md-5">
        <div class="row" style="margin:0;padding:0">
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.OrderNum)
                </span>：<br />
                @Html.DisplayFor(model => model.OrderNum, new { @id = "OrderNum" })
            </div>
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.CustomerName)
                </span>：<br />
                @Html.DisplayFor(model => model.CustomerName, new { @id = "CustomerName" })
            </div>
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.Area)
                </span>：
                @Html.DisplayFor(model => model.Area)
            </div>
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.PlatformType)
                </span>：
                @Html.DisplayFor(model => model.PlatformType)
            </div>
        </div>
        <div class="row" style="margin:0;padding:0">
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.PlanInputTime)
                </span>：
                @Html.DisplayFor(model => model.PlanInputTime)
            </div>
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.PlanCompleteTime)
                </span>：
                @Html.DisplayFor(model => model.PlanCompleteTime)
            </div>
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.ProcessingRequire)
                </span>：
                @Html.DisplayFor(model => model.ProcessingRequire)
            </div>
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.StandardRequire)
                </span>：
                @Html.DisplayFor(model => model.StandardRequire)
            </div>
        </div>
        <div class="row" style="margin:0;padding:0">
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.ContractDate)
                </span>：
                @Html.DisplayFor(model => model.ContractDate)
            </div>
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.DeliveryDate)
                </span>：
                @Html.DisplayFor(model => model.DeliveryDate)
            </div>
            <div class="col-md-3">
                <span>
                    @Html.DisplayNameFor(model => model.IsRepertory)
                </span>：
                @Html.DisplayFor(model => model.IsRepertory)
            </div>
            <div class="col-md-3">
                @if (((JianHeMES.Models.Users)Session["User"]).Role == "小样调试员" || ViewBag.smallsmple == true)
                {
                <div style="margin:0;padding:0">
                    <a href="../EditForSmallSample/@Model.ID" target="_blank">
                        <span>
                            @Html.DisplayNameFor(model => model.HandSampleScedule)
                        </span>：
                        @Html.DisplayFor(model => model.HandSampleScedule)
                    </a>
                </div>
                }
                else
                {
                <div style="margin:0;padding:0">
                    <span>
                        @Html.DisplayNameFor(model => model.HandSampleScedule)
                    </span>：
                    @Html.DisplayFor(model => model.HandSampleScedule)
                </div>
                }
            </div>
        </div>

        <div class="row" style="margin:0;padding:0">
            <div class="col-md-8">
                @*<span>
                    @Html.DisplayNameFor(model => model.AssembleDepartment)
                </span>：
                @Html.DisplayFor(model => model.AssembleDepartment)*@
            </div>
            <div class="col-md-4">
                <span>
                    @Html.DisplayNameFor(model => model.IsAOD)
                </span>：
                @Html.DisplayFor(model => model.IsAOD)
            </div>
        </div>
        <div class="row" style="margin:0;padding:0">
            <div class="col-md-4">
                <span>
                    @Html.DisplayNameFor(model => model.IsAssembleFirstSample)
                </span>：
                @Html.DisplayFor(model => model.IsAssembleFirstSample)
            </div>
            <div class="col-md-4">
                <span>
                    @Html.DisplayNameFor(model => model.IsBurnInFirstSample)
                </span>：
                @Html.DisplayFor(model => model.IsBurnInFirstSample)
            </div>
            <div class="col-md-4">
                <span>
                    @Html.DisplayNameFor(model => model.IsAppearanceFirstSample)
                </span>：
                @Html.DisplayFor(model => model.IsAppearanceFirstSample)
            </div>
        </div>
        <div class="row" style="margin:0;padding:0">
            <div class="col-md-4">
                <span>
                    @*@Html.DisplayNameFor(model => model.IsAssembleAbnormal)*@
                    是否有组装异常
                </span>：
                @Html.DisplayFor(model => model.IsAssembleAbnormal)
            </div>
            <div class="col-md-4">
                <span>
                    @*@Html.DisplayNameFor(model => model.IsBurninAbnormal)*@
                    是否有老化异常
                </span>：
                @Html.DisplayFor(model => model.IsBurninAbnormal)
            </div>
            <div class="col-md-4">
                <span>
                    @*@Html.DisplayNameFor(model => model.IsAppearanceAbnormal)*@
                    是否有包装异常
                </span>：
                @Html.DisplayFor(model => model.IsAppearanceAbnormal)
            </div>
        </div>
    </div>
    <div class="titleRow col-md-7">
        <table class="table1" border="1">
            <colgroup>
                <col width="40" />
                <col width="60" />
                <col width="40" />
                <col width="60" />
                <col width="40" />
                <col width="60" />
                <col width="40" />
                <col width="60" />
                <col width="40" />
                <col width="60" />
                <col width="40" />
                <col width="60" />
                <col width="40" />
                <col width="60" />
            </colgroup>
            <tr>
                <td colspan="4"><span style="font-weight:bold">订单生成日期：</span><br /> @Html.DisplayFor(model => model.OrderCreateDate, new { id = "BarCodeCreator" })</td>
                <td colspan="3"><span style="font-weight:bold">操作员：</span>@Html.DisplayFor(model => model.BarCodeCreator, new { id = "BarCodeCreator" })</td>
                <td colspan="4"><span style="font-weight:bold">模组条码生成日期：</span><br />@Html.DisplayFor(model => model.BarCodeCreateDate, new { id = "BarCodeCreateDate" })</td>
                <td colspan="3"><span style="font-weight:bold">备注：</span>@Html.DisplayFor(model => model.Remark, new { id = "BarCodeCreator" })</td>
            </tr>
            <tr>
                <td colspan="2">模组</td>
                <td colspan="2">模块</td>
                <td colspan="2">额外预留模块</td>
                <td colspan="2">电源</td>
                <td colspan="2">额外预留电源</td>
                <td colspan="2">转接卡</td>
                <td colspan="2">额外预留转接卡</td>
            </tr>
            <tr style="font-size:11px;height:20px;font-weight:bold">
                <td>数量</td>
                <td>条码生成</td>
                <td>数量</td>
                <td>条码生成</td>
                <td>数量</td>
                <td>条码生成</td>
                <td>数量</td>
                <td>条码生成</td>
                <td>数量</td>
                <td>条码生成</td>
                <td>数量</td>
                <td>条码生成</td>
                <td>数量</td>
                <td>条码生成</td>
            </tr>
            <tr>
                <td>@Html.DisplayFor(model => model.Boxes, new { @id = "Boxes" })</td>
                <td>
                    @if (Model.BarCodeCreated == 1)
                    {
                        <span class="glyphicon glyphicon-ok"></span>
                    }
                    else
                    {
                        <span class="glyphicon glyphicon-remove"></span>
                    }
                </td>
                <td>@Html.DisplayFor(model => model.Models, new { id = "Models" })</td>
                <td>
                    @if (Model.ModulePieceBarCodeCreated == 1)
                    {
                        <span class="glyphicon glyphicon-ok"></span>
                    }
                    else
                    {
                        <span class="glyphicon glyphicon-remove"></span>
                    }
                </td>
                <td>@Html.DisplayFor(model => model.ModelsMore, new { id = "ModelsMore" })</td>
                <td>
                    @if (Model.ModulePieceBarCodeCreated == 1 && Model.ModelsMore != 0)
                    {
                        <span class="glyphicon glyphicon-ok"></span>
                    }
                    else
                    {
                        <span></span>
                    }
                </td>
                <td>@Html.DisplayFor(model => model.Powers, new { id = "Powers" })</td>
                <td>
                    @if (Model.PowerBarCodeCreated == 1)
                    {
                        <span class="glyphicon glyphicon-ok"></span>
                    }
                    else
                    {
                        if (Model.Powers == 0)
                        {
                            <span></span>
                        }
                        else
                        {
                            <span class="glyphicon glyphicon-remove"></span>
                        }
                    }
                </td>
                <td>@Html.DisplayFor(model => model.PowersMore, new { id = "PowersMore" })</td>
                <td>
                    @if (Model.PowerBarCodeCreated == 1 && Model.PowersMore != 0)
                    {
                        <span class="glyphicon glyphicon-ok"></span>
                    }
                    else
                    {
                        <span></span>
                    }
                </td>
                <td>@Html.DisplayFor(model => model.AdapterCard, new { id = "AdapterCard" })</td>
                <td>
                    @if (Model.AdapterCardBarCodeCreated == 1)
                    {
                        <span class="glyphicon glyphicon-ok"></span>
                    }
                    else
                    {
                        if (Model.AdapterCard == 0)
                        {
                            <span></span>
                        }
                        else
                        {
                            <span class="glyphicon glyphicon-remove"></span>
                        }
                    }
                </td>
                <td>@Html.DisplayFor(model => model.AdapterCardMore, new { id = "AdapterCardMore" })</td>
                <td>
                    @if (Model.AdapterCardBarCodeCreated == 1 && Model.AdapterCardMore != 0)
                    {
                        <span class="glyphicon glyphicon-ok"></span>
                    }
                    else
                    {
                        <span></span>
                    }
                </td>
            </tr>
            @* 特采订单 *@
            @if (Model.IsAOD == true)
            {
                <tr>
                    <td colspan="3" style="padding:0px 5px;">转为特采订单原因：</td>
                    <td colspan="4"><span>@Html.DisplayFor(model => model.AOD_Description)</span></td>
                    <td colspan="3">转单人：<span>@Html.DisplayFor(model => model.AODConverter)</span></td>
                    <td colspan="4">转单时间：<span>@Html.DisplayFor(model => model.AODConvertDate)</span></td>
                </tr>
            }
            @* 异常订单 *@
            @*@if (Model.IsAbnormalOrder == true)
            {
                <tr>
                    <td colspan="3" style="padding:0px 5px;">转为异常订单原因：</td>
                    <td colspan="4"><span>@Html.DisplayFor(model => model.AbnormalOrder_Description)</span></td>
                    <td colspan="3">转单人：<span>@Html.DisplayFor(model => model.AbnormalOrderConverter)</span></td>
                    <td colspan="4">转单时间：<span>@Html.DisplayFor(model => model.AbnormalOrderConvertDate)</span></td>
                </tr>
            }*@
            @* 组装异常订单 *@
            @if (Model.IsAssembleAbnormal == true)
            {
                <tr>
                    <td colspan="3" style="padding:0px 5px;">转为组装异常原因：</td>
                    <td colspan="4"><span>@Html.DisplayFor(model => model.AssembleAbnormal_Description)</span></td>
                    <td colspan="3">转单人：<span>@Html.DisplayFor(model => model.AssembleAbnormalConverter)</span></td>
                    <td colspan="4">转单时间：<span>@Html.DisplayFor(model => model.AssembleAbnormalConvertDate)</span></td>
                </tr>
            }
            @* 老化异常订单 *@
            @if (Model.IsBurninAbnormal == true)
            {
                <tr>
                    <td colspan="3" style="padding:0px 5px;">转为老化异常原因：</td>
                    <td colspan="4"><span>@Html.DisplayFor(model => model.BurninAbnormal_Description)</span></td>
                    <td colspan="3">转单人：<span>@Html.DisplayFor(model => model.BurninAbnormalConverter)</span></td>
                    <td colspan="4">转单时间：<span>@Html.DisplayFor(model => model.BurninAbnormalConvertDate)</span></td>
                </tr>
            }
            @* 包装异常订单 *@
            @if (Model.IsAppearanceAbnormal == true)
            {
                <tr>
                    <td colspan="3" style="padding:0px 5px;">转为包装异常原因：</td>
                    <td colspan="4"><span>@Html.DisplayFor(model => model.AppearanceAbnormal_Description)</span></td>
                    <td colspan="3">转单人：<span>@Html.DisplayFor(model => model.AppearanceAbnormalConverter)</span></td>
                    <td colspan="4">转单时间：<span>@Html.DisplayFor(model => model.AppearanceAbnormalConvertDate)</span></td>
                </tr>
            }
            @* 组装首件 *@
            @if (Model.IsAssembleFirstSample == true)
            {
                <tr>
                    <td colspan="3" style="padding:0px 5px;">转为组装首件原因：</td>
                    <td colspan="4"><span>@Html.DisplayFor(model => model.AssembleFirstSample_Description)</span></td>
                    <td colspan="3">转单人：<span>@Html.DisplayFor(model => model.AssembleFirstSampleConverter)</span></td>
                    <td colspan="4">转单时间：<span>@Html.DisplayFor(model => model.AssembleFirstSampleDate)</span></td>
                </tr>
            }
            @* 老化首件 *@
            @if (Model.IsBurnInFirstSample == true)
            {
                <tr>
                    <td colspan="3" style="padding:0px 5px;">转为老化首件原因：</td>
                    <td colspan="4"><span>@Html.DisplayFor(model => model.BurnInFirstSample_Description)</span></td>
                    <td colspan="3">转单人：<span>@Html.DisplayFor(model => model.BurnInFirstSampleConverter)</span></td>
                    <td colspan="4">转单时间：<span>@Html.DisplayFor(model => model.BurnInFirstSampleDate)</span></td>
                </tr>
            }
            @* 包装首件 *@
            @if (Model.IsAppearanceFirstSample == true)
            {
                <tr>
                    <td colspan="3" style="padding:0px 5px;">转为包装首件原因：</td>
                    <td colspan="4"><span>@Html.DisplayFor(model => model.AppearanceFirstSample_Description)</span></td>
                    <td colspan="3">转单人：<span>@Html.DisplayFor(model => model.AppearanceFirstSampleConverter)</span></td>
                    <td colspan="4">转单时间：<span>@Html.DisplayFor(model => model.AppearanceFirstSampleDate)</span></td>
                </tr>
            }
        </table>
    </div>
</div>
<hr />
<table id="summary" class="table table-bordered">
    <tr>
        <th>工段</th>
        <th>开始时间</th>
        <th>最后时间</th>
        <th>完成时间</th>
        <th>作业时长</th>
        <th>正常个数</th>
        <th>直通数</th>
        <th>直通率</th>
        <th>完成率</th>
        <th>合格率</th>
    </tr>
    <tr class="text-center">
        <td><span v-bind:class="ProductionDetailsJson.AssembleBeginTime==''?'':'cursor btn-link'">组装</span> <input id="detailsJson" value="@ViewBag.ProductionDetailsJson" style="display:none" /></td>
        <td>{{ProductionDetailsJson.AssembleBeginTime==""?'无记录':ProductionDetailsJson.AssembleBeginTime}}</td>
        <td>{{ProductionDetailsJson.AssembleEndTime}}</td>
        <td>{{ProductionDetailsJson.AssembleFinishTime}}</td>
        <td>{{newTime(ProductionDetailsJson.AssembleNewTime)}}</td>
        <td>{{ProductionDetailsJson.AssemblePassYieldCount=="0"?'':ProductionDetailsJson.AssemblePassYieldCount}}</td>
        <td>{{ProductionDetailsJson.AssembleFirstPassYieldCount=="0"?'':ProductionDetailsJson.AssembleFirstPassYieldCount}}</td>
        <td>{{ProductionDetailsJson.AssembleFirstPassYield_Rate==""?'':ProductionDetailsJson.AssembleFirstPassYield_Rate+'%'}}</td>
        <td>{{ProductionDetailsJson.AssembleFinisthRate==""?'':ProductionDetailsJson.AssembleFinisthRate+'%'}}</td>
        <td>{{ProductionDetailsJson.AssemblePassRate==""?'':ProductionDetailsJson.AssemblePassRate+'%'}}</td>
    </tr>
    <tr class="text-center">
        <td><span v-bind:class="ProductionDetailsJson.FinalQCBeginTime==''?'':'cursor btn-link'">FQC</span><input id="detailsJson" value="@ViewBag.ProductionDetailsJson" style="display:none" /></td>
        <td>{{ProductionDetailsJson.FinalQCBeginTime==""?'无记录':ProductionDetailsJson.FinalQCBeginTime}}</td>
        <td>{{ProductionDetailsJson.FinalQCEndTime}}</td>
        <td>{{ProductionDetailsJson.FinalQCFinishTime}}</td>
        <td>{{newTime(ProductionDetailsJson.FinalQCNewTime)}}</td>
        <td>{{ProductionDetailsJson.FinalQCPassYieldCount=="0"?'':ProductionDetailsJson.FinalQCPassYieldCount}}</td>
        <td>{{ProductionDetailsJson.FinalQCFirstPassYieldCount=="0"?'':ProductionDetailsJson.FinalQCFirstPassYieldCount}}</td>
        <td>{{ProductionDetailsJson.FinalQCFirstPassYield_Rate==""?'':ProductionDetailsJson.FinalQCFirstPassYield_Rate+'%'}}</td>
        <td>{{ProductionDetailsJson.FinalQCFinisthRate==""?'':ProductionDetailsJson.FinalQCFinisthRate+'%'}}</td>
        <td>{{ProductionDetailsJson.FinalQCPassRate==""?'':ProductionDetailsJson.FinalQCPassRate+'%'}}</td>
    </tr>
    <tr class="text-center">
        <td><span v-bind:class="ProductionDetailsJson.Burn_inBeginTime==''?'':'cursor btn-link'">老化</span></td>
        <td>{{ProductionDetailsJson.Burn_inBeginTime==""?'无记录':ProductionDetailsJson.Burn_inBeginTime}}</td>
        <td>{{ProductionDetailsJson.Burn_inEndTime}}</td>
        <td>{{ProductionDetailsJson.Burn_inFinishTime}}</td>
        <td>{{newTime(ProductionDetailsJson.Burn_inNewTime)}}</td>
        <td>{{ProductionDetailsJson.Burn_inPassYieldCount=="0"?'':ProductionDetailsJson.Burn_inPassYieldCount}}</td>
        <td>{{ProductionDetailsJson.Burn_inFirstPassYieldCount=="0"?'':ProductionDetailsJson.Burn_inFirstPassYieldCount}}</td>
        <td>{{ProductionDetailsJson.Burn_inFirstPassYield_Rate==""?'':ProductionDetailsJson.Burn_inFirstPassYield_Rate+'%'}}</td>
        <td>{{ProductionDetailsJson.Burn_inFinisthRate==""?'':ProductionDetailsJson.Burn_inFinisthRate+'%'}}</td>
        <td>{{ProductionDetailsJson.Burn_inPassRate==""?'':ProductionDetailsJson.Burn_inPassRate+'%'}}</td>
    </tr>
    <tr class="text-center">
        <td><span v-bind:class="ProductionDetailsJson.CalibrationBeginTime==''?'':'cursor btn-link'">校正</span></td>
        <td>{{ProductionDetailsJson.CalibrationBeginTime==""?'无记录':ProductionDetailsJson.CalibrationBeginTime}}</td>
        <td>{{ProductionDetailsJson.CalibrationEndTime}}</td>
        <td>{{ProductionDetailsJson.CalibrationFinishTime}}</td>
        <td>{{newTime(ProductionDetailsJson.CalibrationNewTime)}}</td>
        <td>{{ProductionDetailsJson.CalibrationPassYieldCount=="0"?'':ProductionDetailsJson.CalibrationPassYieldCount}}</td>
        <td>{{ProductionDetailsJson.CalibrationFirstPassYieldCount=="0"?'':ProductionDetailsJson.CalibrationFirstPassYieldCount}}</td>
        <td>{{ProductionDetailsJson.CalibrationFirstPassYield_Rate==""?'':ProductionDetailsJson.CalibrationFirstPassYield_Rate+'%'}}</td>
        <td>{{ProductionDetailsJson.CalibrationFinisthRate==""?'':ProductionDetailsJson.CalibrationFinisthRate+'%'}}</td>
        <td>{{ProductionDetailsJson.CalibrationPassRate==""?'':ProductionDetailsJson.CalibrationPassRate+'%'}}</td>
    </tr>
    <tr class="text-center">
        <td><span v-bind:class="ProductionDetailsJson.AppearanceBeginTime==''?'':'cursor btn-link'">包装</span></td>
        <td>{{ProductionDetailsJson.AppearanceBeginTime==""?'无记录':ProductionDetailsJson.AppearanceBeginTime}}</td>
        <td>{{ProductionDetailsJson.AppearanceEndTime}}</td>
        <td>{{ProductionDetailsJson.AppearanceFinishTime}}</td>
        <td>{{newTime(ProductionDetailsJson.AppearanceNewTime)}}</td>
        <td>{{ProductionDetailsJson.AppearancePassYieldCount=="0"?'':ProductionDetailsJson.AppearancePassYieldCount}}</td>
        <td>{{ProductionDetailsJson.AppearanceFirstPassYieldCount=="0"?'':ProductionDetailsJson.AppearanceFirstPassYieldCount}}</td>
        <td>{{ProductionDetailsJson.AppearanceFirstPassYield_Rate==""?'':ProductionDetailsJson.AppearanceFirstPassYield_Rate+'%'}}</td>
        <td>{{ProductionDetailsJson.AppearanceFinisthRate==""?'':ProductionDetailsJson.AppearanceFinisthRate+'%'}}</td>
        <td>{{ProductionDetailsJson.AppearancePassRate==""?'':ProductionDetailsJson.AppearancePassRate+'%'}}</td>
    </tr>
</table>
<hr />

@{ var order_in_Assemble_Record = ViewBag.order_in_Assemble_Record as List<JianHeMES.Models.Assemble>;
    var LineIdList = order_in_Assemble_Record.OrderBy(c => c.AssembleLineId).Select(c => c.AssembleLineId).Distinct().ToList();
    foreach (var i in LineIdList)
    {
        var line_record_list = order_in_Assemble_Record.Where(c => c.AssembleLineId == i).OrderBy(c => c.BoxBarCode).ToList();
        var line_record_barcode_list = line_record_list.Select(c => c.BoxBarCode).ToList();
        <div style="display:inline-block">
            <div style="text-align:center">组装PQC< @i >线清单：(@line_record_list.Count 个)</div>
            <div class="barcodeFrame">
                <ul>
                    @foreach (var item in line_record_list)
                    {
                        <li>@Html.RouteLink(item.BoxBarCode, "Default", new { Controller = "Assembles", Action = "Details", id = item.Id }, new { target = "_blank" })</li>
                    }
                </ul>
            </div>
        </div>
    }
    var FQCList = ViewBag.order_in_FQC_Record as List<JianHeMES.Models.FinalQC>;
    var nameList = FQCList.Select(c => c.FQCPrincipal).Distinct().ToList();
    foreach (var j in nameList)
    {
        var FQCPrincipalList = FQCList.Where(c => c.FQCPrincipal == j).ToList();
        <div style="display:inline-block">
            <div style="text-align:center">FQC操作员( @j )清单：(@FQCPrincipalList.Count 个)</div>
            <div class="barcodeFrame">
                <ul>
                    @foreach (var item in FQCPrincipalList)
                    {
                        <li>@Html.RouteLink(item.BarCodesNum, "Default", new { Controller = "FinalQCs", Action = "Details", id = item.Id }, new { target = "_blank" })</li>
                    }
                </ul>
            </div>
        </div>
    }

}
<hr />

<div class="row" id="app">
    <div class="col-md-3 form-group">
        @if (((JianHeMES.Models.Users)Session["User"]).Role == "经理" && ((JianHeMES.Models.Users)Session["User"]).Department == "PC" || ((JianHeMES.Models.Users)Session["User"]).Role == "PC计划员" || ((JianHeMES.Models.Users)Session["User"]).Role == "PC组长" || ViewBag.displaybarcode == true)
        {
            if (Model.BarCodeCreated != 1)
            {
               <span class="quanbutiaoma">
                   @Html.RouteLink("根据订单创建全部条码", "Default", new { Controller = "BarCodes", Action = "CreateBarCodes", id = Model.ID }, new { @class = "btn btn-default" })
               </span>
                <br /><br />
            }

            if (Model.BarCodeCreated != 1 && Model.Boxes > 0)
            {
                using (Html.BeginForm("CreateModuleGroupBarCodes", "BarCodes", FormMethod.Post, new { style = "display:inline-block" }))
                {
                    <span class="mozutiaoma">
                        <button class="btn btn-default btn-sm">创建模组条码</button>
                        @Html.TextBox("id", Model.ID, new { style = "display:none" })
                    </span>
                }
            }
            if (Model.ModulePieceBarCodeCreated != 1 && Model.Models > 0)
            {
                using (Html.BeginForm("CreateModulePieceBarCodes", "BarCodes", FormMethod.Post, new { style = "display:inline-block" }))
                {
                    <span class="mokuaitiaoma">
                        <button class="btn btn-default btn-sm">创建模块条码</button>
                        @Html.TextBox("id", Model.ID, new { style = "display:none" })
                    </span>
                }
            }
            <br />
            if (Model.PowerBarCodeCreated != 1 && Model.Powers > 0)
            {
                using (Html.BeginForm("CreatePowerBarCodes", "BarCodes", FormMethod.Post, new { style = "display:inline-block" }))
                {
                    <span class="dianyuantiaoma">
                        <button class="btn btn-default btn-sm">创建电源条码</button>
                        @Html.TextBox("id", Model.ID, new { style = "display:none" })
                    </span>
                }
            }
            if (Model.AdapterCardBarCodeCreated != 1 && Model.AdapterCard > 0)
            {
                using (Html.BeginForm("CreateAdapterCardBarCodes", "BarCodes", FormMethod.Post, new { style = "display:inline-block" }))
                {
                    <span class="zhuanjieka">
                        <button class="btn btn-default btn-sm">创建转接卡条码</button>
                        @Html.TextBox("id", Model.ID, new { style = "display:none" })
                    </span>
                }
                <br /><br />
            }

            <span class="xiugaidingdan">
                @Html.ActionLink("修改订单信息", "Edit", new { id = Model.ID }, new { @class = "btn btn-default", style = "display:inline-block" })
            </span>

            using (Html.BeginForm("DeleteOrderNum", "OrderMgms", FormMethod.Post, new { style = "display:inline-block" }))
            {
                <span class="shanchu">
                    @Html.TextBox("orderNum", Model.OrderNum, new { style = "display:none" })
                    <button class="btn btn-default">删除订单</button>
                </span>
            }
        }

        &nbsp; &nbsp;<br /><br />
        @Html.ActionLink("返回", "Index", new { @class = "btn btn-default" })
    </div>

    @*首件*@
    <div class="col-md-3 form-group border">
        @*组装首件*@
        @if (true)
        {
            if (true)
            {
                //组装首件
                <div>组装首件<span style="width:0;height:0;border:10px solid white;border-top-color:#d9ba23;border-bottom:none;float:left;margin:5px"></span></div>
                <div>
                    @if (Model.IsAssembleFirstSample == false)
                    {
                        <div v-show="changeAssemble">
                            <button class="btn btn-default btn-xs zuzhuangshoujian" v-on:click="changeAssemble=!changeAssemble">开始首件</button>
                        </div>
                        <div v-show="!changeAssemble">
                            <form action="/OrderMgms/AssembleSampleConvert" method="post">
                                <input type="hidden" value="@Model.ID" name="id" />
                                <select v-model="Assemble_DescriptionShow" class="btn btn-default btn-xs" style="margin:0 auto;display:inline-block;width:auto">
                                    <option value="">请选择</option>
                                    <option>OK</option>
                                    <option>NG</option>
                                </select>
                                <textarea v-show="false" cols="20" v-model.trim="Assemble_Description" name="AssembleSample_Description" rows="2" class="form-control"></textarea>
                                <button class="btn btn-default btn-xs" v-bind:disabled="Assemble_Description!=''?false:''">确认</button>
                                <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeAssemble=!changeAssemble">取消</button>
                            </form>
                        </div>
                    }
                    else if (Model.IsAssembleFirstSample == true)
                    {
                        if (Model.AssembleFirstSample_Description == "OK")
                        {
                            <p class="text-success" style="padding:0 5px">状态：@Model.AssembleFirstSample_Description</p>
                            <div>
                                <button class="btn btn-warning btn-xs" v-on:click="selectFile_Assemble">选择文件</button>
                                <button class="btn btn-primary btn-xs" v-on:click="postFile_Assemble">上传</button>
                                <p id="filecontent_Assemble" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                            </div>
                            <button class="btn btn-default btn-xs" v-on:click="imgShow('showIMG_Assemble')" v-show="( '@ViewBag.Assemble_Picture'=='Exists')?true:false">显示组装首件照片</button>
                            <button v-on:click="showModal_Assemble" class="btn btn-default  btn-xs" v-show="('@ViewBag.Assemble_PDf'=='Exists')?true:false">查看组装首件PDF</button>
                            <button id="showModal_Assemble" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                        }
                        else if (Model.AssembleFirstSample_Description == "NG")
                        {
                            <div v-show="changeAssemble">
                                <span class="text-warning" style="padding:0 5px">当前状态：@Model.AssembleFirstSample_Description</span>&nbsp;&nbsp;&nbsp;
                                <button class="btn btn-default btn-xs" v-on:click="changeAssemble=!changeAssemble">修改首件进度</button>
                                <br />
                                <div>
                                    <button class="btn btn-warning btn-xs" v-on:click="selectFile_Assemble">选择文件</button>
                                    <button class="btn btn-primary btn-xs" v-on:click="postFile_Assemble">上传</button>
                                    <p id="filecontent_Assemble" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                                </div>
                                <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_Assemble')" v-show="( '@ViewBag.Assemble_Picture'=='Exists')?true:false">显示组装首件照片</button>
                                <button v-on:click="showModal_Assemble" class="btn btn-default  btn-xs" v-show="('@ViewBag.Assemble_PDf'=='Exists')?true:false">查看组装首件PDF</button>
                                <button id="showModal_Assemble" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                            </div>
                            <div v-show="!changeAssemble">
                                <form action="/OrderMgms/AssembleSampleConvert" method="post">
                                    <input type="hidden" value="@Model.ID" name="id" />
                                    <select v-model="Assemble_DescriptionShow" class="btn btn-default btn-xs" style="margin:0 auto;display:inline-block;width:auto">
                                        <option value="">请选择</option>
                                        <option>OK</option>
                                        <option>NG</option>
                                    </select>
                                    <textarea v-show="false" cols="20" v-model.trim="Assemble_Description" name="AssembleSample_Description" rows="2" class="form-control"></textarea>
                                    <button class="btn btn-default btn-xs" v-bind:disabled="Assemble_Description!=''?false:''">确认</button>
                                    <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeAssemble=!changeAssemble">取消</button>
                                </form>
                            </div>
                        }
                    }
                </div>
                <hr />
            }
        }
        @*老化首件*@
        @if (true)
        {
            if (true)
            {
                //老化首件
                <div>老化首件<span style="width:0;height:0;border:10px solid white;border-top-color:#b118bd;border-bottom:none;float:left;margin:5px"></span></div>
                <div>
                    @if (Model.IsBurnInFirstSample == false)
                    {
                        <div v-show="changeBurnIn">
                            <button class="btn btn-default btn-xs laohuashoujian" v-on:click="changeBurnIn=!changeBurnIn">开始首件</button>
                        </div>
                        <div v-show="!changeBurnIn">
                            <form action="/OrderMgms/BurnInSampleConvert" method="post">
                                <input type="hidden" value="@Model.ID" name="id" />
                                <select v-model="BurnIn_DescriptionShow" class="btn btn-default btn-xs" style="margin:0 auto;display:inline-block;width:auto">
                                    <option value="">请选择</option>
                                    <option>OK</option>
                                    <option>NG</option>
                                </select>
                                <textarea v-show="false" cols="20" v-model.trim="BurnIn_Description" name="BurnIn_Description" rows="2" class="form-control"></textarea>
                                <button class="btn btn-default btn-xs" v-bind:disabled="BurnIn_Description!=''?false:''">确认</button>
                                <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeBurnIn=!changeBurnIn">取消</button>
                            </form>
                        </div>
                    }
                    else if (Model.IsBurnInFirstSample == true)
                    {
                        if (Model.BurnInFirstSample_Description == "OK")
                        {
                            <p class="text-success" style="padding:0 5px">状态：@Model.BurnInFirstSample_Description</p>
                            <div>
                                <button class="btn btn-warning btn-xs" v-on:click="selectFile_BurnIn">选择文件</button>
                                <button class="btn btn-primary btn-xs" v-on:click="postFile_BurnIn">上传</button>
                                <p id="filecontent_BurnIn" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                            </div>
                            <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_BurnIn')" v-show="( '@ViewBag.BurnIn_Picture'=='Exists')?true:false">显示老化首件照片</button>
                            <button v-on:click="showModal_BurnIn" class="btn btn-default  btn-xs" v-show="('@ViewBag.BurnIn_PDf'=='Exists')?true:false">查看老化首件PDF</button>
                            <button id="showModal_BurnIn" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                        }
                        else if (Model.BurnInFirstSample_Description == "NG")
                        {
                            <div v-show="changeBurnIn">
                                <span class="text-warning" style="padding:0 5px">当前状态：@Model.BurnInFirstSample_Description</span>&nbsp;&nbsp;&nbsp;
                                <button class="btn btn-default btn-xs" v-on:click="changeBurnIn=!changeBurnIn">修改首件进度</button>
                                <br />
                                <div>
                                    <button class="btn btn-warning btn-xs" v-on:click="selectFile_BurnIn">选择文件</button>
                                    <button class="btn btn-primary btn-xs" v-on:click="postFile_BurnIn">上传</button>
                                    <p id="filecontent_BurnIn" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                                </div>
                                <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_BurnIn')" v-show="( '@ViewBag.BurnIn_Picture'=='Exists')?true:false">显示老化首件照片</button>
                                <button v-on:click="showModal_BurnIn" class="btn btn-default  btn-xs" v-show="('@ViewBag.BurnIn_PDf'=='Exists')?true:false">查看老化首件PDF</button>
                                <button id="showModal_BurnIn" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                            </div>
                            <div v-show="!changeBurnIn">
                                <form action="/OrderMgms/BurnInSampleConvert" method="post">
                                    <input type="hidden" value="@Model.ID" name="id" />
                                    <select v-model="BurnIn_DescriptionShow" class="btn btn-default btn-xs" style="margin:0 auto;display:inline-block;width:auto">
                                        <option value="">请选择</option>
                                        <option>OK</option>
                                        <option>NG</option>
                                    </select>
                                    <textarea v-show="false" cols="20" v-model.trim="BurnIn_Description" name="BurnIn_Description" rows="2" class="form-control"></textarea>
                                    <button class="btn btn-default btn-xs" v-bind:disabled="BurnIn_Description!=''?false:''">确认</button>
                                    <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeBurnIn=!changeBurnIn">取消</button>
                                </form>
                            </div>
                        }
                    }
                </div>
                <hr />
            }
        }
        @*包装首件*@
        @if (true)
        {
            if (true)
            {
                //包装首件
                <div>包装首件<span style="width:0;height:0;border:10px solid white;border-top-color:#1922c1;border-bottom:none;float:left;margin:5px"></span></div>
                <div>
                    @if (Model.IsAppearanceFirstSample == false)
                    {
                        <div v-show="changeAppearance">
                            <button class="btn btn-default btn-xs baozhuangshoujian" v-on:click="changeAppearance=!changeAppearance">开始首件</button>
                        </div>
                        <div v-show="!changeAppearance">
                            <form action="/OrderMgms/AppearanceSampleConvert" method="post">
                                <input type="hidden" value="@Model.ID" name="id" />
                                <select v-model="Appearance_DescriptionShow" class="btn btn-default btn-xs" style="margin:0 auto;display:inline-block;width:auto">
                                    <option value="">请选择</option>
                                    <option>OK</option>
                                    <option>NG</option>
                                </select>
                                <textarea v-show="false" cols="20" v-model.trim="Appearance_Description" name="Appearance_Description" rows="2" class="form-control"></textarea>
                                <button class="btn btn-default btn-xs" v-bind:disabled="Appearance_Description!=''?false:''">确认</button>
                                <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeAppearance=!changeAppearance">取消</button>
                            </form>
                        </div>
                    }
                    else if (Model.IsAppearanceFirstSample == true)
                    {
                        if (Model.AppearanceFirstSample_Description == "OK")
                        {
                            <p class="text-success" style="padding:0 5px">状态：@Model.AppearanceFirstSample_Description</p>
                            <div>
                                <button class="btn btn-warning btn-xs" v-on:click="selectFile_Appearance">选择文件</button>
                                <button class="btn btn-primary btn-xs" v-on:click="postFile_Appearance">上传</button>
                                <p id="filecontent_Appearance" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                            </div>
                            <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_Appearance')" v-show="( '@ViewBag.Appearance_Picture'=='Exists')?true:false">显示包装首件照片</button>
                            <button v-on:click="showModal_Appearance" class="btn btn-default  btn-xs" v-show="('@ViewBag.Appearance_PDf'=='Exists')?true:false">查看包装首件PDF</button>
                            <button id="showModal_Appearance" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                        }
                        else if (Model.AppearanceFirstSample_Description == "NG")
                        {
                            <div v-show="changeAppearance">
                                <span class="text-warning" style="padding:0 5px">当前状态：@Model.AppearanceFirstSample_Description</span>&nbsp;&nbsp;&nbsp;
                                <button class="btn btn-default btn-xs" v-on:click="changeAppearance=!changeAppearance">修改首件进度</button>
                                <br />
                                <div>
                                    <button class="btn btn-warning btn-xs" v-on:click="selectFile_Appearance">选择文件</button>
                                    <button class="btn btn-primary btn-xs" v-on:click="postFile_Appearance">上传</button>
                                    <p id="filecontent_Appearance" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                                </div>
                                <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_Appearance')" v-show="( '@ViewBag.Appearance_Picture'=='Exists')?true:false">显示包装首件照片</button>
                                <button v-on:click="showModal_Appearance" class="btn btn-default  btn-xs" v-show="('@ViewBag.Appearance_PDf'=='Exists')?true:false">查看包装首件PDF</button>
                                <button id="showModal_Appearance" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                            </div>
                            <div v-show="!changeAppearance">
                                <form action="/OrderMgms/AppearanceSampleConvert" method="post">
                                    <input type="hidden" value="@Model.ID" name="id" />
                                    <select v-model="Appearance_DescriptionShow" class="btn btn-default btn-xs" style="margin:0 auto;display:inline-block;width:auto">
                                        <option value="">请选择</option>
                                        <option>OK</option>
                                        <option>NG</option>
                                    </select>
                                    <textarea v-show="false" cols="20" v-model.trim="Appearance_Description" name="Appearance_Description" rows="2" class="form-control"></textarea>
                                    <button class="btn btn-default btn-xs" v-bind:disabled="Appearance_Description!=''?false:''">确认</button>
                                    <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeAppearance=!changeAppearance">取消</button>
                                </form>
                            </div>
                        }
                    }
                </div>
            }
        }
    </div>

    @*异常订单*@
    <div class="col-md-3 form-group border">
        @*组装异常订单*@
        @if (true)
        {
            if (true)
            {
                //组装异常订单
                <div>组装异常订单<span style="width:0;height:0;border:10px solid white;border-top-color:red;border-bottom:none;float:left;margin:5px"></span></div>
                <div>
                    @if (Model.IsAssembleAbnormal == false)
                    {
                        <div v-show="changeAssembleAbnormal">
                            <button class="btn btn-default btn-xs yichangdingdan" v-on:click="changeAssembleAbnormal=!changeAssembleAbnormal">转为组装异常订单</button>
                        </div>
                        <div v-show="!changeAssembleAbnormal">
                            <form action="/OrderMgms/AssembleAbnormalOrderConvert" method="post">
                                <p class="text-success">请选择转为组装异常订单原因</p>
                                <input type="hidden" value="@Model.ID" name="id" />
                                <select v-model="AssembleAbnormal_DescriptionShow" class="form-control text-center" style="margin:0 auto">
                                    <option value="">请选择</option>
                                    <option>老化时间</option>
                                    <option>墨色</option>
                                    <option>波浪形</option>
                                    <option>偏色</option>
                                    <option>现场校正</option>
                                    <option>暗斑</option>
                                    <option>网格状</option>
                                    <option>底壳柱子断</option>
                                    <option>面罩鼓起</option>
                                    <option>面罩变形</option>
                                    <option>平整度</option>
                                    <option>箱门干涉</option>
                                    <option>螺丝花</option>
                                    <option>其他</option>
                                </select>
                                <textarea v-show="AssembleAbnormal_DescriptionShow=='其他'" cols="20" v-model.trim="AssembleAbnormal_Description" name="AssembleAbnormalOrder_Description" rows="2" class="form-control"></textarea>
                                <button class="btn btn-default btn-xs" v-bind:disabled="AssembleAbnormal_Description!=''?false:''">确认转为组装异常订单</button>
                                <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeAssembleAbnormal=!changeAssembleAbnormal">取消</button>
                            </form>
                        </div>
                    }
                    @if (Model.IsAssembleAbnormal == true)
                    {
                        <button class="btn btn-warning btn-xs" v-on:click="selectFile_AssembleAbnormal">选择文件</button>
                        <span>No.:<input class="form-control NoVal" v-model="AssembleAppNUM" onKeyUp="value = value.replace(/[^A-Za-z0-9]/g, '').toUpperCase()" placeholder="请填写No." /></span>
                        <button class="btn btn-primary btn-xs" v-on:click="postFile_AssembleAbnormal" @*v-bind:disabled="AssembleAppNUM==''"*@>上传</button>
                        <p id="filecontent_AssembleAbnormal" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                        <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_AssembleAbnormal')" v-show="( '@ViewBag.AssembleAbnormalOrder_Picture'=='Exists')?true:false">显示组装异常单照片</button>
                        <button v-on:click="showModal_AssembleAbnormal" class="btn btn-default  btn-xs" v-show="('@ViewBag.AssembleAbnormalOrder_PDf'=='Exists')?true:false">查看组装异常PDF文档</button>
                        <button id="showModal_AssembleAbnormal" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                    }
                </div>
                <hr />
            }
        }
        @*老化异常订单*@
        @if (true)
        {
            if (true)
            {
                //老化异常订单
                <div>老化异常订单<span style="width:0;height:0;border:10px solid white;border-top-color:red;border-bottom:none;float:left;margin:5px"></span></div>
                <div>
                    @if (Model.IsBurninAbnormal == false)
                    {
                        <div v-show="changeBurnInAbnormal">
                            <button class="btn btn-default btn-xs yichangdingdan" v-on:click="changeBurnInAbnormal=!changeBurnInAbnormal">转为老化异常订单</button>
                        </div>
                        <div v-show="!changeBurnInAbnormal">
                            <form action="/OrderMgms/BurnInAbnormalOrderConvert" method="post">
                                <p class="text-success">请选择转为老化异常订单原因</p>
                                <input type="hidden" value="@Model.ID" name="id" />
                                <select v-model="BurnInAbnormal_DescriptionShow" class="form-control text-center" style="margin:0 auto">
                                    <option value="">请选择</option>
                                    <option>老化时间</option>
                                    <option>墨色</option>
                                    <option>波浪形</option>
                                    <option>偏色</option>
                                    <option>现场校正</option>
                                    <option>暗斑</option>
                                    <option>网格状</option>
                                    <option>底壳柱子断</option>
                                    <option>面罩鼓起</option>
                                    <option>面罩变形</option>
                                    <option>平整度</option>
                                    <option>箱门干涉</option>
                                    <option>螺丝花</option>
                                    <option>其他</option>
                                </select>
                                <textarea v-show="BurnInAbnormal_DescriptionShow=='其他'" cols="20" v-model.trim="BurnInAbnormal_Description" name="BurnInAbnormalOrder_Description" rows="2" class="form-control"></textarea>
                                <button class="btn btn-default btn-xs" v-bind:disabled="BurnInAbnormal_Description!=''?false:''">确认转为老化异常订单</button>
                                <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeBurnInAbnormal=!changeBurnInAbnormal">取消</button>
                            </form>
                        </div>
                    }
                    @if (Model.IsBurninAbnormal == true)
                    {
                        <button class="btn btn-warning btn-xs" v-on:click="selectFile_BurnInAbnormal">选择文件</button>
                        <span>No.:<input class="form-control NoVal" v-model="BurnInAppNUM" onKeyUp="value = value.replace(/[^A-Za-z0-9]/g, '').toUpperCase()" placeholder="请填写No." /></span>
                        <button class="btn btn-primary btn-xs" v-on:click="postFile_BurnInAbnormal" @*v-bind:disabled="BurnInAppNUM==''"*@>上传</button>
                        <p id="filecontent_BurnInAbnormal" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                        <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_BurnInAbnormal')" v-show="( '@ViewBag.BurnInAbnormalOrder_Picture'=='Exists')?true:false">显示老化异常单照片</button>
                        <button v-on:click="showModal_BurnInAbnormal" class="btn btn-default  btn-xs" v-show="('@ViewBag.BurnInAbnormalOrder_PDf'=='Exists')?true:false">查看老化异常PDF文档</button>
                        <button id="showModal_BurnInAbnormal" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                    }
                </div>
                <hr />
            }
        }
        @*包装异常订单*@
        @if (true)
        {
            if (true)
            {
                //包装异常订单
                <div>包装异常订单<span style="width:0;height:0;border:10px solid white;border-top-color:red;border-bottom:none;float:left;margin:5px"></span></div>
                <div>
                    @if (Model.IsAppearanceAbnormal == false)
                    {
                        <div v-show="changeAppearanceAbnormal">
                            <button class="btn btn-default btn-xs yichangdingdan" v-on:click="changeAppearanceAbnormal=!changeAppearanceAbnormal">转为包装异常订单</button>
                        </div>
                        <div v-show="!changeAppearanceAbnormal">
                            <form action="/OrderMgms/AppearanceAbnormalOrderConvert" method="post">
                                <p class="text-success">请选择转为包装异常订单原因</p>
                                <input type="hidden" value="@Model.ID" name="id" />
                                <select v-model="AppearanceAbnormal_DescriptionShow" class="form-control text-center" style="margin:0 auto">
                                    <option value="">请选择</option>
                                    <option>老化时间</option>
                                    <option>墨色</option>
                                    <option>波浪形</option>
                                    <option>偏色</option>
                                    <option>现场校正</option>
                                    <option>暗斑</option>
                                    <option>网格状</option>
                                    <option>底壳柱子断</option>
                                    <option>面罩鼓起</option>
                                    <option>面罩变形</option>
                                    <option>平整度</option>
                                    <option>箱门干涉</option>
                                    <option>螺丝花</option>
                                    <option>其他</option>
                                </select>
                                <textarea v-show="AppearanceAbnormal_DescriptionShow=='其他'" cols="20" v-model.trim="AppearanceAbnormal_Description" name="AppearanceAbnormalOrder_Description" rows="2" class="form-control"></textarea>
                                <button class="btn btn-default btn-xs" v-bind:disabled="AppearanceAbnormal_Description!=''?false:''">确认转为包装异常订单</button>
                                <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeAppearanceAbnormal=!changeAppearanceAbnormal">取消</button>
                            </form>
                        </div>
                    }
                    @if (Model.IsAppearanceAbnormal == true)
                    {
                        <button class="btn btn-warning btn-xs" v-on:click="selectFile_AppearanceAbnormal">选择文件</button>
                        <span>No.:<input class="form-control NoVal" v-model="AppearanceAppNUM" onKeyUp="value = value.replace(/[^A-Za-z0-9]/g, '').toUpperCase()" placeholder="请填写No." /></span>
                        <button class="btn btn-primary btn-xs" v-on:click="postFile_AppearanceAbnormal" @*v-bind:disabled="AppearanceAppNUM==''"*@>上传</button>
                        <p id="filecontent_AppearanceAbnormal" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                        <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_AppearanceAbnormal')" v-show="( '@ViewBag.AppearanceAbnormalOrder_Picture'=='Exists')?true:false">显示包装异常单照片</button>
                        <button v-on:click="showModal_AppearanceAbnormal" class="btn btn-default  btn-xs" v-show="('@ViewBag.AppearanceAbnormalOrder_PDf'=='Exists')?true:false">查看包装异常PDF文档</button>
                        <button id="showModal_AppearanceAbnormal" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                    }
                </div>
            }
        }
    </div>
    @*订单*@
    <div class="col-md-3 form-group border">
        @*特采订单*@
        @if (true)
        {
            if (true)
            {
                //特采订单
                <div class="tecai">特采订单<span style="width:0;height:0;border:10px solid white;border-top-color:#398000;border-bottom:none;float:left;margin:5px"></span></div>
                <div class="tecai">
                    @if (Model.IsAOD == false)
                    {
                        <div v-show="changeAOD">
                            <button class="btn btn-default btn-xs" v-on:click="changeAOD=!changeAOD">转为特采订单</button>
                        </div>
                        <div v-show="!changeAOD">
                            <form action="/OrderMgms/AODConvert" method="post">
                                <p class="text-success">请选择转为特采订单原因</p>
                                <input type="hidden" value="@Model.ID" name="id" />
                                <select v-model="AOD_DescriptionShow" class="form-control text-center" style="margin:0 auto">
                                    <option value="">请选择</option>
                                    <option>老化时间</option>
                                    <option>墨色</option>
                                    <option>波浪形</option>
                                    <option>偏色</option>
                                    <option>现场校正</option>
                                    <option>暗斑</option>
                                    <option>网格状</option>
                                    <option>底壳柱子断</option>
                                    <option>面罩鼓起</option>
                                    <option>面罩变形</option>
                                    <option>平整度</option>
                                    <option>箱门干涉</option>
                                    <option>螺丝花</option>
                                    <option>其他</option>
                                </select>
                                <textarea v-show="AOD_DescriptionShow=='其他'" cols="20" v-model.trim="AOD_Description" name="AOD_Description" rows="2" class="form-control"></textarea>
                                <button class="btn btn-default btn-xs" v-bind:disabled="AOD_Description!=''?false:''">确认转为特采订单</button>
                                <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeAOD=!changeAOD">取消</button>
                            </form>
                        </div>
                    }
                    @if (Model.IsAOD == true)
                    {
                        <button class="btn btn-warning btn-xs" v-on:click="selectFile_AOD">选择文件</button>
                        <button class="btn btn-primary btn-xs" v-on:click="postFile_AOD">上传</button>
                        <p id="filecontent_AOD" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                        <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_AOD')" v-show="( '@ViewBag.Picture'=='Exists')?true:false">显示特采单照片</button>
                        <button v-on:click="showModal_AOD" class="btn btn-default  btn-xs" v-show="('@ViewBag.PDf'=='Exists')?true:false">查看特采PDF文档</button>
                        <button id="showModal_AOD" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                        @*<div class="btn btn-default" v-show="('@ViewBag.PDf'=='Exists')?true:false">
                                @Html.ActionLink("直接查看pdf文档", "preview_pdf", new { ordernum = Model.OrderNum }, new { Target = "_blank" })
                            </div>*@
                    }
                </div>
                <hr />
            }
        }
        @*异常订单*@
        @*@if (((JianHeMES.Models.Users)Session["User"]).UserName == "李晓明" || ((JianHeMES.Models.Users)Session["User"]).UserName == "钟少发" || ((JianHeMES.Models.Users)Session["User"]).UserName == "任文成" || ((JianHeMES.Models.Users)Session["User"]).UserName == "文凌" || ((JianHeMES.Models.Users)Session["User"]).UserName == "龙超" || ((JianHeMES.Models.Users)Session["User"]).UserName == "梁灿强" || ((JianHeMES.Models.Users)Session["User"]).UserName == "邓超群" || ((JianHeMES.Models.Users)Session["User"]).UserName == "胡华渲" || ((JianHeMES.Models.Users)Session["User"]).UserName == "莫炽源" || ((JianHeMES.Models.Users)Session["User"]).UserName == "刘少辉" || ((JianHeMES.Models.Users)Session["User"]).UserName == "刘宏龙" || ((JianHeMES.Models.Users)Session["User"]).Role == "PC计划员" || ViewBag.YCorder == true)
        {
            if (Model.BarCodeCreated == 1)
            {
                //异常订单
                <div>异常订单<span style="width:0;height:0;border:10px solid white;border-top-color:red;border-bottom:none;float:left;margin:5px"></span></div>
                <div>
                    @if (Model.IsAbnormalOrder == false)
                    {
                        <div v-show="changeAbnormalOrder">
                            <button class="btn btn-default btn-xs" v-on:click="changeAbnormalOrder=!changeAbnormalOrder">转为异常订单</button>
                        </div>
                        <div v-show="!changeAbnormalOrder">
                            <form action="/OrderMgms/AbnormalOrderConvert" method="post">
                                <p class="text-success">请选择转为异常订单原因</p>
                                <input type="hidden" value="@Model.ID" name="id" />
                                <select v-model="AbnormalOrder_DescriptionShow" class="form-control text-center btn-group-xs xs" style="margin:0 auto">
                                    <option value="">请选择</option>
                                    <option>老化时间</option>
                                    <option>墨色</option>
                                    <option>波浪形</option>
                                    <option>偏色</option>
                                    <option>现场校正</option>
                                    <option>暗斑</option>
                                    <option>网格状</option>
                                    <option>底壳柱子断</option>
                                    <option>面罩鼓起</option>
                                    <option>面罩变形</option>
                                    <option>平整度</option>
                                    <option>箱门干涉</option>
                                    <option>螺丝花</option>
                                    <option>其他</option>
                                </select>
                                <textarea v-show="AbnormalOrder_DescriptionShow=='其他'" cols="20" v-model.trim="AbnormalOrder_Description" name="AbnormalOrder_Description" rows="2" class="form-control"></textarea>
                                <button class="btn btn-default btn-xs" v-bind:disabled="AbnormalOrder_Description!=''?false:''">确认转为异常订单</button>
                                <button class="btn btn-default btn-xs" v-on:click.stop.prevent="changeAbnormalOrder=!changeAbnormalOrder">取消</button>
                            </form>
                        </div>
                    }
                    @if (Model.IsAbnormalOrder == true)
                    {
                        <button class="btn btn-warning btn-xs" v-on:click="selectFile_Abnormal">选择文件</button>
                        <button class="btn btn-primary btn-xs" v-on:click="postFile_Abnormal">上传</button>
                        <p id="filecontent_Abnormal" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                        <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_Abnormal')" v-show="( '@ViewBag.AbnormalOrder_Picture'=='Exists')?true:false">显示异常单照片</button>
                        <button v-on:click="showModal_Abnormal" class="btn btn-default  btn-xs" v-show="('@ViewBag.AbnormalOrder_PDf'=='Exists')?true:false">查看异常PDF文档</button>
                        <button id="showModal_Abnormal" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
                    }
                </div>
                <hr />
            }
        }*@
        @*小样单*@
        @if (Model.HandSampleScedule == "进行中" || Model.HandSampleScedule == "待产" || Model.HandSampleScedule == "完成")
        {
            if (((JianHeMES.Models.Users)Session["User"]).Role == "小样调试员" || ViewBag.XYorder == true)
            {
                <div>小样订单<span style="width:0;height:0;border:10px solid white;border-top-color:#0078ff ;border-bottom:none;float:left;margin:5px"></span></div>
                <button class="btn btn-warning btn-xs" v-on:click="selectFile_Sample">选择文件</button>
                <button class="btn btn-primary btn-xs" v-on:click="postFile_Sample">上传</button>
                <p id="filecontent_Sample" class="text-primary" style="margin-left:10px;font-size:14px;margin:0"></p>
                <button class="btn btn-default  btn-xs" v-on:click="imgShow('showIMG_Sample')" v-show="( '@ViewBag.SmallSample_Picture'=='Exists')?true:false">显示小样单照片</button>
                <button v-on:click="showModal_Sample" class="btn btn-default  btn-xs" v-show="('@ViewBag.SmallSample_PDf'=='Exists')?true:false">查看小样PDF文档</button>
                <button id="showModal_Sample" class="btn btn-default btn-xs hidden" data-toggle="modal" data-target="#myModal"></button>
            }
        }
    </div>

    <div class="col-md-12 form-group">
        <div class="row text-center" v-show="previewIMG">
            <p class="text-info">待上传图片预览</p>
            <img src="" id="imgPreview" style="width:40%;" alt="只能预览图片文件..." />
            <br />
            <hr />
        </div>
        @* 特采订单 *@
        @if (Model.BarCodeCreated == 1 && Model.IsAOD == true)
        {
            <div class="row text-center" v-show="showIMG_AOD">
                <h4>特采订单已存在图片</h4>
                @if (ViewBag.jpgjson != null)
                {
                    foreach (var it in ViewBag.jpgjson)
                    {
                        <img src="/MES_Data/AOD_Files/@Model.OrderNum/@it.Value" style="width:80%;" /><br /><br />
                    }
                }
            </div>
        }
        @* 异常订单 *@
        @*@if (Model.BarCodeCreated == 1 && Model.IsAbnormalOrder == true)
        {
            <div class="row text-center" v-show="showIMG_Abnormal">
                <h4>异常订单已存在图片</h4>
                @if (ViewBag.AbnormalOrder_jpgjson != null)
                {
                    foreach (var it in ViewBag.AbnormalOrder_jpgjson)
                    {
                        <img src="/MES_Data/AbnormalOrder_Files/@Model.OrderNum/@it.Value" style="width:80%;" /><br /><br />
                    }
                }
            </div>
        }*@
        @* 小样单 *@
        @if (Model.HandSampleScedule == "进行中" || Model.HandSampleScedule == "待产" || Model.HandSampleScedule == "完成")
        {
            <div class="row text-center" v-show="showIMG_Sample">
                <h4>小样订单已存在图片</h4>
                @if (ViewBag.SmallSample_jpgjson != null)
                {
                    foreach (var it in ViewBag.SmallSample_jpgjson)
                    {
                        <img src="/MES_Data/SmallSample_Files/@Model.OrderNum/@it.Value" style="width:80%;" /><br /><br />
                    }
                }
            </div>
        }
        @* 组装异常订单 *@
        @if (Model.BarCodeCreated == 1 && Model.IsAssembleAbnormal == true)
        {
            <div class="row text-center" v-show="showIMG_AssembleAbnormal">
                <h4>组装异常订单已存在图片</h4>
                @if (ViewBag.AssembleAbnormalOrder_jpgjson != null)
                {
                    foreach (var it in ViewBag.AssembleAbnormalOrder_jpgjson)
                    {
                        <img src="/MES_Data/AssembleAbnormalOrder_Files/@Model.OrderNum/@it.Value" style="width:80%;" /><br /><br />
                    }
                }
            </div>
        }
        @* 老化异常订单 *@
        @if (Model.BarCodeCreated == 1 && Model.IsBurninAbnormal == true)
        {
            <div class="row text-center" v-show="showIMG_BurnInAbnormal">
                <h4>老化异常订单已存在图片</h4>
                @if (ViewBag.BurnInAbnormalOrder_jpgjson != null)
                {
                    foreach (var it in ViewBag.BurnInAbnormalOrder_jpgjson)
                    {
                        <img src="/MES_Data/BurnInAbnormalOrder_Files/@Model.OrderNum/@it.Value" style="width:80%;" /><br /><br />
                    }
                }
            </div>
        }
        @* 包装异常订单 *@
        @if (Model.BarCodeCreated == 1 && Model.IsAppearanceAbnormal == true)
        {
            <div class="row text-center" v-show="showIMG_AppearanceAbnormal">
                <h4>包装异常订单已存在图片</h4>
                @if (ViewBag.AppearanceAbnormalOrder_jpgjson != null)
                {
                    foreach (var it in ViewBag.AppearanceAbnormalOrder_jpgjson)
                    {
                        <img src="/MES_Data/AppearanceAbnormalOrder_Files/@Model.OrderNum/@it.Value" style="width:80%;" /><br /><br />
                    }
                }
            </div>
        }
        @* 组装首件 *@
        @if (Model.BarCodeCreated == 1 && Model.IsAssembleFirstSample == true)
        {
            <div class="row text-center" v-show="showIMG_Assemble">
                <h4>组装首件已存在图片</h4>
                @if (ViewBag.Assemble_jpgjson != null)
                {
                    foreach (var it in ViewBag.Assemble_jpgjson)
                    {
                        <img src="/MES_Data/AssembleSample_Files/@Model.OrderNum/@it.Value" style="width:80%;" /><br /><br />
                    }
                }
            </div>
        }
        @* 老化首件 *@
        @if (Model.BarCodeCreated == 1 && Model.IsBurnInFirstSample == true)
        {
            <div class="row text-center" v-show="showIMG_BurnIn">
                <h4>老化首件已存在图片</h4>
                @if (ViewBag.BurnIn_jpgjson != null)
                {
                    foreach (var it in ViewBag.BurnIn_jpgjson)
                    {
                        <img src="/MES_Data/BurnInSample_Files/@Model.OrderNum/@it.Value" style="width:80%;" /><br /><br />
                    }
                }
            </div>
        }
        @* 包装首件 *@
        @if (Model.BarCodeCreated == 1 && Model.IsAppearanceFirstSample == true)
        {
            <div class="row text-center" v-show="showIMG_Appearance">
                <h4>包装首件已存在图片</h4>
                @if (ViewBag.Appearance_jpgjson != null)
                {
                    foreach (var it in ViewBag.Appearance_jpgjson)
                    {
                        <img src="/MES_Data/AppearanceSample_Files/@Model.OrderNum/@it.Value" style="width:80%;" /><br /><br />
                    }
                }
            </div>
        }
    </div>
</div>

<div class="row">
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="padding:10px">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title text-center" id="myModalLabel">
                        #
                    </h4>
                </div>
                <div class="modal-body text-center" style="padding:0px">
                    <iframe id="pdfIframe" name="pdfIframe" src="" style="width:100%;"></iframe>
                </div>
            </div>
        </div>
    </div>
</div>
<form id="setForm" action="" method="post" target="_blank" style="display:none">
    @Html.AntiForgeryToken()
    <input type="text" name="orderNum" value="@Model.OrderNum" id="formOrderNum" />
    <input type="text" name="BoxBarCode" value="" />
    <input type="text" name="PQCNormal" value="" />
    <input type="text" name="Remark" value="" />
    <input type="text" name="repetition" value="" />
    <input type="text" name="FQCNormal" value="" />
    <input type="text" name="OQCNormal" value="" />
    <input type="text" name="FinishStatus" value="" />
    <input type="text" name="SearchString" value="" />
    <input type="text" name="moduleGroupNum" value="" />
    <input type="text" name="barcodenum" value="" />
    <input type="text" name="AppearancesNormal" value="" />
</form>
<div id="setA"></div>
@* 特采订单 *@
<form id="uploadForm_AOD" enctype="multipart/form-data" method="post" style="display:none">
    <input type="hidden" value="@Model.ID" name="id" />
    <input type="text" name="ordernum" value="@Model.OrderNum" class="hidden" />
    <input type="file" id="uploadfile_AOD" name="uploadfile" accept="image/jpeg,application/pdf" />
</form>
@* 异常订单 *@
@*<form id="uploadForm_Abnormal" enctype="multipart/form-data" method="post" style="display:none">
    <input type="hidden" value="@Model.ID" name="id" />
    <input type="text" name="ordernum" value="@Model.OrderNum" class="hidden" />
    <input type="file" id="uploadfile_Abnormal" name="uploadAbnormalOrder" accept="image/jpeg,application/pdf" />
</form>*@
@* 小样单 *@
<form id="uploadForm_Sample" action="/OrderMgms/UploadSmallSample" enctype="multipart/form-data" method="post" style="display:none">
    <input type="hidden" value="@Model.ID" name="id" />
    <input type="text" name="ordernum" value="@Model.OrderNum" class="hidden" />
    <input type="file" id="uploadfile_Sample" name="uploadfile" accept="image/jpeg,application/pdf" />
</form>
@* 组装异常订单 *@
<form id="uploadForm_AssembleAbnormal" enctype="multipart/form-data" method="post" style="display:none">
    <input type="hidden" value="@Model.ID" name="id" />
    <input type="text" name="ordernum" value="@Model.OrderNum" class="hidden" />
    <input type="text" id="AssembleAppNUM" name="appNUM" class="hidden" />
    <input type="file" id="uploadfile_AssembleAbnormal" name="uploadAssembleAbnormalOrder" accept="image/jpeg,application/pdf" />
</form>
@* 老化异常订单 *@
<form id="uploadForm_BurnInAbnormal" enctype="multipart/form-data" method="post" style="display:none">
    <input type="hidden" value="@Model.ID" name="id" />
    <input type="text" name="ordernum" value="@Model.OrderNum" class="hidden" />
    <input type="text" id="BurnInAppNUM" name="appNUM" class="hidden" />
    <input type="file" id="uploadfile_BurnInAbnormal" name="uploadBurnInAbnormalOrder" accept="image/jpeg,application/pdf" />
</form>
@* 包装异常订单 *@
<form id="uploadForm_AppearanceAbnormal" enctype="multipart/form-data" method="post" style="display:none">
    <input type="hidden" value="@Model.ID" name="id" />
    <input type="text" name="ordernum" value="@Model.OrderNum" class="hidden" />
    <input type="text" id="AppearanceAppNUM" name="appNUM" class="hidden" />
    <input type="file" id="uploadfile_AppearanceAbnormal" name="uploadAppearanceAbnormalOrder" accept="image/jpeg,application/pdf" />
</form>
@* 组装首件 *@
<form id="uploadForm_Assemble" enctype="multipart/form-data" method="post" style="display:none">
    <input type="hidden" value="@Model.ID" name="id" />
    <input type="text" name="ordernum" value="@Model.OrderNum" class="hidden" />
    <input type="file" id="uploadfile_Assemble" name="uploadAssembleSamplefile" accept="image/jpeg,application/pdf" />
</form>
@* 老化首件 *@
<form id="uploadForm_BurnIn" enctype="multipart/form-data" method="post" style="display:none">
    <input type="hidden" value="@Model.ID" name="id" />
    <input type="text" name="ordernum" value="@Model.OrderNum" class="hidden" />
    <input type="file" id="uploadfile_BurnIn" name="uploadBurnInSamplefile" accept="image/jpeg,application/pdf" />
</form>
@* 包装首件 *@
<form id="uploadForm_Appearance" enctype="multipart/form-data" method="post" style="display:none">
    <input type="hidden" value="@Model.ID" name="id" />
    <input type="text" name="ordernum" value="@Model.OrderNum" class="hidden" />
    <input type="file" id="uploadfile_Appearance" name="uploadAppearanceSamplefile" accept="image/jpeg,application/pdf" />
</form>


<script>
    var summary = new Vue({
        el: "#summary",
        data: {
            ProductionDetailsJson: JSON.parse($("#detailsJson").val())
        },
        computed: {
            newTime() {
                return function (value) {
                    var newtimelength = value.split('.');
                    if (newtimelength.length == 1) {
                        if (value == "") {
                            return value;
                        } else {
                            var newtimeval = value.split(':');
                            return newtimeval[0] + "时" + newtimeval[1] + "分" + newtimeval[2] + "秒";
                        }
                    } else if (newtimelength.length == 2) {
                        var newtimeval = newtimelength[0].split(':');
                        return newtimeval[0] + "时" + newtimeval[1] + "分" + newtimeval[2] + "秒";
                    } else {
                        var newtimeval = newtimelength[1].split(':');
                        return newtimelength[0] + "天" + newtimeval[0] + "时" + newtimeval[1] + "分" + newtimeval[2] + "秒";
                    }
                }
            }
        }
    });
</script>
<script>

    function checkRoles(list, roleName) {   //检测权限
        var flag = false
        if (list && roleName) {
            for (let item in list) {
                if (list[item] == roleName) {
                    flag = true
                }
            }
        }
        return flag
    }


    // 权限名限制--现在已经去除人名限制
    var roles = JSON.parse(localStorage.getItem("rigths"));
    if (checkRoles(roles, '创建模组条码')) {
        $('.mozutiaoma').show()
    } else {
        $('.mozutiaoma').hide()
    }

    if (checkRoles(roles, '创建模块条码')) {
        $('.mokuaitiaoma').show()
    } else {
        $('.mokuaitiaoma').hide()
    }
    if (checkRoles(roles, '创建电源条码')) {
        $('.dianyuantiaoma').show()
    } else {
        $('.dianyuantiaoma').hide()
    }
    if (checkRoles(roles, '创建转接卡条码')) {
        $('.zhuanjieka').show()
    } else {
        $('.zhuanjieka').hide()
    }
    if (checkRoles(roles, '删除订单')) {
        $('.shanchu').show()
    } else {
        $('.shanchu').hide()
    }
    if (checkRoles(roles, '修改订单')) {
        $('.xiugaidingdan').show()
    } else {
        $('.xiugaidingdan').hide()
    }
    if (checkRoles(roles, '创建全部条码')) {
        $('.quanbutiaoma').show()
    } else {
        $('.quanbutiaoma').hide()
    }
    if (checkRoles(roles, '组装首件')) {
        $('.zuzhuangshoujian').show()
    } else {
        $('.zuzhuangshoujian').hide()
    }
    if (checkRoles(roles, '老化首件')) {
        $('.laohuashoujian').show()
    } else {
        $('.laohuashoujian').hide()
    }
    if (checkRoles(roles, '包装首件')) {
        $('.baozhuangshoujian').show()
    } else {
        $('.baozhuangshoujian').hide()
    }
    if (checkRoles(roles, '异常订单')) {
        $('.yichangdingdan').show()
    } else {
        $('.yichangdingdan').hide()
    }
    if (checkRoles(roles, '特采订单')) {
        $('.tecai').show()
    } else {
        $('.tecai').hide()
    }


    var app = new Vue({
        el: "#app",
        data: {
            changeAOD: true,
            changeAbnormalOrder: true,
            showIMG_AOD: false,
            showIMG_Abnormal: false,
            showIMG_Sample: false,
            previewIMG: false,
            AOD_Description: "",
            AbnormalOrder_Description: "",
            AOD_DescriptionShow: "",
            AbnormalOrder_DescriptionShow: "",
            //👇异常
            changeAssembleAbnormal: true,
            changeBurnInAbnormal: true,
            changeAppearanceAbnormal: true,
            showIMG_AssembleAbnormal: false,
            showIMG_BurnInAbnormal: false,
            showIMG_AppearanceAbnormal: false,
            AssembleAbnormal_Description: "",
            AssembleAbnormal_DescriptionShow: "",
            BurnInAbnormal_Description: "",
            BurnInAbnormal_DescriptionShow: "",
            AppearanceAbnormal_Description: "",
            AppearanceAbnormal_DescriptionShow: "",

            AssembleAppNUM: "",
            BurnInAppNUM: "",
            AppearanceAppNUM: "",

            //👇首件
            changeAssemble: true,
            changeBurnIn: true,
            changeAppearance: true,
            showIMG_Assemble: false,
            showIMG_BurnIn: false,
            showIMG_Appearance: false,
            Assemble_Description: "",
            Assemble_DescriptionShow: "",
            BurnIn_Description: "",
            BurnIn_DescriptionShow: "",
            Appearance_Description: "",
            Appearance_DescriptionShow: "",
        },
        mounted: function () {
            // 特采订单
            let fileInput_AOD = $('#uploadfile_AOD').get(0).files[0];
            if (fileInput_AOD) {
                $('#uploadfile_AOD').replaceWith('<input type="file" id="uploadfile_AOD" name="uploadfile" accept="image/jpeg,application/pdf" />');
            };
            // 异常订单
            //let fileInput_Abnormal = $('#uploadfile_Abnormal').get(0).files[0];
            //if (fileInput_Abnormal) {
            //    $('#uploadfile_Abnormal').replaceWith('<input type="file" id="uploadfile_Abnormal" name="uploadAbnormalOrder" accept="image/jpeg,application/pdf" />');
            //};
            // 小样单
            let fileInput_Sample = $('#uploadfile_Sample').get(0).files[0];
            if (fileInput_Sample) {
                $('#uploadfile_Sample').replaceWith('<input type="file" id="uploadfile_Sample" name="uploadfile" accept="image/jpeg,application/pdf" />');
            };
            // 组装异常订单
            let fileInput_AssembleAbnormal = $('#uploadfile_AssembleAbnormal').get(0).files[0];
            if (fileInput_AssembleAbnormal) {
                $('#uploadfile_AssembleAbnormal').replaceWith('<input type="file" id="uploadfile_AssembleAbnormal" name="uploadAssembleAbnormalOrder" accept="image/jpeg,application/pdf" />');
            };
            // 老化异常订单
            let fileInput_BurnInAbnormal = $('#uploadfile_BurnInAbnormal').get(0).files[0];
            if (fileInput_BurnInAbnormal) {
                $('#uploadfile_BurnInAbnormal').replaceWith('<input type="file" id="uploadfile_BurnInAbnormal" name="uploadBurnInAbnormalOrder" accept="image/jpeg,application/pdf" />');
            };
            // 包装异常订单
            let fileInput_AppearanceAbnormal = $('#uploadfile_AppearanceAbnormal').get(0).files[0];
            if (fileInput_AppearanceAbnormal) {
                $('#uploadfile_AppearanceAbnormal').replaceWith('<input type="file" id="uploadfile_AppearanceAbnormal" name="uploadAppearanceAbnormalOrder" accept="image/jpeg,application/pdf" />');
            };
            // 组装首件
            let fileInput_Assemble = $('#uploadfile_Assemble').get(0).files[0];
            if (fileInput_Assemble) {
                $('#uploadfile_Assemble').replaceWith('<input type="file" id="uploadfile_Assemble" name="uploadAssembleSamplefile" accept="image/jpeg,application/pdf" />');
            };
            // 老化首件
            let fileInput_BurnIn = $('#uploadfile_BurnIn').get(0).files[0];
            if (fileInput_BurnIn) {
                $('#uploadfile_BurnIn').replaceWith('<input type="file" id="uploadfile_BurnIn" name="uploadBurnInSamplefile" accept="image/jpeg,application/pdf" />');
            };
            // 包装首件
            let fileInput_Appearance = $('#uploadfile_Appearance').get(0).files[0];
            if (fileInput_Appearance) {
                $('#uploadfile_Appearance').replaceWith('<input type="file" id="uploadfile_Appearance" name="uploadAppearanceSamplefile" accept="image/jpeg,application/pdf" />');
            };
        },
        watch: {
            // 特采订单
            AOD_DescriptionShow: function (val) {
                if (val == '其他') {
                    this.AOD_Description = '';
                } else {
                    this.AOD_Description = val;
                };
            },
            // 异常订单
            //AbnormalOrder_DescriptionShow: function (val) {
            //    if (val == '其他') {
            //        this.AbnormalOrder_Description = '';
            //    } else {
            //        this.AbnormalOrder_Description = val;
            //    };
            //},
            // 组装异常订单
            AssembleAbnormal_DescriptionShow: function (val) {
                if (val == '其他') {
                    this.AssembleAbnormal_Description = '';
                } else {
                    this.AssembleAbnormal_Description = val;
                };
            },
            // 老化异常订单
            BurnInAbnormal_DescriptionShow: function (val) {
                if (val == '其他') {
                    this.BurnInAbnormal_Description = '';
                } else {
                    this.BurnInAbnormal_Description = val;
                };
            },
            // 包装异常订单
            AppearanceAbnormal_DescriptionShow: function (val) {
                if (val == '其他') {
                    this.AppearanceAbnormal_Description = '';
                } else {
                    this.AppearanceAbnormal_Description = val;
                };
            },
            // 组装首件
            Assemble_DescriptionShow: function (val) {
                if (val == '') {
                    this.Assemble_Description = '';
                } else {
                    this.Assemble_Description = val;
                };
            },
            // 老化首件
            BurnIn_DescriptionShow: function (val) {
                if (val == '') {
                    this.BurnIn_Description = '';
                } else {
                    this.BurnIn_Description = val;
                };
            },
            // 包装首件
            Appearance_DescriptionShow: function (val) {
                if (val == '') {
                    this.Appearance_Description = '';
                } else {
                    this.Appearance_Description = val;
                };
            },
        },
        methods: {
            imgShow: function (v) {
                let thisimg;
                switch (v) {
                    case "showIMG_AOD": thisimg = !this.showIMG_AOD; break;
                    case "showIMG_Abnormal": thisimg = !this.showIMG_Abnormal; break;
                    case "showIMG_Sample": thisimg = !this.showIMG_Sample; break;
                    case "showIMG_Assemble": thisimg = !this.showIMG_Assemble; break;
                    case "showIMG_BurnIn": thisimg = !this.showIMG_BurnIn; break;
                    case "showIMG_Appearance": thisimg = !this.showIMG_Appearance; break;
                    case "showIMG_AssembleAbnormal": thisimg = !this.showIMG_AssembleAbnormal; break;
                    case "showIMG_BurnInAbnormal": thisimg = !this.showIMG_BurnInAbnormal; break;
                    case "showIMG_AppearanceAbnormal": thisimg = !this.showIMG_AppearanceAbnormal; break;
                };
                this.showIMG_AOD = false;
                this.showIMG_Abnormal = false;
                this.showIMG_Sample = false;
                this.showIMG_Assemble = false;
                this.showIMG_BurnIn = false;
                this.showIMG_Appearance = false;
                this.showIMG_AssembleAbnormal = false;
                this.showIMG_BurnInAbnormal = false;
                this.showIMG_AppearanceAbnormal = false;
                switch (v) {
                    case "showIMG_AOD": this.showIMG_AOD = thisimg; break;
                    case "showIMG_Abnormal": this.showIMG_Abnormal = thisimg; break;
                    case "showIMG_Sample": this.showIMG_Sample = thisimg; break;
                    case "showIMG_Assemble": this.showIMG_Assemble = thisimg; break;
                    case "showIMG_BurnIn": this.showIMG_BurnIn = thisimg; break;
                    case "showIMG_Appearance": this.showIMG_Appearance = thisimg; break;
                    case "showIMG_AssembleAbnormal": this.showIMG_AssembleAbnormal = thisimg; break;
                    case "showIMG_BurnInAbnormal": this.showIMG_BurnInAbnormal = thisimg; break;
                    case "showIMG_AppearanceAbnormal": this.showIMG_AppearanceAbnormal = thisimg; break;
                };
            },
            // 特采订单
            selectFile_AOD: function () {
                $("#uploadfile_AOD").click();
            },
            // 异常订单
            //selectFile_Abnormal: function () {
            //    $("#uploadfile_Abnormal").click();
            //},
            // 组装异常订单
            selectFile_AssembleAbnormal: function () {
                $("#uploadfile_AssembleAbnormal").click();
            },
            // 老化异常订单
            selectFile_BurnInAbnormal: function () {
                $("#uploadfile_BurnInAbnormal").click();
            },
            // 包装异常订单
            selectFile_AppearanceAbnormal: function () {
                $("#uploadfile_AppearanceAbnormal").click();
            },
            // 小样单
            selectFile_Sample: function () {
                $("#uploadfile_Sample").click();
            },
            // 组装首件
            selectFile_Assemble: function () {
                $("#uploadfile_Assemble").click();
            },
            // 老化首件
            selectFile_BurnIn: function () {
                $("#uploadfile_BurnIn").click();
            },
            // 包装首件
            selectFile_Appearance: function () {
                $("#uploadfile_Appearance").click();
            },
            // 特采订单
            postFile_AOD: function () {
                let fileInput = $('#uploadfile_AOD').get(0).files[0];
                if (fileInput) {
                    let form = document.getElementById('uploadForm_AOD'),
                    formData = new FormData(form);
                    $.ajax({
                        url: "/OrderMgms/UploadFile",
                        type: "post",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function (res) {
                            if (res) { alert("上传成功！"); }
                            //$("#imgReturn").attr("src", "/OrderMgms/GetImg" + "?ordernum=" + "@Model.OrderNum");
                            window.location.reload();
                        },
                        error: function (err) {
                            alert("上传失败", err);
                        }
                    })
                } else {
                    alert("请先选择上传文件！");
                }
            },
            // 异常订单
            @*postFile_Abnormal: function () {
                let fileInput = $('#uploadfile_Abnormal').get(0).files[0];
                if (fileInput) {
                    let form = document.getElementById('uploadForm_Abnormal'),
                    formData = new FormData(form);
                    $.ajax({
                        url: "/OrderMgms/UploadAbnormalOrder",
                        type: "post",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function (res) {
                            if (res) { alert("上传成功！"); }
                            //$("#imgReturn").attr("src", "/OrderMgms/GetImg" + "?ordernum=" + "@Model.OrderNum");
                            window.location.reload();
                        },
                        error: function (err) {
                            alert("上传失败", err);
                        }
                    })
                } else {
                    alert("请先选择上传文件！");
                }
            },*@
            // 小样单
            postFile_Sample: function () {
                let fileInput = $('#uploadfile_Sample').get(0).files[0];
                if (fileInput) {
                    $("#uploadForm_Sample").submit();
                } else {
                    alert("请先选择上传文件！");
                }
            },
            // 组装异常订单
            postFile_AssembleAbnormal: function () {
                let fileInput = $('#uploadfile_AssembleAbnormal').get(0).files[0];
                $("#AssembleAppNUM").val(this.AssembleAppNUM);
                if (fileInput) {
                    let form = document.getElementById('uploadForm_AssembleAbnormal'),
                    formData = new FormData(form);
                    $.ajax({
                        url: "/OrderMgms/UploadAssembleAbnormalOrder",
                        type: "post",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function (res) {
                            if (res) { alert("上传成功！"); }
                            //$("#imgReturn").attr("src", "/OrderMgms/GetImg" + "?ordernum=" + "@Model.OrderNum");
                            window.location.reload();
                        },
                        error: function (err) {
                            alert("上传失败", err);
                        }
                    })
                } else {
                    alert("请先选择上传文件！");
                }
            },
            // 老化异常订单
            postFile_BurnInAbnormal: function () {
                let fileInput = $('#uploadfile_BurnInAbnormal').get(0).files[0];
                $("#BurnInAppNUM").val(this.BurnInAppNUM);
                if (fileInput) {
                    let form = document.getElementById('uploadForm_BurnInAbnormal'),
                    formData = new FormData(form);
                    $.ajax({
                        url: "/OrderMgms/UploadBurnInAbnormalOrder",
                        type: "post",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function (res) {
                            if (res) { alert("上传成功！"); }
                            //$("#imgReturn").attr("src", "/OrderMgms/GetImg" + "?ordernum=" + "@Model.OrderNum");
                            window.location.reload();
                        },
                        error: function (err) {
                            alert("上传失败", err);
                        }
                    })
                } else {
                    alert("请先选择上传文件！");
                }
            },
            // 包装异常订单
            postFile_AppearanceAbnormal: function () {
                let fileInput = $('#uploadfile_AppearanceAbnormal').get(0).files[0];
                $("#AppearanceAppNUM").val(this.AppearanceAppNUM);
                if (fileInput) {
                    let form = document.getElementById('uploadForm_AppearanceAbnormal'),
                    formData = new FormData(form);
                    $.ajax({
                        url: "/OrderMgms/UploadAppearanceAbnormalOrder",
                        type: "post",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function (res) {
                            if (res) { alert("上传成功！"); }
                            //$("#imgReturn").attr("src", "/OrderMgms/GetImg" + "?ordernum=" + "@Model.OrderNum");
                            window.location.reload();
                        },
                        error: function (err) {
                            alert("上传失败", err);
                        }
                    })
                } else {
                    alert("请先选择上传文件！");
                }
            },
            // 组装首件
            postFile_Assemble: function () {
                let fileInput = $('#uploadfile_Assemble').get(0).files[0];
                if (fileInput) {
                    let form = document.getElementById('uploadForm_Assemble'),
                    formData = new FormData(form);
                    $.ajax({
                        url: "/OrderMgms/UploadAssembleSampleFile",
                        type: "post",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function (res) {
                            if (res) { alert("上传成功！"); }
                            //$("#imgReturn").attr("src", "/OrderMgms/GetImg" + "?ordernum=" + "@Model.OrderNum");
                            window.location.reload();
                        },
                        error: function (err) {
                            alert("上传失败", err);
                        }
                    })
                } else {
                    alert("请先选择上传文件！");
                }
            },
            // 老化首件
            postFile_BurnIn: function () {
                let fileInput = $('#uploadfile_BurnIn').get(0).files[0];
                if (fileInput) {
                    let form = document.getElementById('uploadForm_BurnIn'),
                    formData = new FormData(form);
                    $.ajax({
                        url: "/OrderMgms/UploadBurnInSampleFile",
                        type: "post",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function (res) {
                            if (res) { alert("上传成功！"); }
                            //$("#imgReturn").attr("src", "/OrderMgms/GetImg" + "?ordernum=" + "@Model.OrderNum");
                            window.location.reload();
                        },
                        error: function (err) {
                            alert("上传失败", err);
                        }
                    })
                } else {
                    alert("请先选择上传文件！");
                }
            },
            // 包装首件
            postFile_Appearance: function () {
                let fileInput = $('#uploadfile_Appearance').get(0).files[0];
                if (fileInput) {
                    let form = document.getElementById('uploadForm_Appearance'),
                    formData = new FormData(form);
                    $.ajax({
                        url: "/OrderMgms/UploadAppearanceSampleFile",
                        type: "post",
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function (res) {
                            if (res) { alert("上传成功！"); }
                            //$("#imgReturn").attr("src", "/OrderMgms/GetImg" + "?ordernum=" + "@Model.OrderNum");
                            window.location.reload();
                        },
                        error: function (err) {
                            alert("上传失败", err);
                        }
                    })
                } else {
                    alert("请先选择上传文件！");
                }
            },
            // 特采订单
            showModal_AOD: function () {
                $.ajax({
                    url: "/OrderMgms/GetPDF",
                    type: "post",
                    cache: false,
                    data: {
                        ordernum: '@Model.OrderNum',
                    },
                    success: function (address) {
                        $("#setA").append('<a id="temporary" href="../../Scripts/pdf.js/web/viewer.html?file=' + address + '?' + Math.random() + '" target="pdfIframe" style="display:none"></a>');
                        document.getElementById("temporary").click();
                        $("#temporary").remove();
                        $("#myModalLabel").text("特采订单");
                        $("#pdfIframe").css({ "height": $(window).height() - 60 })//.attr("src", "");
                        $("#showModal_AOD").click();
                    },
                    error: function (err) {
                        alert("查看PDF失败", err);
                    }
                });
            },
            // 异常订单
            @*showModal_Abnormal: function () {
                $.ajax({
                    url: "/OrderMgms/GetAbnormalOrderPDF",
                    type: "post",
                    cache: false,
                    data: {
                        ordernum: '@Model.OrderNum',
                    },
                    success: function (address) {
                        $("#setA").append('<a id="temporary" href="../../Scripts/pdf.js/web/viewer.html?file=\\MES_Data\\AbnormalOrder_Files\\' + '@Model.OrderNum\\' + '@Model.OrderNum' + '_AbnormalOrder.pdf?' + Math.random() + '" target="pdfIframe" style="display:none"></a>');
                        document.getElementById("temporary").click();
                        $("#temporary").remove();
                        $("#myModalLabel").text("异常订单");
                        $("#pdfIframe").css({ "height": $(window).height() - 60 })//.attr("src", "");
                        $("#showModal_Abnormal").click();
                    },
                    error: function (err) {
                        alert("查看PDF失败", err);
                    }
                });
            },*@
            // 小样单
            showModal_Sample: function () {
                $.ajax({
                    url: "/OrderMgms/preview_SmallSample_pdf",
                    type: "post",
                    cache: false,
                    data: {
                        ordernum: '@Model.OrderNum',
                    },
                    success: function (address) {
                        $("#setA").append('<a id="temporary" href="../../Scripts/pdf.js/web/viewer.html?file=' + address + '?' + Math.random() + '" target="pdfIframe" style="display:none"></a>');
                        document.getElementById("temporary").click();
                        $("#temporary").remove();
                        $("#myModalLabel").text("小样订单");
                        $("#pdfIframe").css({ "height": $(window).height() - 60 })//.attr("src", "");
                        $("#showModal_Sample").click();
                    },
                    error: function (err) {
                        alert("查看PDF失败", err);
                    }
                });
            },
            // 组装异常订单
            showModal_AssembleAbnormal: function () {
                $.ajax({
                    url: "/OrderMgms/GetAssembleAbnormalOrderPDF",
                    type: "post",
                    cache: false,
                    data: {
                        ordernum: '@Model.OrderNum',
                    },
                    success: function (address) {
                        $("#setA").append('<a id="temporary" href="../../Scripts/pdf.js/web/viewer.html?file=' + address + '?' + Math.random() + '" target="pdfIframe" style="display:none"></a>');
                        document.getElementById("temporary").click();
                        $("#temporary").remove();
                        $("#myModalLabel").text("组装异常订单");
                        $("#pdfIframe").css({ "height": $(window).height() - 60 })//.attr("src", "");
                        $("#showModal_AssembleAbnormal").click();
                    },
                    error: function (err) {
                        alert("查看PDF失败", err);
                    }
                });
            },
            // 老化异常订单
            showModal_BurnInAbnormal: function () {
                $.ajax({
                    url: "/OrderMgms/GetBurnInAbnormalOrderPDF",
                    type: "post",
                    cache: false,
                    data: {
                        ordernum: '@Model.OrderNum',
                    },
                    success: function (address) {
                        $("#setA").append('<a id="temporary" href="../../Scripts/pdf.js/web/viewer.html?file=' + address + '?' + Math.random() + '" target="pdfIframe" style="display:none"></a>');
                        document.getElementById("temporary").click();
                        $("#temporary").remove();
                        $("#myModalLabel").text("老化异常订单");
                        $("#pdfIframe").css({ "height": $(window).height() - 60 })//.attr("src", "");
                        $("#showModal_BurnInAbnormal").click();
                    },
                    error: function (err) {
                        alert("查看PDF失败", err);
                    }
                });
            },
            // 包装异常订单
            showModal_AppearanceAbnormal: function () {
                $.ajax({
                    url: "/OrderMgms/GetAppearanceAbnormalOrderPDF",
                    type: "post",
                    cache: false,
                    data: {
                        ordernum: '@Model.OrderNum',
                    },
                    success: function (address) {
                        $("#setA").append('<a id="temporary" href="../../Scripts/pdf.js/web/viewer.html?file=' + address + '?' + Math.random() + '" target="pdfIframe" style="display:none"></a>');
                        document.getElementById("temporary").click();
                        $("#temporary").remove();
                        $("#myModalLabel").text("包装异常订单");
                        $("#pdfIframe").css({ "height": $(window).height() - 60 })//.attr("src", "");
                        $("#showModal_AppearanceAbnormal").click();
                    },
                    error: function (err) {
                        alert("查看PDF失败", err);
                    }
                });
            },
            // 组装首件
            showModal_Assemble: function () {
                $.ajax({
                    url: "/OrderMgms/preview_AssembleSample_pdf",
                    type: "post",
                    cache: false,
                    data: {
                        ordernum: '@Model.OrderNum',
                    },
                    success: function (address) {
                        $("#setA").append('<a id="temporary" href="../../Scripts/pdf.js/web/viewer.html?file=' + address + '?' + Math.random() + '" target="pdfIframe" style="display:none"></a>');
                        document.getElementById("temporary").click();
                        $("#temporary").remove();
                        $("#myModalLabel").text("组装首件");
                        $("#pdfIframe").css({ "height": $(window).height() - 60 })//.attr("src", "");
                        $("#showModal_Assemble").click();
                    },
                    error: function (err) {
                        alert("查看PDF失败", err);
                    }
                });
            },
            // 老化首件
            showModal_BurnIn: function () {
                $.ajax({
                    url: "/OrderMgms/preview_BurnInSample_pdf",
                    type: "post",
                    cache: false,
                    data: {
                        ordernum: '@Model.OrderNum',
                    },
                    success: function (address) {
                        $("#setA").append('<a id="temporary" href="../../Scripts/pdf.js/web/viewer.html?file=' + address + '?' + Math.random() + '" target="pdfIframe" style="display:none"></a>');
                        document.getElementById("temporary").click();
                        $("#temporary").remove();
                        $("#myModalLabel").text("老化首件");
                        $("#pdfIframe").css({ "height": $(window).height() - 60 })//.attr("src", "");
                        $("#showModal_BurnIn").click();
                    },
                    error: function (err) {
                        alert("查看PDF失败", err);
                    }
                });
            },
            // 包装首件
            showModal_Appearance: function () {
                $.ajax({
                    url: "/OrderMgms/preview_AppearanceSample_pdf",
                    type: "post",
                    cache: false,
                    data: {
                        ordernum: '@Model.OrderNum',
                    },
                    success: function (address) {
                        $("#setA").append('<a id="temporary" href="../../Scripts/pdf.js/web/viewer.html?file=' + address + '?' + Math.random() + '" target="pdfIframe" style="display:none"></a>');
                        document.getElementById("temporary").click();
                        $("#temporary").remove();
                        $("#myModalLabel").text("包装首件");
                        $("#pdfIframe").css({ "height": $(window).height() - 60 })//.attr("src", "");
                        $("#showModal_Appearance").click();
                    },
                    error: function (err) {
                        alert("查看PDF失败", err);
                    }
                });
            },
        }
    });
    $(function () {
        if ($("#createdBarcode").text() == 1) {
            $("#createdBarcode").text("是")
        } else {
            $("#createdBarcode").text("否")
        };
        //点击跳转到工段首页
        $(".cursor").click(function (event) {
            event.preventDefault();
            switch (event.target.textContent) {
                case "组装": postOrder("/Assembles/AssembleIndex"); break;
                case "FQC": postOrder("/FinalQCs/Index"); break;
                case "老化": postOrder("/Burn_in/Index"); break;
                case "校正": postOrder("/CalibrationRecords/Index"); break;
                case "包装": postOrder("/Appearances/Index"); break;
            };
        });
    });
    // 特采订单
    $("#uploadfile_AOD").change(function () {
        selectFileImage(this)
        let file = this.files['0'];
        if (file) {
            $("#filecontent_AOD").text(file.name);
            $("#imgPreview").attr("src", URL.createObjectURL(file));
            app.previewIMG = true;
        }
    });
    // 异常订单
    //$("#uploadfile_Abnormal").change(function () {
    //    selectFileImage(this)
    //    let file = this.files['0'];
    //    if (file) {
    //        $("#filecontent_Abnormal").text(file.name);
    //        $("#imgPreview").attr("src", URL.createObjectURL(file));
    //        app.previewIMG = true;
    //    }
    //});
    // 小样单
    $("#uploadfile_Sample").change(function () {
        selectFileImage(this)
        let file = this.files['0'];
        if (file) {
            $("#filecontent_Sample").text(file.name);
            $("#imgPreview").attr("src", URL.createObjectURL(file));
            app.previewIMG = true;
        }
    });
    // 组装异常订单
    $("#uploadfile_AssembleAbnormal").change(function () {
        selectFileImage(this)
        let file = this.files['0'];
        if (file) {
            $("#filecontent_AssembleAbnormal").text(file.name);
            $("#imgPreview").attr("src", URL.createObjectURL(file));
            app.previewIMG = true;
        }
    });
    // 老化异常订单
    $("#uploadfile_BurnInAbnormal").change(function () {
        selectFileImage(this)
        let file = this.files['0'];
        if (file) {
            $("#filecontent_BurnInAbnormal").text(file.name);
            $("#imgPreview").attr("src", URL.createObjectURL(file));
            app.previewIMG = true;
        }
    });
    // 包装异常订单
    $("#uploadfile_AppearanceAbnormal").change(function () {
        selectFileImage(this)
        let file = this.files['0'];
        if (file) {
            $("#filecontent_AppearanceAbnormal").text(file.name);
            $("#imgPreview").attr("src", URL.createObjectURL(file));
            app.previewIMG = true;
        }
    });
    // 组装首件
    $("#uploadfile_Assemble").change(function () {
        selectFileImage(this)
        let file = this.files['0'];
        if (file) {
            $("#filecontent_Assemble").text(file.name);
            $("#imgPreview").attr("src", URL.createObjectURL(file));
            app.previewIMG = true;
        }
    });
    // 老化首件
    $("#uploadfile_BurnIn").change(function () {
        selectFileImage(this)
        let file = this.files['0'];
        if (file) {
            $("#filecontent_BurnIn").text(file.name);
            $("#imgPreview").attr("src", URL.createObjectURL(file));
            app.previewIMG = true;
        }
    });
    // 包装首件
    $("#uploadfile_Appearance").change(function () {
        selectFileImage(this)
        let file = this.files['0'];
        if (file) {
            $("#filecontent_Appearance").text(file.name);
            $("#imgPreview").attr("src", URL.createObjectURL(file));
            app.previewIMG = true;
        }
    });

    function postOrder(url) {
        $("#setForm").attr("action", url)
        $("#setForm").submit();
        $("#setForm").removeAttr("action")
    };
</script>