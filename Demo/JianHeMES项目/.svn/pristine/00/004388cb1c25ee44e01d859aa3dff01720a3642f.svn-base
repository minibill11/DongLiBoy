using System.Data.Entity;
using System.Security.Claims;
using System.Threading.Tasks;
using Microsoft.AspNet.Identity;
using Microsoft.AspNet.Identity.EntityFramework;

namespace JianHeMES.Models
{
    // 可以通过向 ApplicationUser 类添加更多属性来为用户添加配置文件数据。
    public class ApplicationUser : IdentityUser
    {
        public async Task<ClaimsIdentity> GenerateUserIdentityAsync(UserManager<ApplicationUser> manager)
        {
            //authenticationType 必须与 CookieAuthenticationOptions.AuthenticationType 中定义的相应项匹配
            var userIdentity = await manager.CreateIdentityAsync(this, DefaultAuthenticationTypes.ApplicationCookie);
            // 此处添加自定义用户声明
            return userIdentity;
        }
    }

    public class ApplicationDbContext : IdentityDbContext<ApplicationUser>
    {
        public ApplicationDbContext()
            : base("DefaultConnection", throwIfV1Schema: false)
        {
        }
        //组装
        public DbSet<Assemble> Assemble { get; set; }
        public DbSet<Waterproofabnormal> Waterproofabnormal { get; set; }
        public DbSet<ViewCheckabnormal> ViewCheckabnormal { get; set; }
        public DbSet<PQCCheckabnormal> PQCCheckabnormal { get; set; }
        //条码
        public DbSet<BarCodes> BarCodes { get; set; }
        //挪用订单的条码关联
        public DbSet<BarCodeRelation> BarCodeRelation { get; set; }
        //订单
        public DbSet<OrderMgm> OrderMgm { get; set; }
        public DbSet<OrderMgm_Delete> OrderMgm_Delete{ get; set; }

        //用户信息
        public DbSet<Users> Users { get; set; }
        public DbSet<Useroles> Useroles { get; set; }
        //权限清单
        public DbSet<UserRolelistTable> UserRolelistTable { get; set; }
        public DbSet<UserManageRoles> UserManageRoles { get; set; }
        public DbSet<UserPositionList> UserPositionList { get; set; }
        public DbSet<UserCanManagePosition> UserCanManagePosition { get; set; }
        public DbSet<UserOperateLog> UserOperateLog { get; set; }


        public DbSet<OrderInformation> OrderInformation { get; set; }
        //校正
        public DbSet<CalibrationRecord> CalibrationRecord { get; set; }
        public DbSet<ModelCollections> ModelCollections { get; set; }
        public DbSet<AdapterCard_Power_Collection> AdapterCard_Power_Collection { get; set; }
        public DbSet<AssembleLineId> AssembleLineId { get; set; }
        //老化
        public DbSet<Burn_in> Burn_in { get; set; }
        //拼屏
        public DbSet<Burn_in_MosaicScreen> Burn_in_MosaicScreen { get; set; }
        public DbSet<Burn_in_OQCCheckAbnormal> Burn_in_OQCCheckAbnormal { get; set; }
        //外观包装OQC
        public DbSet<Appearance> Appearance { get; set; }
        public DbSet<Appearance_OQCCheckAbnormal> Appearance_OQCCheckAbnormal { get; set; }
        public DbSet<Packaging> Packaging{ get; set; }
        public DbSet<IQCReport> IQCReports { get; set; }

        //SMT生产计划
        public DbSet<SMT_ProductionPlan> SMT_ProductionPlan { get; set; }
        //SMT线别信息
        public DbSet<SMT_ProductionLineInfo> SMT_ProductionLineInfo { get; set; }
        //SMT生产数据
        public DbSet<SMT_ProductionData> SMT_ProductionData { get; set; }

        public DbSet<SMT_OrderInfo> SMT_OrderInfo { get; set; }
        //看板信息
        public DbSet<SMT_ProductionBoardTable> SMT_ProductionBoardTable { get; set; }

        public DbSet<FinalQC> FinalQC { get;set; }

        //人事日报表
        public DbSet<Personnel_daily> Personnel_daily { get; set; }
        //人工成本对照表
        public DbSet<Personnel_of_Contrast> Personnel_of_Contrast { get; set; }
        //月流失率表
        public DbSet<Personnel_Turnoverrate> Personnel_Turnoverrate { get; set; }
        //招聘周报
        public DbSet<Personnel_Recruitment> Personnel_Recruitment { get; set; }
        //花名册
        public DbSet<Personnel_Roster> Personnel_Roster { get; set; }
        //组织构架
        public DbSet<Personnel_Framework> Personnel_Framework { get; set; }
        public DbSet<Personnel_Organization> Personnel_Organization { get; set; }

        //请假信息
        public DbSet<Personnel_Leave> Personnel_Leave { get; set; }
        //离职信息
        public DbSet<Personnel_Reasons_for_leaving> Personnel_Reasons_for_leaving { get; set; }

        //非在岗人员信息
        //public DbSet<Personnel_NotWorkingInfo> Personnel_NotWorkingInfo { get; set; }

        //球场屏
        public DbSet<CourtScreenModuleInfo> CourtScreenModuleInfoes { get; set; }
        
        public DbSet<Test> Tests { get; set; }

        public object BarCode { get; internal set; }
        public Task TNews { get; internal set; }

        //创建数据库操作上下文，EF需要这个文件来创建和访问数据库
        //完成后需要重新编译项目（快捷键Ctrl+Shift+B），否则下面添加控制器时会出错。

        public static ApplicationDbContext Create()
        {
            return new ApplicationDbContext();
        }

        //public System.Data.Entity.DbSet<JianHeMES.Models.Personnel_Framework> Personnel_Framework { get; set; }
        //public System.Data.Entity.DbSet<JianHeMES.Models.CourtScreenModuleInfo> CourtScreenModuleInfoes { get; set; }
        //public System.Data.Entity.DbSet<JianHeMES.Models.Packaging> Packagings { get; set; }
        //public System.Data.Entity.DbSet<JianHeMES.Models.Appearance> Appearances { get; set; }
        //public System.Data.Entity.DbSet<JianHeMES.Models.Burn_in> Burn_in { get; set; }
    }
}