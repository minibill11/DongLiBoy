<script type="text/template" id="Eq_Echarts_Card">
    <div :class="size" :id="id"></div>
</script>
<script>
    Vue.component('eq-card-component', {
        props: {
            id: String,
            size: String,
            text: String,
            value: String,
            chart: Array,
            radius: Array
        },
        template: document.getElementById("Eq_Echarts_Card"),
        data: function () {
            return {
                id: '',
                size: '',
                chart: [],
                text: '',
                value: '',
                radius:[]
            }
        },
        mounted() {
            //console.log(this.id)
            var myChart = echarts.init(document.getElementById(this.id));
            var option = {
                tooltip: {
                    trigger: 'item',
                    formatter: "{a} <br/>{b}: {d}%/{c}"
                },
                color: ["#22c49e", "#f7c73a","#ff8590"],
                legend: {
                    bottom: 10,
                    left: 'center',
                    data: this.chart.map(item => item.name)
                },
                graphic: {
                    elements: [{
                        type: 'text',
                        left: 'center', // 相对父元素居中
                        top: '35%',
                        style: {
                            fill: '#8EA0B8',
                            text: [this.value],
                            fontSize: 18,
                            fontWeight: 800
                            //font: '18px Arial Normal',
                        }
                    },
                    {
                        type: 'text',
                        left: 'center', // 相对父元素居中
                        top: '42%',  // 相对父元素上下的位置
                        style: {
                            fill: '#8EA0B8',
                            text: [this.text],
                            fontSize: 12
                            //fontWeight: bold
                            //font: '12px Arial Normal',
                        }
                    }]
                },
                series: [
                    {
                        name: '设备状态',
                        type: 'pie',
                        radius: this.radius,
                        center: ['50%', '40%'],
                        //avoidLabelOverlap: false,
                        emphasis: {
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        },
                        label: {
                            normal: {
                                formatter: ' {b|{b}:{c}}  \n {d|{d}%}  \n\n',       //图形外文字上下显示
                                borderWidth: 20,
                                borderRadius: 4,
                                rich: {
                                    b: {                        //name 文字样式
                                        fontSize: 14,
                                        lineHeight: 20,
                                        color: '#293038',
                                        fontWeight: 800
                                    }, 
                                    d: {                   //value 文字样式
                                        fontSize: 14,
                                        lineHeight: 20,
                                        color: '#8EA0B8',
                                        align: "center"
                                    }
                                }
                            }
                        },
                        data: this.chart
                    }
                ]
            };
            myChart.setOption(option);
        },
        methods: {

        },
    });
</script>
