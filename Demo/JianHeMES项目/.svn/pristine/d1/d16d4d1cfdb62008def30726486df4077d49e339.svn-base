@model JianHeMES.Models.EquipmentStatusRecord

@{
    ViewBag.Title = "InputEquipmentRepairRecordSingle";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@* 外部文件引用 *@
<link href="~/Scripts/Bootstraps/Element-ui.css" rel="stylesheet" />
<script src="~/Scripts/axios.min.js"></script>
<script src="~/Scripts/Bootstraps/Element-ui.js"></script>

<style>
    @@media screen and (max-width:450px) {
        .el-input{
            width:138px;
        }
    }
    .queryInputs{
        display:flex;
        justify-content:center;
    }
    h2{
        text-align:center;
        font-size:2rem;
    }
   .el-table .cell{
        text-align:center;
        padding:2px !important;
       font-size:12px;
    }
    .el-table th,.el-table td{
        padding:2px;
    }
</style>

<h2>仪器设备保修单</h2>
@* 暂未用到的页面 *@

<div id="app">
    @* 查询选择项 *@
    <div class="queryInputs">
        <div class="inputContainer">
            <el-select v-model="value8" size="mini" allow-create filterable placeholder="请选择物料编号">
                <el-option v-for="item in options"
                           v-bind:key="item.value"
                           v-bind:label="item.label"
                           v-bind:value="item.value">
                </el-option>
            </el-select>
            <el-select v-model="value8" size="mini" allow-create filterable placeholder="请选择物料名称">
                <el-option v-for="item in options"
                           v-bind:key="item.value"
                           v-bind:label="item.label"
                           v-bind:value="item.value">
                </el-option>
            </el-select>
        </div>
    </div>

    @* 查询结果表格 *@
    <div class="queryResults">
        <el-table v-bind:data="tableData"
                  border
                  max-height="500"
                  style="width: 100%">
            <el-table-column label="物料信息">
                <template slot-scope="scope">
                    <span v-if="scope.row.showdefault" v-on:click="showtoggle(scope.row.showdefault,scope.$index)">{{ scope.row.date }}</span>
                    <span v-else v-on:click="showtoggle(scope.row.showdefault,scope.$index)">{{ scope.row.name }}</span>
                </template>
            </el-table-column>
            <el-table-column label="库存数量" prop="nums" width="80">
            </el-table-column>
            <el-table-column label="存放地点">
                <template slot-scope="scope">
                    <span v-on:click="changeAddrees(scope.row,scope.$index)">{{ scope.row.address }}</span>
                </template>
            </el-table-column>
        </el-table>
    </div>

    @* 修改存放地点弹出框 *@
    <el-dialog v-bind:title=`【${changeaddressData.date}】【${changeaddressData.nums}】`
               v-bind:visible.sync="dialogVisible"
               width="30%"
               v-bind:before-close="handleClose">
        <div>
            <el-input type="textarea"
                      v-bind:rows="2"
                      placeholder="请输入内容"
                      v-model="changeaddressData.address">
            </el-input>
        </div>
        <span slot="footer" class="dialog-footer">
            <el-button @@click="dialogVisible = false">取 消</el-button>
            <el-button type="primary" @@click="comfirm">确 定</el-button>
        </span>
    </el-dialog>
</div>

<script>
    let app = new Vue({
        el: "#app",
        data: {
            dialogVisible: false,
            tableData: [{
                date: '物料名称',
                name: '物料编号',
                showdefault: true,
                nums: 12,
                address: '上海市普陀区金沙江路 1518 弄'
            }, {
                date: '20物料名称',
                name: '物料编号',
                showdefault: true,
                nums: 12,
                address: '上海市普陀区金沙江路 1517 弄'
            }, {
                date: '20物料名称1',
                name: '物料编号',
                showdefault: true,
                nums: 12,
                address: '上海市普陀区金沙江路 1519 弄'
            }, {
                date: '物料名称-03',
                name: '物料编号',
                showdefault: true,
                nums: 12,
                address: '上海市普陀区金沙江路 1516 弄'
            }],
            options: [{
                value: '选项1',
                label: '黄金糕'
            }, {
                value: '选项2',
                label: '双皮奶'
            }, {
                value: '选项3',
                label: '蚵仔煎'
            }, {
                value: '选项4',
                label: '龙须面'
            }, {
                value: '选项5',
                label: '北京烤鸭'
            }],
            value8: '',
            changeaddressData: {

            }
        },
        methods: {
            // 切换显示物料名称跟物料编号
            showtoggle(flag, index) {
                this.tableData.forEach((item, indexs) => {
                    if (index == indexs) {
                        if (flag) {
                            item.showdefault = false;
                        } else {
                            item.showdefault = true;
                        }
                        return false;
                    }
                })
            },
            // 修改物料存放地址
            changeAddrees(data, index) {
                this.changeaddressData = data
                this.dialogVisible = true;
            },
            // 弹框关闭提示
            handleClose(done) {
                this.$confirm('确认关闭？')
                  .then(_ => {
                      done();
                  })
                  .catch(_ => { });
            },
            // 确认修改
            comfirm() {
                this.dialogVisible = false;
            }
        }
    });

</script>
