@model IEnumerable<JianHeMES.Models.SMT_ProductionPlan>

@{
    ViewBag.Title = "SMT_订单计划";
}
@Scripts.Render("~/Scripts/highcharts")
<link href="~/Scripts/Bootstraps/bootstrap-select.css" rel="stylesheet" />
<script src="~/Scripts/Bootstraps/bootstrap-select.js"></script>

<style>
    /*标题+搜索框+按钮样式*/
    .top-title{
        text-align:center;
    }
    .create-button > p{
        width:80px;
        height:32px;
        transition:all linear .2s;
    }
    .create-button > p> a{
        text-decoration:none;
    }
    .fqc-index-content{
        margin-bottom:18px;
    }
    .fqc-index-content-inner{
        display:inline-block;
    }
    .fqc-index-content-inner:nth-child(1){
        width:136px;
    }
    .fqc-index-content-inner:nth-child(2){
        width:235px;
        height:34px;
    }
     .bootstrap-select:not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn) {
        width: 150px;
       
        border: 1px solid #ccc;
        box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
        border-radius:4px;
        padding-bottom:2px;
        z-index:1000;
    }
     .fqc-index-content-inner:nth-child(2) > select{
        
        height:34px;
    }
     .fqc-index-content-inner:nth-child(3) > select{
         width:80px;
         height:34px;
     }
     .fqc-index-content-inner:nth-child(3){
        width:240px;
        height:34px;
    }
    .fqc-index-content-inner:nth-child(4){
        width:240px;
        text-align:left;
    }
    .fqc-index-content-inner:nth-child(4) > input{
        width:115px;
        display:inline-block;
        padding:0px;
        
     }

    .fqc-index-content-inner:nth-child(5){
        width:260px;
        text-align:left;
    }
      .fqc-index-content-inner:nth-child(5)>input{
          display:inline-block;
          width:100px;
      }
    .fqc-index-content-inner:nth-child(5) > button{
        margin-left: 10px;
        height: 34px;
        border: none;
        background-color: #e0e0e0;
        border-radius: 5px;
        transition: all linear .1s;
    }
    .fqc-index-content-inner:nth-child(5) > button:hover{
        background-color: burlywood;
        color: #fff;
        box-shadow: 0 2px 3px #888888;
    }

    /*表格样式*/
    .table-title > table{
        width:100%;
    }
    .table-title > table> tbody> tr > th{
        display:inline-block;
        text-align:center;
    }
    .table-title > table> tbody> tr > th:nth-child(1),.table-bottom > table> tbody> tr > td:nth-child(1){
        width:55px;
        margin-left:0px;
    }
    .table-title > table> tbody> tr > th:nth-child(2),.table-bottom > table> tbody> tr > td:nth-child(2){
        width:142px;
    }
    .table-title > table> tbody> tr > th:nth-child(3),.table-bottom > table> tbody> tr > td:nth-child(3){
        width:116px;
    }
    .table-title > table> tbody> tr > th:nth-child(4),.table-bottom > table> tbody> tr > td:nth-child(4){
        width:96px;
    }
    .table-title > table> tbody> tr > th:nth-child(5),.table-bottom > table> tbody> tr > td:nth-child(5){
        width:96px;
    }
    .table-title > table> tbody> tr > th:nth-child(6),.table-bottom > table> tbody> tr > td:nth-child(6){
        width:175px;
    }
    .table-title > table> tbody> tr > th:nth-child(7),.table-bottom > table> tbody> tr > td:nth-child(7){
        width:225px;
    }
    .table-title > table> tbody> tr > th:nth-child(8),.table-bottom > table> tbody> tr > td:nth-child(8){
        width:145px;
    }
    .table-bottom > table> tbody> tr > td{
        display:inline-block;
        text-align:center;
        border:none;
    }
    .table-bottom > table> tbody> tr,.table-title > table> tbody> tr{
        border-bottom:1px solid #888888;
    }
    .table-title,.table-bottom{
           margin-left:42px;
       }

   /*手机端样式*/
   @@media (max-width:400px){
       .fqc-index-content{
           text-align:left;
       }
       .fqc-index-content-inner{
           margin-top:5px;
       }
       .table-title,.table-bottom{
           margin-left:0px;
       }
   }
</style>
<h3 class="top-title">SMT_订单计划</h3>
<div class="text-center create-button">
    <p class="text-success text-center btn btn-default chuangjian">
        @Html.ActionLink("创建计划", "SMT_ProductionPlanCreate")
    </p>
</div>
<br />

@using (Html.BeginForm("SMT_ProductionPlan", "SMT", FormMethod.Post, new { id = "searchForm", @class = "text-center" }))
{
    @Html.AntiForgeryToken()
    //更新版本
    <div class="container fqc-index-content">
        <form asp-controller="FinalQCs" asp-action="Index" method="post">
            <div class="fqc-index-content-inner">
                <span>产线号：</span>@Html.DropDownList("lineNum", (List<SelectListItem>)ViewBag.LineNumList, "全部", new { @class = "form-control", style = "display:inline; width: 80px" })
            </div>
            <div class="fqc-index-content-inner">
                <span>订单号：</span>@Html.DropDownList("orderNum", (List<SelectListItem>)ViewBag.OrderList, "全部", new { @class = "selectpicker", id = "orderNum", data_live_search = "true", data_style = "form-control" })
            </div>
            <div class="fqc-index-content-inner">
                <span>工作内容：</span>@Html.DropDownList("jobContent", (List<SelectListItem>)ViewBag.JobContentList, "全部", new { @class = "selectpicker", id = "orderNum", data_live_search = "true", data_style = "form-control" })
            </div>
            <div class="fqc-index-content-inner">
                <span> 计划生产日期：</span>
                   <input class="form-control everyDate" type="date" name="planProductionDate">
               
            </div>
            <div class="fqc-index-content-inner">
                <span>备注：</span>
                <input type="text" class="form-control" style="display:inline;width:150px;" name="remark" />
                <input type="submit" id="searchButton" class="btn btn-default hidden" value="查找" />
                <button id="searchcButton" data-val="12">查找</button>
            </div>
        </form>
    </div>
}
<div class="table-title" style="width:1100px;">
    <table>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.LineNum)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OrderNum)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.JobContent)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Capacity)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Quantity)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PlanProductionDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Remark)
            </th>
            <th>操作</th>
        </tr>
    </table>
</div>
<div class="table-bottom" style="height:550px;overflow:auto;width:1100px;">
    <table class="table">
        @if (Model != null)
    {
        foreach (var item in Model)
        {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.LineNum)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.OrderNum)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.JobContent)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Capacity)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Quantity)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.PlanProductionDate)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Remark)
                    </td>
                    <td>
                        <span class="editanddelete">
                            @Html.ActionLink("修改", "SMT_ProductionPlanEdit", new { id = item.Id }) |
                        </span>
                        <span class="shanchu">
                            @Html.ActionLink("删除", "SMT_ProductionPlanDelete", new { id = item.Id })
                        </span>
                            @*@Html.ActionLink("详细", "Details", new { id = item.Id }) |*@
                    </td>
                </tr>
        }
    }
    </table>
</div>
<p>
    @Html.ActionLink("返回", "SMT_Mangage")
</p>

<script>
    $(function () {
        function checkRoles(list, roleName) {   //检测权限
            var flag = false
            if (list && roleName) {
                for (let item in list) {
                    if (list[item] == roleName) {
                        flag = true
                    }
                }
            }
            return flag
        }

        var roles = JSON.parse(localStorage.getItem("rigths"));
        if (checkRoles(roles, '修改订单')) {
            $('.editanddelete').show()
        } else {
            $('.editanddelete').hide()
        }
        if (checkRoles(roles, '创建订单')) {
            $('.chuangjian').show()
        } else {
            $('.chuangjian').hide()
        }
        if (checkRoles(roles, '删除订单')) {
            $('.shanchu').show()
        } else {
            $('.shanchu').hide()
        }
    })
</script>