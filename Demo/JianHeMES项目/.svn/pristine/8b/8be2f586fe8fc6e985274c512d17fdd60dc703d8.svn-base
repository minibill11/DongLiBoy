
@{
    ViewBag.Title = "钣金部生产进度管控";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="~/Content/styleFile/packaging/index.css" rel="stylesheet" />
<script src="~/Content/styleFile/packaging/index.js"></script>
<script src="~/Scripts/axios.min.js"></script>

<style>
    * {
        margin: 0;
        padding: 0;
    }

    .body-content, .container {
        padding-left: 0px;
        padding-right: 0px;
    }

    .el-table__header tr, .el-table__header th, .el-table td {
        padding: 0;
        text-align: center;
        padding-left: 0px;
    }

    .container {
        width: 1761px;
    }
    .el-table .cell.el-tooltip {
        white-space: nowrap;
    }
</style>

<div id="app">
    <div class="text-center">
        <h3>钣金部生产进度管控</h3>
    </div>  
    <div>
        <span>订单号：</span>      
        <el-select v-model="ordernum"
                   multiple
                   collapse-tags
                   placeholder="请选择">
            <el-option v-for="item in ordernumOptions"
                       :key="item.value"
                       
                       :value="item.value">
            </el-option>
        </el-select>
        <el-table v-bind:data="tableData"
                  style="width: 100%;font-size: 12px" :cell-style="{'padding':'0'}" border max-heigth="600">
            <el-table-column prop="OrderNum"
                             label="订单号"
                             width="105">
            </el-table-column>
            <el-table-column prop="Quantity"
                             label="订单数量"
                             width="75">
            </el-table-column>
            <el-table-column prop=""
                             label="生产类型"
                             width="80">
                <el-table-column prop="ProductionType"
                                 label="(散件/箱体)"
                                 width="80">
                </el-table-column>
            </el-table-column>
            <el-table-column prop=""
                             label="生产排期"
                             width="190">
                <el-table-column prop="ProductScheduleStartTime"
                                 label="起始日期"
                                 width="90">
                </el-table-column>
                <el-table-column prop="DepartmentalDeliveryTime"
                                 label="部门交货时间"
                                 width="90">
                </el-table-column>
            </el-table-column>

            <el-table-column prop="ProductionStartTime"
                             label="生产开始时间"
                             width="90">
            </el-table-column>
            <el-table-column prop=""
                             label="图纸、编程"
                             width="140">
                <el-table-column prop=""
                                 label="完成率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.DrawCompletion"></div>
                    </template>
                </el-table-column>
                <el-table-column prop=""
                                 label="合格率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.DrawPass"></div>
                    </template>
                </el-table-column>
            </el-table-column>

            <el-table-column prop=""
                             label="数冲、冲压"
                             width="140">
                <el-table-column prop=""
                                 label="完成率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.BluntCompletion"></div>
                    </template>
                </el-table-column>
                <el-table-column prop=""
                                 label="合格率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.BluntPass"></div>
                    </template>
                </el-table-column>
            </el-table-column>

            <el-table-column prop=""
                             label="敲料、去毛刺、沉孔、倒角"
                             width="140">
                <el-table-column prop=""
                                 label="完成率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.ChamferCompletion"></div>
                    </template>
                </el-table-column>
                <el-table-column prop=""
                                 label="合格率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.ChamferPass"></div>
                    </template>
                </el-table-column>
            </el-table-column>

            <el-table-column prop=""
                             label="折弯、压铆"
                             width="140">
                <el-table-column prop=""
                                 label="完成率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.BendCompletion"></div>
                    </template>
                </el-table-column>
                <el-table-column prop=""
                                 label="合格率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.BendPass"></div>
                    </template>
                </el-table-column>
            </el-table-column>

            <el-table-column prop=""
                             label="焊接、打磨"
                             width="140">
                <el-table-column prop=""
                                 label="完成率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.WeldCompletion"></div>
                    </template>
                </el-table-column>
                <el-table-column prop=""
                                 label="合格率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.WeldPass"></div>
                    </template>
                </el-table-column>
            </el-table-column>

            <el-table-column prop=""
                             label="外协喷涂"
                             width="140">
                <el-table-column prop=""
                                 label="完成率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.SprayCompletion"></div>
                    </template>
                </el-table-column>
                <el-table-column prop=""
                                 label="合格率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.SprayPass"></div>
                    </template>
                </el-table-column>
            </el-table-column>

            <el-table-column prop=""
                             label="装配、丝印"
                             width="140">
                <el-table-column prop=""
                                 label="完成率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.AssembleCompletion"></div>
                    </template>
                </el-table-column>
                <el-table-column prop=""
                                 label="合格率"
                                 width="70">
                    <template slot-scope="scope">
                        <div v-html="scope.row.AssemblePass"></div>
                    </template>
                </el-table-column>
            </el-table-column>
            <el-table-column prop=""
                             label="入库（件）"
                             width="70">
                <template slot-scope="scope">
                    <div v-html="scope.row.WarehouseCompletion"></div>
                </template>
            </el-table-column>
            <el-table-column prop="CompletionTime"
                             label="完成时间"
                             width="90">
            </el-table-column>
            <el-table-column prop="ProductionTime"
                             label="生产时长"
                             width="90">
            </el-table-column>
        </el-table>
    </div>
    
</div>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            tableData: [],
            ordernum: [],
            ordernumOptions: [],
          
        },
        mounted() {
            axios.post('/MetalPlate/GetOrderList').then(res => {
                this.ordernumOptions = res.data;
                console.log(res.data)
            }).catch(err => {
                console.warn("获取选择列表失败")
            });
            this.getData()           
        },
        methods: {
            getData() {
                axios.post('/MetalPlate/getProductionInfo', {
                    ordernum: this.ordernum
                }).then(res => {;
                    console.log(res.data)
                    this.tableData = res.data
                }).catch(err => {
                    console.warn("请求失败！")
                })
            }
        },
        watch: {
            ordernum() {
                if (this.ordernum.length > 0) {
                    this.getData()
                } else {
                    this.tableData = []
                    this.getData()
                }
            }
        }
    })
</script>
