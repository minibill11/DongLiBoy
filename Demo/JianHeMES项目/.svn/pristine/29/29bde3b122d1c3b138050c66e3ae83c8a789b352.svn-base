
@{
    ViewBag.Title = "用户操作日志查询";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/styleFile/packaging/index.css" rel="stylesheet" />
<script src="~/Content/styleFile/packaging/index.js"></script>
<script src="~/Scripts/axios.min.js"></script>
<style>
    .table .cell, .el-table th, .el-table td {
        text-align: center;
    }

    .et {
        display: flex;
        justify-content: flex-start;
        align-items: flex-start;
        margin-top: 5px;
    }

    .searchContainer {
        text-align: center;
    }
</style>


<h3>@ViewBag.Title</h3>
<div id="app">
    <div class="searchContainer">
        <select-input v-model.trim="content"
                      :options="options"
                      :isfocus="true"
                      ismultiple="false"
                      size="medium"
                      styple="width:200px"
                      allow-create filterable clearable>
        </select-input>
        <select-input v-model.trim="user"
                      :options="options"
                      :isfocus="true"
                      ismultiple="false"
                      size="medium"
                      styple="width:50px"
                      allow-create filterable clearable>
        </select-input>
        @*<el-date-picker v-model="dataVal"
                        type="daterange"
                        range-separator="至"
                        start-placeholder="开始日期"
                        end-placeholder="结束日期" size="small" style="margin-top:9px">
        </el-date-picker>*@
        <el-button size="medium" type="primary" v-on:click="query">查询</el-button>
        <span>记录数：{{queryresultcount}}</span>
        <el-table v-bind:data="queryresult" border style="margin-top:5px;width:1200px;margin:auto;" max-height="572" v-bind:span-method="cellMerge" v-bind:cell-style="yellowBg" v-bind:header-cell-style="{background:'#F0F8FF'}">
            <el-table-collumn property="Id" label="ID" width="50"></el-table-collumn>
            <el-table-collumn property="Operator" label="用户" width="100"></el-table-collumn>
            <el-table-collumn property="OperateRecord" label="操作内容" width="1050" type="texteare"></el-table-collumn>
        </el-table>
    </div>
</div>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            starttime: null,
            endtime: null,
            user: null,
            content: null,
            queryresultcount: 0,
            queryresult: [],  //查询结果
        },
        method: {
            query() {
                axios.post("/Users/UerserOperateLogsQuery", {
                    starttime: this.starttime,
                    endtime: this.endtime,
                    user: this.user,
                    content: this.content
                }).then(res => {
                    this.queryresult = res.data.length
                    this.queryresultcount = rew.data
                }).catch(err => {
                    this.$message({
                        message: '请求出错！',
                        type: 'error'
                    });
                })
            },
        }
    })
</script>