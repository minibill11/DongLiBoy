
@{
    ViewBag.Title = "printTest";
    Layout = null;
}
<script src="~/Scripts/vue.js"></script>
<script src="~/Scripts/jquery-1.11.3.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/printJS/JsBarcode.all.min.js"></script>
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<style>
    * ，body {
        margin: 0;
        padding: 0;
    }

    .printhide {
        padding: 80px 0;
    }

    .mo {
        font-size: 135px;
        line-height: 90px;
    }

    .printContent {
        width: 500px;
        height: 250px;
        margin: 0 auto;
        padding: 0;
    }

    .form-control {
        max-width: 280px;
    }

    #barcode {
        width: 360px;
    }
</style>


<div id="app" class="text-center container body-content">
    <div class="printhide">
        <div class="form-group row">
            <div class="col-md-7 text-right">
                模组：<input v-model.trim="printMo" class="form-control" style="display:inline-block;text-transform:uppercase" />
            </div>
            <div class="col-md-5 text-left">
            </div>
        </div>
        <div class="form-group row">
            <div class="col-md-7 text-right">
                条码：<input v-model.trim="printVal" onKeyUp="value = value.replace(/[^A-Za-z0-9]/g, '')" class="form-control" style="display:inline-block;text-transform:uppercase" />
            </div>
            <div class="col-md-5 text-left">
                <button v-on:click="print" class="btn btn-primary">打印pdf</button>
            </div>
        </div>
    </div>
    <div class="printContent text-center">
        <b class="mo">{{printMo}}</b>
        <div class="jsbar">
            <svg id="barcode"></svg>
        </div>
        @*<canvas id="barcode"></canvas>
            <img id="barcode" />*@
    </div>
</div>
<script>
    var app = new Vue({
        el: "#app",
        data: {
            printVal: "18AA77701A00008",
            printMo: "1-A08",
        },
        watch: {
            printVal: (val) => {
                if (val != "") {
                    this.setjsbar(val);
                } else {
                    $(".jsbar").html('<svg id="barcode"></svg>');
                };
            },
            printMo: (val) => {

            },
        },
        mounted: function () {
            this.setjsbar(this.printVal);
        },
        methods: {
            print: () => {
                $(".printhide").hide();
                window.print();
                $(".printhide").show();
            },
            setjsbar: (v) => {
                JsBarcode("#barcode", v.toUpperCase(), {
                    height: 70, //条形码的高度
                    fontOptions: "bold",//使文字加粗体或变斜体
                    format: "CODE128",
                    font: "monospace",
                    textAlign: "center",
                    textMargin: 0,//设置条形码和文本之间的间距
                    fontSize: 40,//设置文本的大小
                    lineColor: "#000",//条形码颜色
                    margin: 0,//设置条形码周围的空白边距
                    marginTop: 15
                });
            },
        },
    });
</script>