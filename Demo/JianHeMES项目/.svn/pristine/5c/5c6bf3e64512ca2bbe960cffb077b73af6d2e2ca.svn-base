@model IEnumerable<JianHeMES.Models.Personnel_Reasons_for_leaving>

@{
    ViewBag.Title = "Index";
}
<link href="~/Scripts/Bootstraps/Element-ui.css" rel="stylesheet" />
<script src="~/Scripts/Bootstraps/Element-ui.js"></script>
<script src="~/Scripts/axios.min.js"></script>
@*<h2>Index</h2>*@
<style>
    .el-table--small th,.el-table .cell, .el-table th div,.el-table--small td,.el-table .cell,.el-table .cell{
        padding:2px;
        padding-left:2px !important;
    }
    .el-button--mini{
        padding:5px;
    }
    .timePicker{
        text-align:center;
        margin: 15px auto;
    }
</style>
<p>
    @Html.ActionLink("Create New", "Create")
</p>

<div id="app">
    <div class="timePicker" >
        <el-date-picker v-model="times"
                        type="month"
                        size="small"
                        placeholder="选择月">
        </el-date-picker>
        各部门离职情况汇总
    </div>
    <el-table v-bind:data="tableData" style="width: 100%" size="small">
        <el-table-column prop="date" label="部门" align="center" width="90">
        </el-table-column>
        <el-table-column prop="date" align="center" label="月初人数" width="40">
        </el-table-column>
        <el-table-column prop="date" align="center" label="月末人数" width="40">
        </el-table-column>
        <el-table-column prop="date" align="center" label="平均人数" width="40">
        </el-table-column>
        <el-table-column prop="date" align="center" label="入职人数" width="40">
        </el-table-column>
        <el-table-column prop="date" align="center" label="离职人数" width="40">
        </el-table-column>
        <el-table-column align="center" label="离职族群汇总">
            <el-table-column prop="name" align="center" label="操作族" width="55">
            </el-table-column>
            <el-table-column prop="name" align="center" label="技术族" width="55">
            </el-table-column>
            <el-table-column prop="name" align="center" label="专业族" width="55">
            </el-table-column>
            <el-table-column prop="name" align="center" label="服务族" width="55">
            </el-table-column>
            <el-table-column prop="zip" align="center" label="管理族" width="55">
            </el-table-column>
        </el-table-column>
        <el-table-column align="center" label="离职原因">
            <el-table-column align="center" prop="name" label="薪酬不满意" width="70">
            </el-table-column>
            <el-table-column align="center" prop="name" label="制度不满意" width="70">
            </el-table-column>
            <el-table-column align="center" prop="province" label="管理不满意" width="70">
            </el-table-column>
            <el-table-column align="center" prop="city" label="工作环境不满意" width="95">
            </el-table-column>
            <el-table-column align="center" prop="zip" label="更好的发展" width="70">
            </el-table-column>
        </el-table-column>
        <el-table-column prop="date" align="center" label="离职率
（含入职未满7天人员）" width="90">
        </el-table-column>
        <el-table-column prop="date" label="操作" align="center" width="110">
            <template slot-scope="scope">
                <el-button size="mini" v-on:click="handleEdit(scope.$index, scope.row)">Edit</el-button>
                <el-button size="mini" type="danger" v-on:click="handleDelete(scope.$index, scope.row)">Delete</el-button>
            </template>
        </el-table-column>
    </el-table>
    {{times}}
</div>



<script>
      var vm = new Vue({
        el: "#app",
        data: {
            times:"",
          tableData: [{
            date: '2016-05-03',
            name: '王小虎',
            province: '上海',
            city: '普陀区',
            address: '上海市普陀区金沙江路 1518 弄',
            zip: 200333
          }, {
            date: '2016-05-02',
            name: '王小虎',
            province: '上海',
            city: '普陀区',
            address: '上海市普陀区金沙江路 1518 弄',
            zip: 200333
          }, {
            date: '2016-05-04',
            name: '王小虎',
            province: '上海',
            city: '普陀区',
            address: '上海市普陀区金沙江路 1518 弄',
            zip: 200333
          }, {
            date: '2016-05-01',
            name: '王小虎',
            province: '上海',
            city: '普陀区',
            address: '上海市普陀区金沙江路 1518 弄',
            zip: 200333
          }, {
            date: '2016-05-08',
            name: '王小虎',
            province: '上海',
            city: '普陀区',
            address: '上海市普陀区金沙江路 1518 弄',
            zip: 200333
          }, {
            date: '2016-05-06',
            name: '王小虎',
            province: '上海',
            city: '普陀区',
            address: '上海市普陀区金沙江路 1518 弄',
            zip: 200333
          }, {
            date: '2016-05-07',
            name: '王小虎',
            province: '上海',
            city: '普陀区',
            address: '上海市普陀区金沙江路 1518 弄',
            zip: 200333
          }]
        },
        methods: {
          handleEdit(index, row) {
              console.log(index, row);
          },
          handleDelete(index, row) {
            console.log(index, row);
          },
          getInfos() {
              if (this.times != '') {
                  var d = new Date(this.times);
                  year = d.getFullYear();
                  month = d.getMonth()+1;
                  months = month.toString().padStart(2, '0')
                  axios.post("/Personnel_Reasons_for_leaving/For_leaving", { Year: year, Month: months }).then(res=> {
                      console.log(res.data);
                      console.log(111)
                  }).catch(err=>{
                      console.log(222)
                  })
              }
          }
        },
        watch: {
            times() {
                this.getInfos();
            }
        }
      })

</script>

@*<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.jobNum)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Department_leaving)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DP_group)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Position)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.levelType)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.HireDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LastDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Remark)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Department_of_conclusion)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.HR_conclusion)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Pay_dissatisfaction)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.NotSystem)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Notmanagement)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Jobenvironment)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Better_development)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.jobNum)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Department_leaving)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DP_group)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Position)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.levelType)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.HireDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Remark)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Department_of_conclusion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.HR_conclusion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Pay_dissatisfaction)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.NotSystem)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Notmanagement)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Jobenvironment)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Better_development)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table>*@
