
@{
    ViewBag.Title = "Small_Sample_Arguments";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/styleFile/packaging/index.css" rel="stylesheet" />
<script src="~/Content/styleFile/packaging/index.js"></script>
<script src="~/Scripts/axios.min.js"></script>

<style>
    .table-container {
        width: 42%;
        margin-top: 5px;
    }
    .tb {
        display: inline-flex;
        margin-bottom: 5px;
    }
    .table .cell, .el-table th, .el-table td {
        text-align: center;
        padding: 4px;
    }
    .el-form-item {
        margin-bottom: 10px;
    }
</style>

<div id="app">
    <h3 style="text-align:center">小样参数</h3>
    <el-dialog title="提示" v-bind:visible.sync="icVisible" width="15%">
        <span slot="title">
            <h3 style="text-align:center;">添加IC型号</h3>
            <el-form label-position="labelPosition" label-width="80px">
                <el-form-item label="IC型号">
                    <el-input v-model="IC_Model" size="small"></el-input>
                </el-form-item>
                <el-form-item label="V值">
                    <el-input v-model="V_REXT" size="small"></el-input>
                </el-form-item>
                <el-form-item label="N值">
                    <el-input v-model="N_Value" size="small"></el-input>
                </el-form-item>
                <el-form-item label="G值">
                    <el-input v-model="Gain" size="small"></el-input>
                </el-form-item>
            </el-form>
        </span>
        <span slot="footer" class="dialog-footer">
            <el-button v-on:click="icVisible = false" size="small">取 消</el-button>
            <el-button type="primary" v-on:click="addIC" size="small">添 加</el-button>
        </span>
    </el-dialog>

    <el-dialog title="提示" v-bind:visible.sync="jjVisible" width="15%">
        <span slot="title">
            <h3 style="text-align:center;">添加PH间距</h3>
            <el-form label-position="labelPosition" label-width="80px">
                <el-form-item label="间距">
                    <el-input v-model="Spacing" size="small"></el-input>
                </el-form-item>
                <el-form-item label="最低值">
                    <el-input v-model="Least" size="small"></el-input>
                </el-form-item>
                <el-form-item label="最高值">
                    <el-input v-model="Maximum" size="small"></el-input>
                </el-form-item>
            </el-form>
        </span>
        <span slot="footer" class="dialog-footer">
            <el-button v-on:click="jjVisible = false" size="small">取 消</el-button>
            <el-button type="primary" v-on:click="addJj" size="small">添 加</el-button>
        </span>
    </el-dialog>

    <el-dialog title="提示" v-bind:visible.sync="mxVisible" width="15%">
        <span slot="title">
            <h3 style="text-align:center;">添加模块型号</h3>
            <el-form label-position="labelPosition" label-width="80px">
                <el-form-item label="模块型号">
                    <el-input v-model="Mo2" size="small"></el-input>
                </el-form-item>
                <el-form-item label="间距">
                    <el-input v-model="Spacing" size="small"></el-input>
                </el-form-item>
        </span>
        <span slot="footer" class="dialog-footer">
            <el-button v-on:click="mxVisible = false" size="small">取 消</el-button>
            <el-button type="primary" v-on:click="addMx" size="small">添 加</el-button>
        </span>
    </el-dialog>

    <div class="tb" border="1">
        <el-table v-bind:data="tableData"
                  border max-height="260"
                  class="table-container">
            <el-table-column prop="IC_Model"
                             label="IC型号"
                             width="117">
            </el-table-column>
            <el-table-column prop="V_REXT"
                             label="V值"
                             width="120">
            </el-table-column>
            <el-table-column prop="N_Value"
                             label="N值"
                             width="120">
            </el-table-column>
            <el-table-column prop="Gain"
                             label="G值"
                             width="120">
            </el-table-column>
        </el-table>

        <el-table v-bind:data="tableData1"
                  border max-height="260"
                  class="table-container" style="margin-left:15px">
            <el-table-column prop="Spacing"
                             label="间距"
                             width="157">
            </el-table-column>
            <el-table-column prop="Least"
                             label="最低值"
                             width="160">
            </el-table-column>
            <el-table-column prop="Maximum"
                             label="最高值"
                             width="160">
            </el-table-column>
        </el-table>
        <el-row>
            <el-button type="primary" size="mini" v-on:click="icVisible = true" style="margin:3px">添加IC</el-button>
        </el-row>
        <el-row>
            <el-button type="primary" size="mini" v-on:click="jjVisible = true" style="margin:3px">添加间距</el-button>
        </el-row>
    </div>

    <div>
        <el-table v-bind:data="tableData2"
                  border max-height="260"
                  class="table-container">
            <el-table-column prop="Mo2"
                             label="模块型号"
                             width="237">
            </el-table-column>
            <el-table-column prop="Spacing"
                             label="间距"
                             width="240">
            </el-table-column>
        </el-table>
        <el-row>
            <el-button type="primary" size="mini" v-on:click="mxVisible = true" style="margin:5px">添加模型</el-button>
        </el-row>
    </div>
</div>
<script>
    var app = new Vue({
        el: "#app",
        data: {
            tableData: [],
            tableData1: [],
            tableData2: [],
            icVisible: false,
            jjVisible: false,
            mxVisible: false,
            labelPosition: 'right',
            IC_Model: '',
            V_REXT: '',
            N_Value: '',
            Gain: '',
            Spacing: '',
            Least: '',
            Maximum: '',
            Mo2: '',
            Spacing: '',
        },
        created: function () {
            this.gettableData()
        },
        methods: {
            gettableData: function () {
                axios.post('/small_Sample/Small_Sample_Arguments_Getdata').then(res => {
                    let tone = JSON.parse(res.data.Small_Sample_IC_Model_Arguments_list);
                    let ttwo = JSON.parse(res.data.Small_Sample_Spacing_Value_list);
                    let tthree = JSON.parse(res.data.Small_Sample_ICmodel_Spacing_list);
                    console.log(tone)
                    this.tableData = tone;
                    this.tableData1 = ttwo;
                    this.tableData2 = tthree;
                }).catch(err => {
                    console.log("获取数据失败")
                })
            },
            addIC: function () {
                let icarr = { IC_Model: this.IC_Model, V_REXT: this.V_REXT, N_Value: this.N_Value, Gain: this.Gain }
                console.log(icarr)
                axios.post('/Small_Sample/Small_Sample_IC_Model_Arguments_modify_add', {
                    record: icarr
                }).then(res => {
                    this.icVisible = false;
                    this.$message({
                        message: res.data,
                        type: 'success'
                    });

                }).catch(err => {

                })
            },
            addJj: function () {
                let jjarr = { Spacing: this.Spacing, Least: this.Least, Maximum: this.Maximum, }
                axios.post('/Small_Sample/Small_Sample_Spacing_Value_add', {
                    record: jjarr
                }).then(res => {
                    this.jjVisible = false;
                    this.$message({
                        message: res.data,
                        type: 'success'
                    });
                }).catch(err => {

                })
            },
            addMx: function () {
                let mxarr = { Mo2: this.Mo2, Spacing: this.Spacing }
                axios.post('/Small_Sample/Small_Sample_ICmodel_Spacing_add', {
                    record: mxarr
                }).then(res => {
                    this.mxVisible = false;
                    this.$message({
                        message: res.data,
                        type: 'success'
                    });
                }).catch(err => {

                })
            }
        }
    })
</script>
