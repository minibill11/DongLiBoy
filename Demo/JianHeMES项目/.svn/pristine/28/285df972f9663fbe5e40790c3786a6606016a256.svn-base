@*<script>*@
@{
    ViewBag.Title = "MES首页";
    Layout = "~/Views/Shared/_Layout_HomePage.cshtml";
    //Layout =null;
}
@*</script>*@
<script src="~/Scripts/axios.min.js"></script>
<style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }

    .divContent {
        width: 50%;
        height: 300px;
        float: left;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 15px;
    }

    #MES_Plans, #HR, #MES_Excution, #Environment {
        width: 300px;
        cursor: pointer;
    }
</style>
<body>
    <div id="app" class="container">
        <div class="divContent text-center">
            <a v-on:click="skipGoing($event,'MES_Plans')">
                <img id="MES_Plans" src="~/Images/MES_Plans.jpg" class="img-responsive center-block" />
            </a>
        </div>
        <div class="divContent text-center">
            <a v-on:click="skipGoing($event,'MES_Excution')">
                <img id="MES_Excution" src="~/Images/MES_Excution.jpg" class="img-responsive center-block" />
            </a>
        </div>
        <div class="divContent text-center">
            <a v-on:click="skipGoing($event,'HR')">
                <img id="HR" src="~/Images/HR.jpg" class="img-responsive center-block" />
            </a>
        </div>
        <div class="divContent text-center">
            <a v-on:click="skipGoing($event,'Environment')">
                <img id="Environment" src="~/Images/Environment.jpg" class="img-responsive center-block" />
            </a>
        </div>

    </div>
</body>
<script>
    var app = new Vue({
        el: "#app",
        data: {

        },
        methods: {
            skipGoing: (e, name) => {
                e.preventDefault();
                if (app.$options.methods.JudgeLoginStatus()) {
                    switch (name) {
                        case "MES_Plans":
                            app.$options.methods.JudgeLoginPermissions("MES_Plans")
                            app.$options.methods.MES_Plans();
                            break;
                        case "MES_Excution":
                            app.$options.methods.JudgeLoginPermissions("MES_Excution")
                            app.$options.methods.MES_Excution();
                            break;
                        case "HR":
                            app.$options.methods.JudgeLoginPermissions("HR")
                            app.$options.methods.HR();
                            break;
                        case "Environment":
                            app.$options.methods.JudgeLoginPermissions("Environment")
                            app.$options.methods.Environment();
                            break;
                        default:
                            return false;
                    };
                };
            },
            MES_Plans: () => {
                sessionStorage.setItem("isselect", "true");
                sessionStorage.setItem("MES_Plans", "true");
            },
            MES_Excution: () => {
                sessionStorage.setItem("isselect", "true");
                sessionStorage.setItem("MES_Excution", "true");
            },
            HR: () => {
                sessionStorage.setItem("isselect", "true");
                sessionStorage.setItem("HR", "true");
            },
            Environment: (e) => {
                sessionStorage.setItem("isselect", "true");
                sessionStorage.setItem("Environment", "true");
            },
            JudgeLoginStatus: () => {
                if ("@Session["User"]" == "") {
                    $("#login").modal();
                    return false;
                } else {
                    return true;
                };
            },
            JudgeLoginPermissions: (address) => {
                axios.get("/Home/" + address).then(res=> {
                    if (res.data == false) {
                        alert("没有查看此系统权限");
                    } else {
                        location.href = "/Home/" + address;
                            //window.open("/Home/" + address);
                    };
                }).catch(err=> {
                    console.log(err);
                });
            },
        }
    });
</script>