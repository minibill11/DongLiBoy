
@{
    ViewBag.Title = "用户操作日志查询";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="~/Content/styleFile/packaging/index.css" rel="stylesheet" />
<script src="~/Content/styleFile/packaging/index.js"></script>
<script src="~/Scripts/axios.min.js"></script>
<style>
    /*.table .cell, .el-table th, .el-table td {
        text-align: center;
    }

    .et {
        display: flex;
        justify-content: flex-start;
        align-items: flex-start;
        margin-top: 5px;
    }*/

    .searchContainer, h3 {
        text-align: center;
    }

    .onediv {
        display: inline-flex;
        margin-bottom: 5px;
        width: 400px
    }
</style>


<h3>@ViewBag.Title</h3>
<div id="app">
    <div class="searchContainer">
        <div class="onediv">
            <el-input v-model.trim="content"
                      placeholder="请输入内容"
                      size="medium"
                      styple="width:150px;display:inline-block;"
                      @*allow-create filterable clearable*@>
            </el-input>
            <el-input v-model.trim="user"
                      placeholder="请输入操作者"
                      size="medium"
                      styple="width:50px;display:inline-block;"
                      @*allow-create filterable clearable*@>
            </el-input>
            @*<el-date-picker v-model="dataVal"
                                type="daterange"
                                range-separator="至"
                                start-placeholder="开始日期"
                                end-placeholder="结束日期" size="small" style="margin-top:9px">
                </el-date-picker>*@
            <el-button size="small" type="primary" v-on:click="query()">查询</el-button>
            <span style="width:150px">记录数：{{queryresultcount}}</span>
        </div>
        <br />
        <div class="text-center">
            <el-table border v-bind:data="queryresult" style="margin-top:5px;width:1200px;margin:auto;" max-height="572">
                <el-table-column property="id" label="ID" width="100" header-align="center" align="center"></el-table-column>
                <el-table-column property="Operator" label="用户" width="100" header-align="center" align="center"></el-table-column>
                <el-table-column property="OperateDT" label="操作日期" width="200" header-align="center" align="center"></el-table-column>
                <el-table-column property="OperateRecord" label="操作内容" width="1050" header-align="center"></el-table-column>
            </el-table>
        </div>
    </div>
</div>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            starttime: null,
            endtime: null,
            user: '',
            content: '',
            queryresultcount: 0,
            queryresult: [],  //查询结果
        },
        methods: {
            query() {
                axios.post("/Users/UerserOperateLogsQuery", {
                    starttime: this.starttime,
                    endtime: this.endtime,
                    user: this.user,
                    content: this.content,
                }).then(res => {
                    console.log(this.user)
                    console.log(this.content)
                    this.queryresult = res.data
                    console.log(this.queryresult)
                    this.queryresultcount = this.queryresult.length
                    console.log(this.queryresultcount)
                }).catch(err => {
                    this.$message({
                        message: '请求出错！',
                        type: 'error'
                    });
                });
            },
        },
    })
</script>