<script type="text/template" id="Eq_Table">
    @*设备稼动率汇总表*@
    <div style="margin-top:30px;" v-if="selected=='设备稼动率汇总'">
        <el-table v-bind:data="currentTable"
                  style="width: 100%"
                  border stripe>
            <el-table-column type="index" width="50">
            </el-table-column>
            <el-table-column prop="UserDepartment"
                             label="使用部门">
            </el-table-column>
            <el-table-column prop="RunnDevice"
                             label="运行时长">
            </el-table-column>
            <el-table-column prop="RunDepar_Device"
                             label="运行占比">
            </el-table-column>
            <el-table-column prop="StopnDevice"
                             label="停机时长">
            </el-table-column>
            <el-table-column prop="StopDepar_Device"
                             label="停机占比">
            </el-table-column>
            <el-table-column prop="MaintDevice"
                             label="维修时长">
            </el-table-column>
            <el-table-column prop="MaintDepar_Device"
                             label="维修占比">
            </el-table-column>
            <el-table-column label="操作">
                <template slot-scope="scope">
                    <el-button size="mini" type="text" style="text-decoration:underline;" @@click="onToTurn(scope.row,1)">详细</el-button>
                </template>
            </el-table-column>
        </el-table>
    </div>
    @*设备状态汇总表*@
    <div style="margin-top:30px;" v-else-if="selected=='设备状态汇总'">
        <el-table v-bind:data="factoryCurrentTable"
                  style="width: 100%"
                  border stripe>
            <el-table-column type="index" width="50">
            </el-table-column>
            <el-table-column prop="Userdepartment"
                             label="使用部门">
            </el-table-column>
            <el-table-column prop="Runnumber"
                             label="运行数量">
            </el-table-column>
            <el-table-column prop="Run_Depar"
                             label="运行占比">
            </el-table-column>
            <el-table-column prop="Stopnumber"
                             label="停机数量">
            </el-table-column>
            <el-table-column prop="Stop_Depar"
                             label="停机占比">
            </el-table-column>
            <el-table-column prop="Maintnumber"
                             label="维修数量">
            </el-table-column>
            <el-table-column prop="Maint_Depar"
                             label="维修占比">
            </el-table-column>
            <el-table-column label="操作">
                <template slot-scope="scope">
                    <el-button size="mini" type="text" style="text-decoration:underline;" @@click="onToTurn(scope.row,2)">详细</el-button>
                </template>
            </el-table-column>
        </el-table>
    </div>
    @*设备保养汇总表*@
    <div style="margin-top:30px;z-index:999;" v-else-if="selected=='设备保养汇总'">
        <el-table v-bind:data="maintenanceTable"
                  style="width: 100%"
                  border stripe>
            <el-table-column type="index" width="50">
            </el-table-column>
            <el-table-column prop="UserDepartment"
                             label="使用部门">
            </el-table-column>
            <el-table-column prop="Depart_HaveMaintain"
                             label="已保养">
            </el-table-column>
            <el-table-column prop="Depart_HavePercent"
                             label="已保养占比">
            </el-table-column>
            <el-table-column prop="Depart_ToMaintain"
                             label="待保养">
            </el-table-column>
            <el-table-column prop="Depart_ToPercent"
                             label="待保养占比">
            </el-table-column>    
            <el-table-column v-if="show">
            </el-table-column>
            <el-table-column v-if="show">
            </el-table-column>   
            <el-table-column label="操作">
                <template slot-scope="scope">
                    <el-button size="mini" type="text" style="text-decoration:underline;" @@click="onToTurn(scope.row,3)">详细</el-button>
                </template>
            </el-table-column>
        </el-table>
    </div>
</script>
<script>
    Vue.component('eq-table-component', {
        props: {
            show:false,
            selected: String,
            table: Object
        },
        template: document.getElementById("Eq_Table"),
        data: function () {
            return {
                selected: '',
                currentTable: [],   //设备稼动率子表
                factoryCurrentTable: [],   //设备状态子表
                maintenanceTable: [],   //设备保养子表
            }
        },
        mounted() {
            this.initTable();
        },
        methods: {
            //表数据
            initTable() {
                //console.log(this.selected, 000);
                //console.log(this.table, 888)
                this.currentTable = this.table.arr1;
                let arr = [];
                this.table.arr2.forEach(item => {
                    let obj = {
                        Userdepartment: item.UserDepartment,
                        Runnumber: item.Shuju.Runnumber,
                        Run_Depar: item.Shuju.Run_Depar,
                        Stopnumber: item.Shuju.Stopnumber,
                        Stop_Depar: item.Shuju.Stop_Depar,
                        Maintnumber: item.Shuju.Maintnumber,
                        Maint_Depar: item.Shuju.Maint_Depar,
                        Downtime: item.Shuju.Downtime,
                        Mainten: item.Shuju.Mainten,
                        Run: item.Shuju.Run,
                    }
                    arr.push(obj);
                })
                this.factoryCurrentTable = arr;
                this.maintenanceTable = this.table.arr3;
                //console.log(this.currentTable, 011);
                //console.log(this.factoryCurrentTable, 022);
                //console.log(this.maintenanceTable, 033);
            },
            //跳转
            onToTurn(row, val) {
                console.log(val);
                console.log(row);
                //if (val == 1) {
                //    //console.log(row.UserDepartment, 888888)
                //    window.open("/Equipment/EmployTime?paramData=" + row.UserDepartment);
                //}
                //if (val == 2) {
                //    window.open("/Equipment/Equipment_Production_line");
                //}
                //if (val == 3) {
                //    window.open("/Equipment/Equipment_Maintenance_Summary");
                //}
            }
        }
    });
    
</script>
