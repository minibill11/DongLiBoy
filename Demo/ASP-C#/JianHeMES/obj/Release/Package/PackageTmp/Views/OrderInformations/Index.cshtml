@model IEnumerable<JianHeMES.Models.OrderInformation>

@{
    ViewBag.Title = "订单概况";
}

<script type="text/javascript" src="~/Scripts/jquery-1.11.3.js"></script>

<h3>@ViewBag.Title</h3>
@using (Html.BeginForm("Index", "OrderInformations", FormMethod.Post, new { id = "JumpToPage" }))
{
    @Html.AntiForgeryToken()
    <p><input type="hidden" id="PageIndex" name="PageIndex" value="0" /></p>
}

<div class="text-center">
    <p class="text-success text-center btn btn-default">
        @Html.ActionLink("新建订单", "Create")
    </p>
</div>
<br />
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.OrderNum)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ModuleGroupQuantity)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.PlaceAnOrderDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DateOfDelivery)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CreateDate)
        </th>

        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.OrderNum)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ModuleGroupQuantity)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PlaceAnOrderDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateOfDelivery)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CreateDate)
        </td>

        <td>
            @Html.ActionLink("编辑", "Edit", new { id=item.ID }) |
            @Html.ActionLink("详细", "Details", new { id=item.ID }) @*|*@
            @*@Html.ActionLink("删除", "Delete", new { id=item.ID })*@
        </td>
    </tr>
}

</table>

@*-----------------------分页功能----------------------------------------------------------------------------------------*@
<div class="text-center">
    <div id="pagebar">
        @for (var i = 0; i < ViewBag.PageCount; i++)
        {
            if (i == ViewBag.PageIndex)
            {
                <span class="currentpagenumber">@(i + 1)</span>
            }
            else
            {
                <a class="pagenumber" href="javascript:;">@(i + 1)</a>
            }
        }
    </div>
</div> 
@section scripts {
    <script>
        function submitForm(pagenumber) {
            pagenumber = parseInt(pagenumber,15);
            $('#PageIndex').val(pagenumber - 1);
            $('#JumpToPage').submit();
        }
        $(function () {
            $('#pagebar .pagenumber').click(function () {
                submitForm($(this).text());
            });
        });
    </script>
}
