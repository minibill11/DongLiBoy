@model IEnumerable<JianHeMES.Models.Personnel_Roster>

@{
    ViewBag.Title = "查询首页";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Scripts/Bootstraps/bootstrap-select.css" rel="stylesheet" />
<script src="~/Scripts/Bootstraps/bootstrap-select.js"></script>
<style>
    .selectpicker {
        border: 1px solid #ccc;
    }

    .table {
        margin: 0;
    }

        .table > tbody > tr > td, .table > tbody > tr > th {
            text-align: center;
            padding: 3px;
        }

            .table > tbody > tr > td:nth-child(1), .table > tbody > tr > th:nth-child(1) {
                width: 60px;
            }

            .table > tbody > tr > td:nth-child(2), .table > tbody > tr > th:nth-child(2) {
                width: 80px;
            }

            .table > tbody > tr > td:nth-child(3), .table > tbody > tr > th:nth-child(3) {
                width: 50px;
            }

            .table > tbody > tr > td:nth-child(4), .table > tbody > tr > th:nth-child(4) {
                width: 90px;
            }

            .table > tbody > tr > td:nth-child(5), .table > tbody > tr > th:nth-child(5) {
                width: 90px;
            }

            .table > tbody > tr > td:nth-child(6), .table > tbody > tr > th:nth-child(6) {
                width: 90px;
            }

            .table > tbody > tr > td:nth-child(7), .table > tbody > tr > th:nth-child(7) {
                width: 100px;
            }

            .table > tbody > tr > td:nth-child(8), .table > tbody > tr > th:nth-child(8) {
                width: 100px;
            }

            .table > tbody > tr > td:nth-child(9), .table > tbody > tr > th:nth-child(9) {
                width: 90px;
            }

            .table > tbody > tr > td:nth-child(10), .table > tbody > tr > th:nth-child(10) {
                width: 90px;
            }

            .table > tbody > tr > td:nth-child(11), .table > tbody > tr > th:nth-child(11) {
                width: 90px;
            }

            .table > tbody > tr > td:nth-child(12), .table > tbody > tr > th:nth-child(12) {
                width: 70px;
            }

            .table > tbody > tr > td:nth-child(13), .table > tbody > tr > th:nth-child(13) {
                width: 123px;
            }
</style>
<h3 class="text-center">查询首页</h3>

<span>
    @Html.ActionLink("新增一个员工", "Create")
</span>
@using (Html.BeginForm("Index", "Personnel_Roster", FormMethod.Post, new { id = "searchForm", @class = "text-center" }))
{
    @Html.AntiForgeryToken()
    <div>
        <span>工号：</span><input type="text" class="form-control" style="display:inline;width:150px;" name="jobNum" />
        <span>姓名：</span><input type="text" class="form-control" style="display:inline;width:150px;" name="name" />
        <span>部门:</span>@Html.DropDownList("department", (List<SelectListItem>)ViewBag.departmentList, "全部", new { @class = "selectpicker", data_live_search = "true", data_style = "form-control" })
        <input type="submit" class="btn btn-default" value="查找" />
    </div>
}
<br />
<div style="width:1123px; height:35px;">
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.JobNum)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Sex)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DateOfBirth)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Education)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DP_Group)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.HireDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.LastDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Department)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Status)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.levelType)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OnPostMonth)
            </th>
            <th>操作</th>
        </tr>
    </table>
</div>

<div style="width:1140px;height:600px;overflow:auto;">
    <table class="table">
        @foreach (var item in Model)
            {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.JobNum)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @if (item.Sex == false)
                    {
                        <span>女</span>
                    }
                    else if (item.Sex == true)
                    {
                        <span>男</span>
                    }
                    @*@Html.DisplayFor(modelItem => item.Sex)*@
                </td>
                <td>
                    <span>@item.DateOfBirth.ToString().Split(' ')[0]</span>
                    @*@Html.DisplayFor(modelItem => item.DateOfBirth)*@
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Education)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DP_Group)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.HireDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LastDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Department)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Status)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.levelType)
                </td>
                <td>
                    @{
                        if (item.OnPostMonth == 0)
                        {
                            <span></span>
                        }
                        else
                        {
                            <span>@item.OnPostMonth.ToString().Split('.')[0]</span>
                            @*@Html.DisplayFor(modelItem => item.OnPostMonth)*@
                        }
                    }
                </td>
                <td>
                    @{var UserRoles = Session["User"] == null ? string.Empty : ((JianHeMES.Models.Users)Session["User"]).Role; }
                    @if (((JianHeMES.Models.Users)Session["User"]) != null)
                {
                    if (UserRoles == "系统管理员")
                    {
                            <span>
                                @Html.ActionLink("修改", "Edit", new { id = item.Id }) |
                                @Html.ActionLink("详细", "Details", new { id = item.Id }) |
                                @Html.ActionLink("删除", "Delete", new { id = item.Id })
                            </span>
                        }
                    }
                    else
                    {
                        @Html.ActionLink("修改", "Edit", new { id = item.Id })
                    }

                </td>
            </tr>
                        }
    </table>
</div>
