<!DOCTYPE html>
<html style="" class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>组装完成 - 健和光电MES</title>
    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/jquery"></script>

    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/jqueryform"></script>

    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/jqueryval"></script>

    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/jqueryvalAll"></script>

    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/home"></script>

    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/common"></script>

    <link href="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/easyui" rel="stylesheet">

    <link href="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/easyuicss.css" rel="stylesheet">

    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/modernizr"></script>

    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/bootstrap"></script>

    <link href="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/css.css" rel="stylesheet">

    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/echarts"></script>

    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/vue"></script>

    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/highcharts.html"></script>

</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                
                <a class="navbar-brand" href="http://172.16.6.145/">健和光电MES</a>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            全厂温湿度
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu collapse" style="text-align: center; min-width: 114px;">
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/FirstFloor">一楼</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/ThirdFloor">三楼</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/FourthFloor">四楼</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/FifthFloor">五楼</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/Sixthfloor">六楼</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/FloorDataShow">汇总表</a></li>
                        </ul>
                    </li>
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            空压机房
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu collapse" style="text-align: center; min-width: 114px;">
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa">空压机房</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/KYDataShow">汇总表</a></li>
                        </ul>
                    </li>


                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            订单
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu collapse" style="text-align: center; min-width: 114px;">
                            <li><a href="http://172.16.6.145/OrderMgms">订单管理</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/BarCodes">条码管理</a></li>
                        </ul>
                    </li>

                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            装配一部
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu collapse" style="text-align: center; min-width: 114px;">
                            <li><a href="http://172.16.6.145/Assembles/AssembleIndex">组装产线</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/CalibrationRecords">校正信息</a></li>
                        </ul>
                    </li>

                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            品质部
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu collapse" style="text-align: center; min-width: 114px;">
                            <li><a href="http://172.16.6.145/Assembles/AssembleIndex">组装PQC</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/Burn_in">老化OQC</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/Appearances">外观包装</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/IQCReports">IQC管理</a></li>
                        </ul>
                    </li>
                    

                    

                        <li><a href="http://172.16.6.145/Users">用户管理</a></li>
                </ul>

                <div class="collapse navbar-collapse">
                    <ul class="nav navbar navbar-nav navbar-right">
                        <li>

                            
                            </li><li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                             郑振彪
                               <b class="caret"></b>
                             </a>
                               <ul class="dropdown-menu collapse" style="text-align: center; min-width: 100px;">
                                  <li>
                                    <a href="http://172.16.6.145/Users/Modifypwd/11">修改密码</a>
                                  </li>
                               </ul>
                             </li>
                           <li>
<a href="http://172.16.6.145/Users/Logoff">退出</a>                           </li>
                      </ul>
                </div>
                
            </div>
        </div>
    </div>
    <div class="container body-content">
        

<link href="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/bootstrap.css" rel="stylesheet">
<script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/vue.js"></script>

<style>
        .table > tbody > tr > td {
        padding: 5px;
        line-height: 1.2;
    }

    .table > tbody > tr > th {
        padding: 5px;
        line-height: 1.3;
    }

    .panel-heading {
        padding: 5px 25px;
    }

    .panel-title {
        font-size: 12px;
        height: 18px;
    }
    .color-show {
        display: flex;
        flex-wrap: wrap;
    }

    .color-box {
        width: 20%;
        text-align: center;
        transition: transform .3s;
    }
</style>



<form action="/Assembles/AssembleStationF/142" method="post" novalidate="novalidate"><input name="__RequestVerificationToken" value="VFr1zDWW_5h9s9d8h69WmLjnSlFxas-BSRlkAkfGyueKOLLM_cb_YGOTzroJyGR5M92EJLSbx0hCO7lr0Fp-oAalvsb8bXXxcrch9mRwyUY1" type="hidden">    <div class="form-horizontal">
        
        <input data-val="true" data-val-number="字段 Id 必须是一个数字。" data-val-required="Id 字段是必需的。" id="Id" name="Id" value="142" type="hidden">
        
        
        <input class="control-label col-md-4" id="AssemblePrincipal" name="AssemblePrincipal" value="郑振彪" type="hidden">
        <input class="control-label col-md-4" data-val="true" data-val-date="字段 完成时间 必须是日期。" id="AssembleFT" name="AssembleFT" value="" type="hidden">
        <input class="control-label col-md-4" id="AssembleTime" name="AssembleTime" value="" type="hidden">
        <input class="control-label col-md-4" data-val="true" data-val-required="是否已经完成组装 字段是必需的。" id="AssembleFinish" name="AssembleFinish" value="False" type="hidden">

 
        <div id="app" class="container"><div class="col-md-offset-1 col-md-4"><div class="form-group"><div class="col-md-4"></div> <div class="col-md-8"><h3>
                            组装完成
                        </h3></div></div> <div class="form-group"><label for="BoxBarCode" class="control-label col-md-4">箱体模组条码</label> <div class="col-md-8"><input id="BoxBarCode" name="BoxBarCode" readonly="readonly" value="18DA12302A00001" class="form-control text-box single-line" type="text"> <input id="OrderNum" name="OrderNum" readonly="readonly" value="2018-GA321-1" class="form-control text-box single-line" style="display: none;" type="text"> <span data-valmsg-for="BoxBarCode" data-valmsg-replace="true" class="field-validation-valid text-danger"></span></div></div> <div class="form-group"><label for="AssembleBT" class="control-label col-md-4">开始时间</label> <div class="col-md-8"><input data-val="true" data-val-date="字段 开始时间 必须是日期。" id="AssembleBT" name="AssembleBT" readonly="readonly" value="2018/8/3 17:03:14" class="form-control text-box single-line" type="datetime"> <span data-valmsg-for="AssembleBT" data-valmsg-replace="true" class="field-validation-valid text-danger"></span></div></div> <div class="form-group"><label for="ModelCollections" class="control-label col-md-4">输入模块号</label> <div class="col-md-8"><input placeholder="请输入模块条码" id="content" class="form-control valid" style="display: inline-block;" aria-invalid="false" type="text"> <input placeholder="请输入模块条码" name="ModelCollections" class="form-control" style="display: none;" value="[{&quot;StationId&quot;:1,&quot;OrderNum&quot;:&quot;2018-GA321-1&quot;,&quot;BoxBarCode&quot;:&quot;18DA12302A00001&quot;,&quot;BarCodesNum&quot;:&quot;事实上&quot;},{&quot;StationId&quot;:2,&quot;OrderNum&quot;:&quot;2018-GA321-1&quot;,&quot;BoxBarCode&quot;:&quot;18DA12302A00001&quot;,&quot;BarCodesNum&quot;:&quot;嘻嘻嘻&quot;}]" type="text"> <button class="btn btn-default">添加</button> <br><span style="color: red; display: none;">不能输入相同条码</span></div></div> <div class="form-group"><div class="col-md-offset-4 col-md-8"><input value="完成组装" class="btn btn-default" type="submit"></div></div></div> <div class="col-md-offset-3 col-md-3"><br> <div class="panel panel-default"><div class="panel-heading"><h6 class="panel-title">订单详情</h6></div> <div class="panel-body"><table class="table" style="font-size: 11px;"><tbody><tr><th colspan="2" style="text-align: center;">组装工位详情</th></tr><tr><td><label for="AssembleBT">开始时间</label></td> <td>2018/8/3 17:03:14</td></tr> <tr><td><label for="AssemblePrincipal">模块组装负责人</label></td> <td>郑振彪</td></tr> <tr><td><label for="AssembleFT">完成时间</label></td> <td></td></tr> <tr><td><label for="ModelCollections">模块条码清单</label></td> <td></td></tr> <tr><td><label for="AssembleTime">组装时长</label></td> <td></td></tr> <tr><td><label for="AssembleFinish">是否已经完成组装</label></td> <td><input disabled="disabled" class="check-box" type="checkbox"></td></tr></tbody></table></div></div></div> <div class="form-group"><div class="col-md-offset-2 col-md-8"></div></div> <div class="form-group"><label for="ModelCollections" class="control-label col-md-2">模块条码清单:</label> <div class="col-md-6"><div class="form-group color-show"><li readonly="readonly" class="color-box form-control" style="border: medium none; box-shadow: none;" draggable="true" drag_group="task" drag_block="task" drag_key="事实上"><span>事实上</span> <button type="button" title="移除任务" style="border: medium none; float: right;">✗</button></li><li readonly="readonly" class="color-box form-control" style="border: medium none; box-shadow: none;" draggable="true" drag_group="task" drag_block="task" drag_key="嘻嘻嘻"><span>嘻嘻嘻</span> <button type="button" title="移除任务" style="border: medium none; float: right;">✗</button></li></div></div></div> <div><a href="http://172.16.6.145/Assembles/AssembleIndex">返回</a></div></div>
            

        


</div></form>
<script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/jquery-1.js"></script>
<script type="text/javascript">
			Vue.use(VueDragging); //使用拖拽
			var app = new Vue({ //创建Vue对象实例
				el: "#app", //挂载DOM元素的ID
				data: {
					tasks: JSON.parse(localStorage.getItem('key') || '[]'),
					jsons: localStorage.getItem('key') || '[]',
					newTask: "", //input默认值
					same: true,
					prompt: false
				},
				methods: {
					//添加条码，判断是否为空，判断字符前后空格，焦点回到input，判断是否有重复数据，序号排列，保持本地存储
					addTask: function(event) {
						event.preventDefault();
						addtasks = this.tasks;
						sames = this.same;
						this.prompt = false;
						if(this.newTask != "") {
							addtasks.forEach(function(item, index) {
								item.StationId = index + 1;
								if(app.newTask == item.BarCodesNum) {
									console.log(index);
									console.log('不能输入相同条码');
									app.prompt = true;
									sames = false;
								}
							});
							if(sames) { //没有相同数据才允许添加
							    addtasks.push({
							        StationId: app.tasks.length+1,
							        OrderNum: $("#OrderNum").val(),
							        BoxBarCode: $("#BoxBarCode").val(),
									BarCodesNum: this.newTask
									
								});
								//localStorage.setItem('key', JSON.stringify(listTask));    无效
							    localStorage.setItem('key', JSON.stringify(app.tasks));
							    app.jsons = localStorage.getItem('key');
								this.newTask = "";
								$("#content").focus();
								//console.log(JSON.stringify(app.tasks)); //数组
								console.log(JSON.parse(localStorage.getItem('key'))); //object，JavaScript对象
							}

						}
					},
					removeTask: function(task) { //删除条码，重新排序数组，焦点回到input，保存删除后的数据
						//指向Vue实例中的tasks
						removetasks = this.tasks;
						//remove
						removetasks.forEach(function(item, index) {
							if(item.BarCodesNum == task.BarCodesNum) {
								removetasks.splice(index, 1);
							}
						});
						removetasks.forEach(function(item, index) {
							item.StationId = index + 1;
						});

						localStorage.setItem('key', JSON.stringify(app.tasks));
						app.jsons = localStorage.getItem('key');
						app.prompt = false;
						console.log(JSON.parse(localStorage.getItem('key'))); //输出删除后的排序
						$("#content").focus();
					},
					clearTask: function() { //清空本地存储表单
						//event.preventDefault();
						localStorage.removeItem('key');
						this.tasks = [];
					}
				},
				mounted: function() {
					//this.$dragging.$on('dragged', function(data) { //拖拽过程中响应
					//	//console.log('dragged', JSON.stringify(data))
					//})
					this.$dragging.$on('dragend', function(data) { //拖拽结束后响应，排序拖拽后数据，存储本地
						//console.log('dragend', data);
						app.tasks.forEach(function(item, index) {
							item.StationId = index + 1;
						});
						localStorage.setItem('key', JSON.stringify(app.tasks));
						app.jsons = localStorage.getItem('key');
						console.log(JSON.parse(localStorage.getItem('key'))); //object，JavaScript对象
					})
				}

			});
			//$("#finishButton").submit(function () {
			//    var jsons = localStorage.getItem('key')
			//    return jsons;
			//})
</script>




        
    <script src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/jqueryval"></script>


        <hr>
        <footer>
            <p align="center">© 2018 - 健和光电MES</p>
        </footer>
    </div>



<div id="translate-man-app" class="content-3WfBL_0" style="display: none;"><div data-v-2b7a7e32="" class="outputBox-qe9A4_0"><div data-v-2b7a7e32="" class="outputBox-3oESn_0"><span data-v-2b7a7e32="" class="outputBox-13Ovx_0"></span><!----></div><div data-v-2b7a7e32="" class="outputBox-1GLb__0"><!----><div data-v-2b7a7e32="" class="outputBox-onVZH_0"><img src="%E7%BB%84%E8%A3%85%E5%AE%8C%E6%88%90_files/sound.svg" class="icon-tprjJ_0"></div></div><div data-v-2b7a7e32="" class="outputBox-2sJgr_0"></div><div data-v-2b7a7e32="" class="outputBox-17RAm_0" style="display: none;"><!----><!----><!----><div data-v-2b7a7e32=""></div></div></div></div></body></html>