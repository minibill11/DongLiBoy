$(function(){"use strict";function r(n){var t=n.data;n.isDefaultPrevented()||(n.preventDefault(),$(this).ajaxSubmit(t))}function u(n){var i=n.target,r=$(i),u,t,f;if(!r.is("[type=submit],[type=image]")){if(u=r.closest("[type=submit]"),u.length===0)return;i=u[0]}t=this;t.clk=i;i.type=="image"&&(n.offsetX!==undefined?(t.clk_x=n.offsetX,t.clk_y=n.offsetY):typeof $.fn.offset=="function"?(f=r.offset(),t.clk_x=n.pageX-f.left,t.clk_y=n.pageY-f.top):(t.clk_x=n.pageX-i.offsetLeft,t.clk_y=n.pageY-i.offsetTop));setTimeout(function(){t.clk=t.clk_x=t.clk_y=null},100)}function n(){if($.fn.ajaxSubmit.debug){var n="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(n):window.opera&&window.opera.postError&&window.opera.postError(n)}}var t={},i;t.fileapi=$("<input type='file'/>").get(0).files!==undefined;t.formdata=window.FormData!==undefined;i=!!$.fn.prop;$.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var n=this.prop.apply(this,arguments);return n&&n.jquery||typeof n=="string"?n:this.attr.apply(this,arguments)};$.fn.ajaxSubmit=function(r){function ut(n){for(var i=$.param(n).split("&"),f=i.length,u=[],r,t=0;t<f;t++)i[t]=i[t].replace(/\+/g," "),r=i[t].split("="),u.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return u}function ft(n){for(var u,i,e,f=new FormData,t=0;t<n.length;t++)f.append(n[t].name,n[t].value);if(r.extraData)for(u=ut(r.extraData),t=0;t<u.length;t++)u[t]&&f.append(u[t][0],u[t][1]);return r.data=null,i=$.extend(!0,{},$.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:s||"POST"}),r.uploadProgress&&(i.xhr=function(){var n=jQuery.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(n){var t=0,i=n.loaded||n.position,u=n.total;n.lengthComputable&&(t=Math.ceil(i/u*100));r.uploadProgress(n,i,u,t)},!1),n}),i.data=null,e=i.beforeSend,i.beforeSend=function(n,t){t.data=f;e&&e.call(this,n,t)},$.ajax(i)}function it(t){function et(t){var i=null;try{t.contentWindow&&(i=t.contentWindow.document)}catch(r){n("cannot get iframe.contentWindow document: "+r)}if(i)return i;try{i=t.contentDocument?t.contentDocument:t.document}catch(r){n("cannot get iframe.contentDocument: "+r);i=t.document}return i}function ot(){function o(){try{var t=et(l).readyState;n("state = "+t);t&&t.toLowerCase()=="uninitialized"&&setTimeout(o,50)}catch(i){n("Server abort: ",i," (",i.name,")");w(nt);d&&clearTimeout(d);d=undefined}}var r=u.attr2("target"),e=u.attr2("action"),i,t,h;c.setAttribute("target",k);s||c.setAttribute("method","POST");e!=f.url&&c.setAttribute("action",f.url);f.skipEncodingOverride||s&&!/post/i.test(s)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});f.timeout&&(d=setTimeout(function(){it=!0;w(rt)},f.timeout));i=[];try{if(f.extraData)for(t in f.extraData)f.extraData.hasOwnProperty(t)&&($.isPlainObject(f.extraData[t])&&f.extraData[t].hasOwnProperty("name")&&f.extraData[t].hasOwnProperty("value")?i.push($('<input type="hidden" name="'+f.extraData[t].name+'">').val(f.extraData[t].value).appendTo(c)[0]):i.push($('<input type="hidden" name="'+t+'">').val(f.extraData[t]).appendTo(c)[0]));f.iframeTarget||(a.appendTo("body"),l.attachEvent?l.attachEvent("onload",w):l.addEventListener("load",w,!1));setTimeout(o,15);try{c.submit()}catch(v){h=document.createElement("form").submit;h.apply(c)}}finally{c.setAttribute("action",e);r?c.setAttribute("target",r):u.removeAttr("target");$(i).remove()}}function w(t){var i,r,p,u,b,k,s,h,c;if(!e.aborted&&!ct){if(o=et(l),o||(n("cannot access response document"),t=nt),t===rt&&e){e.abort("timeout");v.reject(e,"timeout");return}if(t==nt&&e){e.abort("server abort");v.reject(e,"error","server abort");return}if(o&&o.location.href!=f.iframeSrc||it){l.detachEvent?l.detachEvent("onload",w):l.removeEventListener("load",w,!1);i="success";try{if(it)throw"timeout";if(p=f.dataType=="xml"||o.XMLDocument||$.isXMLDoc(o),n("isXml="+p),!p&&window.opera&&(o.body===null||!o.body.innerHTML)&&--ht){n("requeing onLoad callback, DOM not available");setTimeout(w,250);return}u=o.body?o.body:o.documentElement;e.responseText=u?u.innerHTML:null;e.responseXML=o.XMLDocument?o.XMLDocument:o;p&&(f.dataType="xml");e.getResponseHeader=function(n){var t={"content-type":f.dataType};return t[n]};u&&(e.status=Number(u.getAttribute("status"))||e.status,e.statusText=u.getAttribute("statusText")||e.statusText);b=(f.dataType||"").toLowerCase();k=/(json|script|text)/.test(b);k||f.textarea?(s=o.getElementsByTagName("textarea")[0],s?(e.responseText=s.value,e.status=Number(s.getAttribute("status"))||e.status,e.statusText=s.getAttribute("statusText")||e.statusText):k&&(h=o.getElementsByTagName("pre")[0],c=o.getElementsByTagName("body")[0],h?e.responseText=h.textContent?h.textContent:h.innerText:c&&(e.responseText=c.textContent?c.textContent:c.innerText))):b=="xml"&&!e.responseXML&&e.responseText&&(e.responseXML=lt(e.responseText));try{st=vt(e,b,f)}catch(g){i="parsererror";e.error=r=g||i}}catch(g){n("error caught: ",g);i="error";e.error=r=g||i}e.aborted&&(n("upload aborted"),i=null);e.status&&(i=e.status>=200&&e.status<300||e.status===304?"success":"error");i==="success"?(f.success&&f.success.call(f.context,st,"success",e),v.resolve(e.responseText,"success",e),y&&$.event.trigger("ajaxSuccess",[e,f])):i&&(r===undefined&&(r=e.statusText),f.error&&f.error.call(f.context,e,i,r),v.reject(e,"error",r),y&&$.event.trigger("ajaxError",[e,f,r]));y&&$.event.trigger("ajaxComplete",[e,f]);y&&!--$.active&&$.event.trigger("ajaxStop");f.complete&&f.complete.call(f.context,e,i);ct=!0;f.timeout&&clearTimeout(d);setTimeout(function(){f.iframeTarget||a.remove();e.responseXML=null},100)}}}var c=u[0],tt,g,f,y,k,a,l,e,b,p,it,d,v=$.Deferred(),rt,nt,ut,ft,st,o,ht,ct;if(t)for(g=0;g<h.length;g++)tt=$(h[g]),i?tt.prop("disabled",!1):tt.removeAttr("disabled");if(f=$.extend(!0,{},$.ajaxSettings,r),f.context=f.context||f,k="jqFormIO"+(new Date).getTime(),f.iframeTarget?(a=$(f.iframeTarget),p=a.attr2("name"),p?k=p:a.attr2("name",k)):(a=$('<iframe name="'+k+'" src="'+f.iframeSrc+'" />'),a.css({position:"absolute",top:"-1000px",left:"-1000px"})),l=a[0],e={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i=t==="timeout"?"timeout":"aborted";n("aborting upload... "+i);this.aborted=1;try{l.contentWindow.document.execCommand&&l.contentWindow.document.execCommand("Stop")}catch(r){}a.attr("src",f.iframeSrc);e.error=i;f.error&&f.error.call(f.context,e,i,t);y&&$.event.trigger("ajaxError",[e,f,i]);f.complete&&f.complete.call(f.context,e,i)}},y=f.global,y&&0==$.active++&&$.event.trigger("ajaxStart"),y&&$.event.trigger("ajaxSend",[e,f]),f.beforeSend&&f.beforeSend.call(f.context,e,f)===!1)return f.global&&$.active--,v.reject(),v;if(e.aborted)return v.reject(),v;b=c.clk;b&&(p=b.name,p&&!b.disabled&&(f.extraData=f.extraData||{},f.extraData[p]=b.value,b.type=="image"&&(f.extraData[p+".x"]=c.clk_x,f.extraData[p+".y"]=c.clk_y)));rt=1;nt=2;ut=$("meta[name=csrf-token]").attr("content");ft=$("meta[name=csrf-param]").attr("content");ft&&ut&&(f.extraData=f.extraData||{},f.extraData[ft]=ut);f.forceSync?ot():setTimeout(ot,10);ht=50;var lt=$.parseXML||function(n,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)):t=(new DOMParser).parseFromString(n,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},at=$.parseJSON||function(s){return window.eval("("+s+")")},vt=function(n,t,i){var u=n.getResponseHeader("content-type")||"",f=t==="xml"||!t&&u.indexOf("xml")>=0,r=f?n.responseXML:n.responseText;return f&&r.documentElement.nodeName==="parsererror"&&$.error&&$.error("parsererror"),i&&i.dataFilter&&(r=i.dataFilter(r,t)),typeof r=="string"&&(t==="json"||!t&&u.indexOf("json")>=0?r=at(r):(t==="script"||!t&&u.indexOf("javascript")>=0)&&$.globalEval(r)),r};return v}var s,w,f,u,l,a,h,v,e,c,o,k,tt,y,p;if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;if(u=this,typeof r=="function"&&(r={success:r}),s=this.attr2("method"),w=this.attr2("action"),f=typeof w=="string"?$.trim(w):"",f=f||window.location.href||"",f&&(f=(f.match(/^([^#]+)/)||[])[1]),r=$.extend(!0,{url:f,success:$.ajaxSettings.success,type:s||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r),l={},this.trigger("form-pre-serialize",[this,r,l]),l.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(a=r.traditional,a===undefined&&(a=$.ajaxSettings.traditional),h=[],e=this.formToArray(r.semantic,h),r.data&&(r.extraData=r.data,v=$.param(r.data,a)),r.beforeSubmit&&r.beforeSubmit(e,this,r)===!1)return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[e,this,r,l]),l.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;c=$.param(e,a);v&&(c=c?c+"&"+v:v);r.type.toUpperCase()=="GET"?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+c,r.data=null):r.data=c;o=[];r.resetForm&&o.push(function(){u.resetForm()});r.clearForm&&o.push(function(){u.clearForm(r.includeHidden)});!r.dataType&&r.target?(k=r.success||function(){},o.push(function(n){var t=r.replaceTarget?"replaceWith":"html";$(r.target)[t](n).each(k,arguments)})):r.success&&o.push(r.success);r.success=function(n,t,i){for(var e=r.context||this,f=0,s=o.length;f<s;f++)o[f].apply(e,[n,t,i||u,u])};var rt=$('input[type=file]:enabled[value!=""]',this),d=rt.length>0,g="multipart/form-data",nt=u.attr("enctype")==g||u.attr("encoding")==g,b=t.fileapi&&t.formdata;for(n("fileAPI :"+b),tt=(d||nt)&&!b,r.iframe!==!1&&(r.iframe||tt)?r.closeKeepAlive?$.get(r.closeKeepAlive,function(){y=it(e)}):y=it(e):y=(d||nt)&&b?ft(e):$.ajax(r),u.removeData("jqxhr").data("jqxhr",y),p=0;p<h.length;p++)h[p]=null;return this.trigger("form-submit-notify",[this,r]),this};$.fn.ajaxForm=function(t){if(t=t||{},t.delegation=t.delegation&&$.isFunction($.fn.on),!t.delegation&&this.length===0){var i={s:this.selector,c:this.context};return!$.isReady&&i.s?(n("DOM not ready, queuing ajaxForm"),$(function(){$(i.s,i.c).ajaxForm(t)}),this):(n("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)")),this)}if(t.delegation){$(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,u).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,u);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,u)};$.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};$.fn.formToArray=function(n,i){var e=[],f,h,c,o,u,s,r,y,p,l,v,a;if(this.length===0||(f=this[0],h=n?f.getElementsByTagName("*"):f.elements,!h))return e;for(c=0,y=h.length;c<y;c++)if(r=h[c],u=r.name,u&&!r.disabled){if(n&&f.clk&&r.type=="image"){f.clk==r&&(e.push({name:u,value:$(r).val(),type:r.type}),e.push({name:u+".x",value:f.clk_x},{name:u+".y",value:f.clk_y}));continue}if(s=$.fieldValue(r,!0),s&&s.constructor==Array)for(i&&i.push(r),o=0,p=s.length;o<p;o++)e.push({name:u,value:s[o]});else if(t.fileapi&&r.type=="file")if(i&&i.push(r),l=r.files,l.length)for(o=0;o<l.length;o++)e.push({name:u,value:l[o],type:r.type});else e.push({name:u,value:"",type:r.type});else s!==null&&typeof s!="undefined"&&(i&&i.push(r),e.push({name:u,value:s,type:r.type,required:r.required}))}return!n&&f.clk&&(v=$(f.clk),a=v[0],u=a.name,u&&!a.disabled&&a.type=="image"&&(e.push({name:u,value:v.val()}),e.push({name:u+".x",value:f.clk_x},{name:u+".y",value:f.clk_y}))),e};$.fn.formSerialize=function(n){return $.param(this.formToArray(n))};$.fn.fieldSerialize=function(n){var t=[];return this.each(function(){var u=this.name,i,r,f;if(u)if(i=$.fieldValue(this,n),i&&i.constructor==Array)for(r=0,f=i.length;r<f;r++)t.push({name:u,value:i[r]});else i!==null&&typeof i!="undefined"&&t.push({name:this.name,value:i})}),$.param(t)};$.fn.fieldValue=function(n){for(var u,t,i=[],r=0,f=this.length;r<f;r++)(u=this[r],t=$.fieldValue(u,n),t!==null&&typeof t!="undefined"&&(t.constructor!=Array||t.length))&&(t.constructor==Array?$.merge(i,t):i.push(t));return i};$.fieldValue=function(n,t){var l=n.name,r=n.type,s=n.tagName.toLowerCase(),f,e,i,u;if(t===undefined&&(t=!0),t&&(!l||n.disabled||r=="reset"||r=="button"||(r=="checkbox"||r=="radio")&&!n.checked||(r=="submit"||r=="image")&&n.form&&n.form.clk!=n||s=="select"&&n.selectedIndex==-1))return null;if(s=="select"){if(f=n.selectedIndex,f<0)return null;var h=[],c=n.options,o=r=="select-one",a=o?f+1:c.length;for(e=o?f:0;e<a;e++)if(i=c[e],i.selected){if(u=i.value,u||(u=i.attributes&&i.attributes.value&&!i.attributes.value.specified?i.text:i.value),o)return u;h.push(u)}return h}return $(n).val()};$.fn.clearForm=function(n){return this.each(function(){$("input,select,textarea",this).clearFields(n)})};$.fn.clearFields=$.fn.clearInputs=function(n){var t=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,r=this.tagName.toLowerCase();t.test(i)||r=="textarea"?this.value="":i=="checkbox"||i=="radio"?this.checked=!1:r=="select"?this.selectedIndex=-1:i=="file"?/MSIE/.test(navigator.userAgent)?$(this).replaceWith($(this).clone(!0)):$(this).val(""):n&&(n===!0&&/hidden/.test(i)||typeof n=="string"&&$(this).is(n))&&(this.value="")})};$.fn.resetForm=function(){return this.each(function(){typeof this.reset!="function"&&(typeof this.reset!="object"||this.reset.nodeType)||this.reset()})};$.fn.enable=function(n){return n===undefined&&(n=!0),this.each(function(){this.disabled=!n})};$.fn.selected=function(n){return n===undefined&&(n=!0),this.each(function(){var i=this.type,t;i=="checkbox"||i=="radio"?this.checked=n:this.tagName.toLowerCase()=="option"&&(t=$(this).parent("select"),n&&t[0]&&t[0].type=="select-one"&&t.find("option").selected(!1),this.selected=n)})};$.fn.ajaxSubmit.debug=!1})