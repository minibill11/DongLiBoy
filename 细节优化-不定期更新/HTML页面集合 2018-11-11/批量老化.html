<!DOCTYPE html>
<html style="" class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>批量老化 - 健和光电MES</title>
    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/jquery"></script>

    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/jqueryform"></script>

    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/jqueryval"></script>

    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/jqueryvalAll"></script>

    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/home"></script>

    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/common"></script>

    <link href="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/easyui" rel="stylesheet">

    <link href="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/easyuicss.css" rel="stylesheet">

    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/modernizr"></script>

    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/bootstrap"></script>

    <link href="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/css.css" rel="stylesheet">

    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/echarts"></script>

    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/vue"></script>

    <script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/highcharts.html"></script>

</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                
                <a class="navbar-brand" href="http://172.16.6.145/">健和光电MES</a>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            全厂温湿度
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu collapse" style="text-align: center; min-width: 114px;">
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/FirstFloor">一楼</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/ThirdFloor">三楼</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/FourthFloor">四楼</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/FifthFloor">五楼</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/Sixthfloor">六楼</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/FloorDataShow">汇总表</a></li>
                        </ul>
                    </li>
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            空压机房
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu collapse" style="text-align: center; min-width: 114px;">
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa">空压机房</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/KongYaHT/KongYa/KYDataShow">汇总表</a></li>
                        </ul>
                    </li>
                    
                    <li><a href="http://172.16.6.145/ProductionControl">生产管控</a></li>
                    
                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            订单
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu collapse" style="text-align: center; min-width: 114px;">
                            <li><a href="http://172.16.6.145/OrderMgms">订单管理</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/BarCodes">条码管理</a></li>
                        </ul>
                    </li>

                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            装配一部
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu collapse" style="text-align: center; min-width: 114px;">
                            <li><a href="http://172.16.6.145/Assembles/AssembleIndex">组装产线</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/CalibrationRecords">校正信息</a></li>
                        </ul>
                    </li>

                    
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            品质部
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu collapse" style="text-align: center; min-width: 114px;">
                            <li><a href="http://172.16.6.145/Assembles/AssembleIndex">组装PQC</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/Burn_in">老化OQC</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/Appearances">外观包装</a></li>
                            <li class="divider"></li>
                            <li><a href="http://172.16.6.145/IQCReports">IQC管理</a></li>
                        </ul>
                    </li>
                    

                    

                        <li><a href="http://172.16.6.145/Users">用户管理</a></li>
                </ul>

                <div class="collapse navbar-collapse">
                    <ul class="nav navbar navbar-nav navbar-right">
                        <li>

                            
                            </li><li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                             郑振彪
                               <b class="caret"></b>
                             </a>
                               <ul class="dropdown-menu collapse" style="text-align: center; min-width: 100px;">
                                  <li>
                                    <a href="http://172.16.6.145/Users/Modifypwd/11">修改密码</a>
                                  </li>
                               </ul>
                             </li>
                           <li>
<a href="http://172.16.6.145/Users/Logoff">退出</a>                           </li>
                      </ul>
                </div>
                
            </div>
        </div>
    </div>
    <div class="container body-content">
        

<h2>批量老化</h2>
<script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/jquery-1.js"></script>
<script src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/vue.js"></script>
<style>
    .color-show {
        display: flex;
        flex-wrap: wrap;
    }

    .color-box {
        width: 50%;
        text-align: center;
        transition: transform .3s;
    }

    .green {
        color: green;
    }

    .red {
        color: red;
    }
</style>
<form action="/Burn_in/Burn_in_Batch_B" method="post"><input name="__RequestVerificationToken" value="EjVSibd6DH13li1pPoT1CwStr_tM2Bms7E7zEqlltwrsjY8-eRv-5-0kaRoexzttk7NVZhm_wrD8-7tKqY6Qdx6FrSJUIEIeXdCn922fxLM1" type="hidden">    <div id="app" class="form-horizontal"><h4>老化工作</h4> <hr> <div class="form-group"><div class="col-md-6"><label for="OrderNum" class="control-label col-md-4">订单号</label> <div class="col-md-8"><select id="OrderNum" name="OrderNum" class="form-control"><option value="2018-YA389-1">2018-YA389-1</option> <option value="2017-TEST-1" selected="selected">2017-TEST-1</option> <option value="2018-YA379-1">2018-YA379-1</option> <option value="2018-YA372-2">2018-YA372-2</option> <option value="2018-YA371-1">2018-YA371-1</option> <option value="2018-YA393-1">2018-YA393-1</option> <option value="2018-YA393-2">2018-YA393-2</option> <option value="2018-GY297-2">2018-GY297-2</option> <option value="2018-GA362-1">2018-GA362-1</option></select> <span data-valmsg-for="OrderNum" data-valmsg-replace="true" class="field-validation-valid text-danger"></span></div></div> <div class="col-md-6"></div></div> <div class="form-group"><div class="col-md-6"><label for="content" class="control-label col-md-4">输入模块条码</label> <div class="col-md-8"><input placeholder="请输入模块条码" id="content" class="form-control" style="display: inline;" type="text"> <button class="btn btn-default">添加</button> <br><span style="color: red; display: none;">不能输入相同条码</span></div> <div class="form-group"><div class="col-md-12"></div></div> <div class="form-group"><div class="col-md-8 col-md-offset-4"><button class="btn btn-default" style="color: dodgerblue;">检查条码</button> <input value="开始老化" class="btn btn-default" style="display: none;" type="button"></div></div> <label class="control-label col-md-4">模块条码清单:</label> <div class="col-md-8" style="height: 450px; overflow: auto;"><div class="form-group color-show"><li readonly="readonly" class="color-box form-control"><span>2017-TEST-1A00004</span> <button type="button" title="移除条码" style="border: medium none; float: right;">✗</button></li><li readonly="readonly" class="color-box form-control"><span>2017-TEST-1A00002</span> <button type="button" title="移除条码" style="border: medium none; float: right;">✗</button></li><li readonly="readonly" class="color-box form-control"><span>2017-TEST-1A00005</span> <button type="button" title="移除条码" style="border: medium none; float: right;">✗</button></li></div></div></div> <div class="col-md-6" style="height: 550px; overflow: auto;"><table class="table"><tbody><tr><th>条码号</th> <th>是否在订单中</th> <th>在其他订单号中</th> <th>是否可以老化</th> <th>开始时间</th> <th>完成时间</th> <th>老化状态</th></tr> <tr><td>2017-TEST-1A00004</td> <td>Yes</td> <td></td> <td>No</td> <td>2018/9/11 9:48:57</td> <td>2018/9/11 10:54:05</td> <td>经过3次老化，已经完成老化</td></tr><tr><td>2017-TEST-1A00002</td> <td>Yes</td> <td></td> <td>No</td> <td>2018/8/30 16:28:22</td> <td>2018/8/30 16:28:37</td> <td>已经完成老化</td></tr><tr><td>2017-TEST-1A00005</td> <td>Yes</td> <td></td> <td>Yes</td> <td></td> <td></td> <td>未开始老化</td></tr></tbody></table></div></div> <div class="col-md-4" style="display: none;"><textarea autofocus="autofocus" cols="5" id="BarCodesNum" name="BarCodesNum" rows="15" class="form-control">2017-TEST-1A00004,2017-TEST-1A00002,2017-TEST-1A00005</textarea> <span data-valmsg-for="BarCodesNum" data-valmsg-replace="true" class="field-validation-valid text-danger"></span></div> <div class="form-group"><div class="col-md-12"></div></div></div>
</form><div>
    <a href="http://172.16.6.145/Burn_in">返回</a>
</div>

<script type="text/javascript">
    var app = new Vue({ //创建Vue对象实例
        el: "#app", //挂载DOM元素的ID
        data: {
            tasks: [],
            newTask: "", //input默认值
            same: true,
            prompt: false,
            beginShow: false,
            returnList: [],
            okList: []
        },
        methods: {
            addTask: function (event) {
                event.preventDefault();
                this.beginShow = false;
                this.prompt = false;
                sames = app.same;
                if (app.newTask != "") {
                    app.tasks.forEach(function (item, index) {
                        if (app.newTask == item) {
                            console.log(index);
                            sames = false;
                            app.prompt = true;
                            app.newTask = "";
                        }
                    });
                    if (sames) { //没有相同数据才允许添加
                        app.tasks.push(app.newTask);
                        app.newTask = "";
                        $("#content").focus();
                        console.log(app.tasks); //数组
                    }
                }
            },
            removeTask: function (task) { //删除条码，重新排序数组，焦点回到input，保存删除后的数据
                this.beginShow = false;
                this.prompt = false;
                //指向Vue实例中的tasks
                removetasks = this.tasks;
                //remove
                removetasks.forEach(function (item, index) {
                    if (item == task) {
                        removetasks.splice(index, 1);
                    }
                });
                console.log(app.tasks); //数组
                $("#content").focus();
            },
            submitANDclearTask: function (event) { //提交post内容，清空本地存储表单
                event.preventDefault();
                $.ajax({
                    type: 'post',
                    url: '/Burn_in/Burn_in_Batch_Begin',
                    data: {
                        OrderNum: $("#OrderNum").val(),
                        BarCodesNumList: app.tasks
                    },
                    success: function (data) {
                        //console.log(data);
                        app.beginShow = false;
                        app.tasks = [];
                        app.returnList = [];
                        app.okList = [];
                        alert(data);
                        $("#content").focus();
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert("批量老化失败");
                        $("#content").focus();
                    }
                });
            },
            inspect: function (event) {
                event.preventDefault();
                this.prompt = false;
                //var cut = this.NumList.substr(0, this.NumList.length - 1).split("\n");
                //console.log(JSON.stringify(app.tasks));
                $.ajax({
                    type: 'post',
                    url: '/Burn_in/CheckBarCodesList_B',
                    data: {
                        OrderNum: $("#OrderNum").val(),
                        BarCodesNumList: app.tasks
                    },
                    success: function (data) {
                        //console.log(data);
                        app.returnList = [];
                        app.okList = [];
                        for (var i = 0; i < data[0].BarcodeList.length; i++) {
                            if (data[0].BarcodeComfirm[i] == "Yes") {
                                app.okList.push(data[0].BarcodeList[i])
                            };
                            app.returnList.push({
                                BarcodeList: data[0].BarcodeList[i],
                                BarcodeInOrder: data[0].BarcodeInOrder[i],
                                BarcodeInOtherOrder: data[0].BarcodeInOtherOrder[i][0],
                                BarcodeComfirm: data[0].BarcodeComfirm[i],
                                BarcodeBeginTime: data[0].BarcodeBeginTime[i],
                                BarcodeFinishTime: data[0].BarcodeFinishTime[i],
                                BarcodeStatus: data[0].BarcodeStatus[i]
                            });
                        };
                        if (app.returnList.length == app.okList.length) {
                            app.beginShow = true;
                        };
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert("请输入条码");
                        $("#content").focus();
                    }
                });
            }
        },
        computed: {

        },
        watch: {

        }
    });
</script>
<script>
    var localOrder = localStorage.getItem('Order');
    if (localOrder != null) {
        $("#OrderNum").val(localOrder);
    }
    $("#OrderNum").change(function (val) {
        localStorage.setItem('Order', val.target.value);
        $("#content").select();
    })
    $("#content").focus();
</script>


        
        <hr>
        <footer>
            <p align="center">© 2018 - 健和光电MES</p>
        </footer>
    </div>



<div id="translate-man-app" class="content-3WfBL_0" style="background-color: rgb(255, 255, 255); display: none;"><div data-v-ea0bd11e="" class="outputBox-qe9A4_0"><div data-v-ea0bd11e="" class="outputBox-3oESn_0"><span data-v-ea0bd11e="" class="outputBox-13Ovx_0"></span><!----></div><div data-v-ea0bd11e="" class="outputBox-1GLb__0"><!----><div data-v-ea0bd11e="" class="outputBox-onVZH_0"><img src="%E6%89%B9%E9%87%8F%E8%80%81%E5%8C%96_files/sound.svg" class="icon-tprjJ_0"></div></div><div data-v-ea0bd11e="" class="outputBox-2sJgr_0"></div><div data-v-ea0bd11e="" class="outputBox-17RAm_0" style="display: none;"><!----><!----><!----><div data-v-ea0bd11e=""></div></div></div></div></body></html>