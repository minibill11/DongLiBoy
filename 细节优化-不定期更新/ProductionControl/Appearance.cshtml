@model IEnumerable<JianHeMES.Models.Appearance>

@{
    ViewBag.Title = "Appearance";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/Scripts/jquery-1.11.3.js"></script>

<style>
    .barcodeFrame {
        width: 250px;
        height: 100px;
        border: 1px solid #000000;
        overflow: auto;
    }

    .abnormalFrame {
        width: 350px;
        height: 400px;
        border: 1px solid #000000;
        overflow: auto;
    }

    .titlerow div {
        font-size: 16px;
        font-weight: bold;
    }
</style>
<h2>@ViewBag.OrderNum 外观包装工序详细情况</h2>
@{
    var JsonObj = ViewBag.JsonObj;
}
<hr />
<div class="row titlerow">
    <div class="col-md-3">
        订单号：<a href="#" class="aOrderNum" myAttr="">@JsonObj.OrderNum</a>
    </div>
    <div class="col-md-2">
        平台类型：@ViewBag.PlatformType
    </div>
    <div class="col-md-3">
        出货日期：<span id="deliveryDate"></span>
    </div>
    <div class="col-md-2">
        模组数：@JsonObj.modelGroupQuantity
    </div>
    <div class="col-md-2">
        直通个数：@JsonObj.firstPassYieldCount
    </div>
</div>
<br />
<div class="row titlerow">
    <div class="col-md-3">
        总包装次数：<a href="#" class="aOrderNum" myAttr="">@JsonObj.Appearance_PQC_Count</a>
    </div>
    <div class="col-md-2">
        已完成包装数：<a href="#" class="aOrderNum" myAttr="正常">@JsonObj.finished</a>
    </div>
    <div class="col-md-3">
        完成率：@JsonObj.finisthRate %
    </div>
    <div class="col-md-2">
        合格率：@JsonObj.passRate %
    </div>
    <div class="col-md-2">
        直通率：@JsonObj.firstPassYield_Rate %
    </div>
</div>
<hr />
<div class="row">
    <div class="col-md-4">
        <div>
            未开始外观包装条码清单：（@JsonObj.unbeginRecordNum 个）
            <div class="barcodeFrame">
                <ul>
                    @foreach (var item in ViewBag.unbeginRecord_temp as List<string>)
                    {
                        <li>@item</li>
                    }
                </ul>
            </div>
        </div>
        <br />
        <div>
            已完成外观包装条码清单：（@JsonObj.passedNum 个）
            <div class="barcodeFrame">
                <ul>
                    @foreach (var item in ViewBag.passed_temp as List<JianHeMES.Models.Appearance>)
                    {
                        <li>@Html.RouteLink(item.BarCodesNum, "Default", new { Controller = "Appearances", Action = "Details", id = item.Id }, new { target = "_blank" })</li>
                    }
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div>
            正在进行外观包装条码清单：（@JsonObj.goingNum 个）
            <div class="barcodeFrame">
                <ul>
                    @foreach (var item in ViewBag.going_temp as List<JianHeMES.Models.Appearance>)
                    {
                        <li>@Html.RouteLink(item.BarCodesNum, "Default", new { Controller = "Appearances", Action = "Details", id = item.Id }, new { target = "_blank" })</li>
                    }
                </ul>
            </div>
        </div>
        <br />
    </div>
    <div class="col-md-4">
        <div>
            异常记录清单与异常信息：（@JsonObj.abnormalListNum 个）
            <div class="abnormalFrame">
                <ol>
                    @foreach (var item in ViewBag.abnormalList_temp as List<JianHeMES.Models.Appearance>)
                    {
                        <li>@Html.RouteLink(item.BarCodesNum, "Default", new { Controller = "Appearances", Action = "Details", id = item.Id }, new { target = "_blank" })<br />@item.Appearance_OQCCheckAbnormal</li>
                    }
                </ol>
            </div>
        </div>
    </div>
</div>
<form action="/Appearances/Index" method="post" target="_blank" style="display:none">
    @Html.AntiForgeryToken()
    <input type="text" name="orderNum" value="@JsonObj.OrderNum" id="formOrderNum" />
    <input type="text" name="BoxBarCode" value="" />
    <input type="text" name="AppearancesNormal" value="" id="formNormal" />
</form>

<script>
    $(function () {
        $(".aOrderNum").click(function (event) {
            event.preventDefault();
            $("#formNormal").val($(this).attr("myAttr"));
            $("form").submit();
        });
        $("#deliveryDate").text('@ViewBag.DeliveryDate'.split(" ")[0]);
    });
</script>

@*<p>
        @Html.ActionLink("Create New", "Create")
    </p>
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.OrderNum)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.BarCodesNum)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OQCCheckBT)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OQCPrincipal)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OQCCheckFT)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OQCCheckTime)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OQCCheckTimeSpan)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Appearance_OQCCheckAbnormal)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.RepairCondition)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.OQCCheckFinish)
            </th>
            <th></th>
        </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.OrderNum)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BarCodesNum)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.OQCCheckBT)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.OQCPrincipal)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.OQCCheckFT)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.OQCCheckTime)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.OQCCheckTimeSpan)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Appearance_OQCCheckAbnormal)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RepairCondition)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.OQCCheckFinish)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
                @Html.ActionLink("Details", "Details", new { id=item.Id }) |
                @Html.ActionLink("Delete", "Delete", new { id=item.Id })
            </td>
        </tr>
    }

    </table>*@
