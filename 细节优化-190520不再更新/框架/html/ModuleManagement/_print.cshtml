@*
    打印功能
*@
<script type="text/template" id="printComponent">
    <div class="print">
        <div class="flex-item">
            <label>选打印机</label>
            <div>
                <el-select v-model="printSelect" clearable placeholder="选择打印机" size="medium">
                    <el-option v-for="item in printOptions"
                               :key="item.value"
                               :label="item.label"
                               :value="item.value">
                    </el-option>
                </el-select>
            </div>
        </div>
        <div class="flex-item" v-show="printSelect!='0'&&printSelect!=''">
            <label>打印浓度</label>
            <div>
                <el-slider :max="30"
                           :min="-30"
                           size="medium"
                           class="nongduSlider"
                           v-model="nongDu"></el-slider>
            </div>
        </div>
        <div class="flex-item" v-show="printSelect!='0'&&printSelect!=''">
            <label>打印数量</label>
            <div>
                <el-input-number v-model.trim="pageCount"
                                 size="medium"
                                 :min="1"
                                 :max="5"
                                 clearable>
                </el-input-number>
            </div>
        </div>
        @*<div class="flex-item" v-show="printSelect!='0'&&printSelect!=''">
                <label>左偏移量</label>
                <div>
                    <el-input-number v-model.trim="leftdissmenion"
                                     size="medium"
                                     clearable>
                    </el-input-number>
                </div>
            </div>*@
    </div>
</script>
<script>
    Vue.component('print-component', {
        //props: ['info'],
        template: document.getElementById("printComponent"),
        data: function () {
            return {
                printSelect: '',
                printOptions: printIpAddress,
                pageCount: 1,
                nongDu: 30,
                leftdissmenion: 100,// 左偏移量
            }
        },
        mounted: function () {
            let printIP = localStorage.getItem('printIP');
            if (printIP != null) {
                this.printSelect = printIP;
            };
            let localpage = localStorage.getItem('printPageCount');
            if (localpage != null) {
                this.pageCount = localpage;
            };
            let localnongdu = localStorage.getItem('printNongDuCount');
            if (localnongdu != null) {
                this.nongDu = +localnongdu;
            };

            let localleftyl = localStorage.getItem('cassoadd_leftdissmenion');
            if (localleftyl != null) {
                this.leftdissmenion = +localleftyl;
            };
        },
        watch: {
            printSelect(v) {
                localStorage.setItem('printIP', v);
            },
            nongDu(v) {
                localStorage.setItem('printNongDuCount', v);
            },
            pageCount(v) {
                localStorage.setItem('printPageCount', v);
            },
            leftdissmenion(v) {
                localStorage.setItem('cassoadd_leftdissmenion', v);
            }
        },
        updated: function () {
            this.$emit("input", {
                ip: this.printSelect,
                pagecount: this.pageCount,
                port: 9101,
                concentration: this.nongDu,
                leftdissmenion: this.leftdissmenion
            });
        }
    });
</script>
